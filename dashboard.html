<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Dashboard | School Web #1</title>
<meta name="theme-color" content="#0d6efd"/>
<meta name="description" content="Student Dashboard"/>
<link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiU2Nob29sIERhc2hib2FyZCIsInNob3J0X25hbWUiOiJEYXNoIiwic3RhcnRfdXJsIjoiLi9kYXNoYm9hcmQuaHRtbCIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmZmYiLCJ0aGVtZV9jb2xvciI6IiMwZDZlZmQifQ=="/>
<style>
:root{--p:#0d6efd;--s:#6c757d;--l:#f8f9fa;--d:#212529;--a:#ffc107;--bg:#fff;--card:#f1f3f5;--muted:#6c757d}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{background:var(--bg);color:var(--d);min-height:100vh;display:flex;flex-direction:column}
header{background:var(--p);color:#fff;padding:10px 15px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:1000}
#hamburger{width:30px;height:30px;cursor:pointer;display:none;flex-direction:column;justify-content:center;gap:4px}
#hamburger span{background:#fff;height:3px;width:100%;border-radius:2px}
nav{background:var(--p);color:#fff;position:fixed;top:0;left:-250px;width:250px;height:100%;transition:.3s;z-index:999;padding:20px}
nav.open{left:0}
nav ul{list-style:none;display:flex;flex-direction:column;gap:15px}
nav ul li{cursor:pointer}
main{flex:1;padding:20px}
.grid{display:grid;gap:20px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
.card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
footer{background:var(--l);padding:15px;text-align:center;font-size:.9em;color:var(--muted);position:sticky;bottom:0}
#fab{position:fixed;bottom:20px;right:20px;background:var(--p);color:#fff;border:none;border-radius:50%;width:56px;height:56px;font-size:24px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:none}
#aiChat{position:fixed;bottom:80px;right:20px;width:320px;height:400px;background:#fff;border:1px solid var(--p);border-radius:12px;display:none;flex-direction:column;overflow:hidden;z-index:1001}
#aiChat header{background:var(--p);color:#fff;padding:10px;display:flex;justify-content:space-between;align-items:center}
#aiChat #aiBody{flex:1;padding:10px;overflow-y:auto}
#aiChat input{flex:1;padding:8px;border:1px solid #ccc;border-radius:8px;margin-right:5px}
#aiChat button{background:var(--p);color:#fff;border:none;border-radius:8px;padding:8px 12px;cursor:pointer}
#offlineBanner{display:none;background:var(--a);color:var(--d);padding:8px;text-align:center;position:sticky;top:0;z-index:1002}
@media(max-width:600px){
#hamburger{display:flex}
nav ul{flex-direction:row;flex-wrap:wrap;justify-content:center}
}
.hidden{display:none}
body.dark{--bg:#212529;--card:#343a40;--d:#f8f9fa;--l:#0d6efd}
</style>
</head>
<body>
<header>
  <h1 id="greet">Dashboard</h1>
  <div id="hamburger" onclick="toggleNav()">
    <span></span><span></span><span></span>
  </div>
</header>
<nav id="nav">
  <ul>
    <li onclick="printPage()">ğŸ“„ Print</li>
    <li onclick="sharePage()">ğŸ”— Share</li>
    <li onclick="downloadPDF()">ğŸ“¥ PDF</li>
    <li onclick="toggleDark()">ğŸŒ— Dark Mode</li>
    <li onclick="pushReminder()">ğŸ”” Reminder</li>
    <li onclick="backup()">ğŸ’¾ Backup JSON</li>
    <li onclick="restore()">ğŸ“‚ Restore JSON</li>
    <li onclick="clearCache()">ğŸ—‘ï¸ Clear Cache</li>
    <li onclick="installPWA()">â¬‡ï¸ Install App</li>
  </ul>
</nav>
<div id="offlineBanner">You are offline</div>
<main>
  <section id="homework" class="grid"></section>
</main>
<footer>
  Â© 2025 School Web #1
</footer>
<button id="fab" onclick="scrollTop()">â¬†ï¸</button>
<div id="aiChat">
  <header>
    <span>ğŸ¤– AI Chat</span>
    <button onclick="toggleAI()">âœ–ï¸</button>
  </header>
  <div id="aiBody"></div>
  <div style="display:flex;padding:10px">
    <input id="aiIn" placeholder="Ask anything..."/>
    <button onclick="sendAI()">â¡ï¸</button>
  </div>
</div>
<button style="position:fixed;bottom:20px;left:20px;background:var(--p);color:#fff;border:none;border-radius:50%;width:56px;height:56px;font-size:24px;cursor:pointer" onclick="toggleAI()">ğŸ¤–</button>
<script>
const name=localStorage.getItem('name')||'Student';
const cls=localStorage.getItem('cls')||'0';
document.getElementById('greet').textContent=`Welcome, ${name}`;
const homeworkData={
1:[{sub:'Math',task:'Count 1 to 100 ğŸ”¢'},{sub:'Art',task:'Draw a ğŸŒˆ'}],
2:[{sub:'Math',task:'Addition 1-20 â•'},{sub:'EVS',task:'Name 5 ğŸ¶ breeds'}],
3:[{sub:'Math',task:'Multiplication 2-5 âœ–ï¸'},{sub:'English',task:'Write a âœ‰ï¸'}],
4:[{sub:'Math',task:'Division basics â—'},{sub:'Science',task:'Label ğŸŒ¿ parts'}],
5:[{sub:'Math',task:'Fractions ğŸ•'},{sub:'History',task:'Draw ğŸ¯'}],
6:[{sub:'Math',task:'Decimals ğŸ”¢'},{sub:'Geography',task:'Map ğŸŒ continents'}],
7:[{sub:'Math',task:'Algebra ğŸ§®'},{sub:'Physics',task:'Laws of âš½ motion'}],
8:[{sub:'Math',task:'Geometry ğŸ“'},{sub:'Chemistry',task:'Periodic table ğŸ”¬'}],
9:[{sub:'Math',task:'Trigonometry ğŸ“'},{sub:'Biology',task:'Cell ğŸ”¬ diagram'}],
10:[{sub:'Math',task:'Statistics ğŸ“Š'},{sub:'Civics',task:'Constitution ğŸ“œ'}],
11:[{sub:'Physics',task:'Thermo ğŸ”¥'},{sub:'Chemistry',task:'Organic ğŸ§ª'}],
12:[{sub:'Math',task:'Calculus ğŸ“ˆ'},{sub:'Computer',task:'Python ğŸ basics'}]
};
const hw=document.getElementById('homework');
(hw[cls]||[]).forEach(h=>{
  const card=document.createElement('div');
  card.className='card';
  card.innerHTML=`<h3>${h.sub}</h3><p>${h.task}</p>`;
  hw.appendChild(card);
});
window.addEventListener('scroll',()=>{document.getElementById('fab').style.display=window.scrollY>200?'block':'none'});
function scrollTop(){window.scrollTo({top:0,behavior:'smooth'})}
function toggleNav(){document.getElementById('nav').classList.toggle('open')}
function toggleDark(){document.body.classList.toggle('dark')}
function printPage(){window.print()}
function sharePage(){navigator.share?navigator.share({title:'Dashboard',url:location.href}):alert('Sharing not supported')}
function downloadPDF(){window.print()}
function pushReminder(){Notification.requestPermission().then(p=>p==='granted'?new Notification('Homework Reminder set'):alert('Notifications blocked'))}
function backup(){const a=document.createElement('a');a.href='data:text/json;charset=utf-8,'+encodeURIComponent(JSON.stringify(localStorage));a.download='backup.json';a.click()}
function restore(){const i=document.createElement('input');i.type='file';i.accept='.json';i.onchange=e=>{const f=e.target.files[0];f&&f.text().then(t=>{const d=JSON.parse(t);Object.keys(d).forEach(k=>localStorage.setItem(k,d[k]));location.reload()})};i.click()}
function clearCache(){localStorage.clear();location.reload()}
function installPWA(){deferredPrompt?.prompt()}
let deferredPrompt=null;
window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();deferredPrompt=e});
window.addEventListener('online',()=>document.getElementById('offlineBanner').style.display='none');
window.addEventListener('offline',()=>document.getElementById('offlineBanner').style.display='block');
function toggleAI(){const c=document.getElementById('aiChat');c.style.display=c.style.display==='flex'?'none':'flex'}
async function sendAI(){
  const inpt=document.getElementById('aiIn');
  const msg=inpt.value.trim();if(!msg)return;
  const body=document.getElementById('aiBody');
  body.innerHTML+=`<div style="text-align:right">${msg}</div>`;
  inpt.value='';
  const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=AIzaSyCdzFBQ1KVgBfmmjSgHJJwcuLbqne9VjUs`,{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({contents:[{parts:[{text:msg}]}]})
  });
  const data=await res.json();
  const reply=data.candidates?.[0]?.content?.parts?.[0]?.text||'No reply';
  body.innerHTML+=`<div style="background:#f1f3f5;padding:5px;border-radius:5px;margin:5px 0">${reply}</div>`;
  body.scrollTop=body.scrollHeight;
}
if(location.hash==='#admin'){const p=prompt('Admin password');if(p==='Abutalha')location.href='admin.html'}
navigator.serviceWorker?.register('data:text/javascript,console.log("SW ready")');
</script>
</body>
</html>
