<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student Dashboard | Milli Karwaan Public School</title>
  <link rel="icon" type="image/png" href="https://i.postimg.cc/ryGx49TB/erasebg-transformed.png">
  <style>
    /* Reset & Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --bg-primary: #f8fafc;
      --bg-secondary: #ffffff;
      --bg-tertiary: #f1f5f9;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-tertiary: #64748b;
      --accent: #0d6efd;
      --accent-light: #e3f2fd;
      --accent-dark: #0b5ed7;
      --success: #198754;
      --success-light: #d1e7dd;
      --warning: #ffc107;
      --warning-light: #fff3cd;
      --danger: #dc3545;
      --danger-light: #f8d7da;
      --border: #e2e8f0;
      --border-light: #f1f5f9;
      --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
      --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      --radius: 20px;
      --radius-md: 12px;
      --radius-sm: 8px;
      --transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      --glow: 0 0 30px rgba(13, 110, 253, 0.25);
      --animation-slow: cubic-bezier(0.25, 0.46, 0.45, 0.94);
      --animation-fast: cubic-bezier(0.68, -0.55, 0.265, 1.55);
      --header-height: 64px;
      --bottom-nav-height: 60px;
    }

    [data-theme="dark"] {
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #334155;
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
      --text-tertiary: #cbd5e1;
      --accent: #3b82f6;
      --accent-light: #1e3a8a;
      --accent-dark: #2563eb;
      --success: #15803d;
      --success-light: #064e3b;
      --warning: #d97706;
      --warning-light: #7c2d12;
      --danger: #b91c1c;
      --danger-light: #7f1d1d;
      --border: #334155;
      --border-light: #1e293b;
      --glow: 0 0 35px rgba(59, 130, 246, 0.3);
    }

    body {
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.7;
      transition: var(--transition);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    /* Layout */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 1rem;
      flex: 1;
    }

    /* Header */
    header {
      height: var(--header-height);
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      color: white;
      position: sticky;
      top: 0;
      z-index: 50;
      box-shadow: var(--shadow-md);
      display: flex;
      align-items: center;
      padding: 0 1rem;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
    }

    .logo-section {
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .logo {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .school-title {
      font-size: 1.1rem;
      font-weight: 600;
      white-space: nowrap;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .notification-btn, .profile-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .notification-btn:hover, .profile-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    .notification-badge {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 18px;
      height: 18px;
      background: var(--danger);
      color: white;
      font-size: 0.7rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    /* Main Content */
    main {
      padding: 1.5rem 0;
      flex: 1;
    }

    .welcome-section {
      text-align: center;
      margin-bottom: 2rem;
      padding: 1.5rem;
      background: linear-gradient(135deg, var(--accent-light) 0%, var(--bg-tertiary) 100%);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .welcome-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--accent-dark);
    }

    [data-theme="dark"] .welcome-title {
      color: var(--accent);
    }

    .welcome-subtitle {
      color: var(--text-secondary);
      font-size: 1rem;
    }

    /* Grid Layout */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    /* Cards */
    .card {
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow);
      overflow: hidden;
      transition: var(--transition);
      border: 1px solid var(--border);
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .card-header {
      padding: 1.2rem 1.5rem;
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .card-icon {
      width: 36px;
      height: 36px;
      background: var(--accent-light);
      color: var(--accent);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
    }

    [data-theme="dark"] .card-icon {
      background: rgba(59, 130, 246, 0.2);
      color: var(--accent);
    }

    .card-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .card-body {
      padding: 1.5rem;
    }

    /* Timetable */
    .timetable {
      width: 100%;
      border-collapse: collapse;
    }

    .timetable th {
      text-align: left;
      padding: 0.8rem 0.5rem;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.9rem;
      border-bottom: 2px solid var(--border);
    }

    .timetable td {
      padding: 0.7rem 0.5rem;
      border-bottom: 1px solid var(--border-light);
      font-size: 0.95rem;
    }

    .subject {
      font-weight: 500;
      color: var(--text-primary);
    }

    .time {
      color: var(--text-tertiary);
      font-size: 0.85rem;
    }

    /* Homework List */
    .homework-list {
      list-style: none;
    }

    .homework-item {
      padding: 0.8rem 0;
      border-bottom: 1px solid var(--border-light);
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
    }

    .homework-item:last-child {
      border-bottom: none;
    }

    .hw-icon {
      color: var(--accent);
      font-size: 1.1rem;
      margin-top: 0.2rem;
    }

    .hw-content {
      flex: 1;
    }

    .hw-title {
      font-weight: 500;
      margin-bottom: 0.2rem;
    }

    .hw-subject {
      font-size: 0.85rem;
      color: var(--text-tertiary);
      margin-bottom: 0.3rem;
    }

    .hw-date {
      font-size: 0.8rem;
      color: var(--text-tertiary);
    }

    /* Upload Area */
    .upload-area {
      border: 2px dashed var(--border);
      border-radius: var(--radius-md);
      padding: 1.5rem;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .upload-area:hover {
      border-color: var(--accent);
      background: rgba(13, 110, 253, 0.03);
    }

    .upload-icon {
      font-size: 2.5rem;
      color: var(--accent);
      margin-bottom: 0.8rem;
    }

    .upload-text {
      color: var(--text-secondary);
      margin-bottom: 0.5rem;
    }

    .upload-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: var(--radius-sm);
      font-size: 0.95rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .upload-btn:hover {
      background: var(--accent-dark);
    }

    /* Messages */
    .messages {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .message {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      padding: 0.8rem;
      background: var(--bg-tertiary);
      border-radius: var(--radius-sm);
    }

    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--accent-light);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent);
      font-weight: 600;
      font-size: 0.9rem;
    }

    .message-content {
      flex: 1;
    }

    .message-sender {
      font-weight: 500;
      font-size: 0.95rem;
      margin-bottom: 0.2rem;
    }

    .message-text {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .message-time {
      font-size: 0.8rem;
      color: var(--text-tertiary);
    }

    /* AI Assistant */
    .ai-container {
      position: relative;
    }

    .ai-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 1.2rem;
      margin: 0 auto 1rem;
      box-shadow: var(--shadow);
    }

    .ai-message {
      background: var(--accent-light);
      color: var(--accent-dark);
      padding: 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.95rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    [data-theme="dark"] .ai-message {
      background: rgba(59, 130, 246, 0.2);
      color: var(--accent);
    }

    .ai-input {
      display: flex;
      gap: 0.5rem;
    }

    .ai-input input {
      flex: 1;
      padding: 0.8rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .ai-input input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.2);
    }

    .ai-input button {
      background: var(--accent);
      color: white;
      border: none;
      width: 48px;
      height: 48px;
      border-radius: var(--radius-sm);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ai-input button:hover {
      background: var(--accent-dark);
    }

    /* Calendar */
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.5rem;
    }

    .calendar-header {
      grid-column: span 7;
      text-align: center;
      font-weight: 600;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .calendar-day {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-tertiary);
      font-weight: 500;
    }

    .calendar-date {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0.2rem auto;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.95rem;
    }

    .calendar-date:hover {
      background: var(--accent-light);
      color: var(--accent);
    }

    .calendar-date.today {
      background: var(--accent);
      color: white;
      font-weight: 600;
    }

    .calendar-date.event {
      position: relative;
    }

    .calendar-date.event::after {
      content: '';
      position: absolute;
      bottom: 2px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
    }

    /* Bottom Navigation */
    .bottom-nav {
      height: var(--bottom-nav-height);
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      display: flex;
      position: sticky;
      bottom: 0;
      z-index: 40;
      box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .nav-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0.8rem 0;
      color: var(--text-tertiary);
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .nav-item.active {
      color: var(--accent);
    }

    .nav-item i {
      font-size: 1.3rem;
      margin-bottom: 0.3rem;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 2rem 1rem;
      color: var(--text-tertiary);
    }

    .empty-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      opacity: 0.3;
    }

    /* PWA Install Prompt */
    .pwa-prompt {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg-secondary);
      color: var(--text-primary);
      padding: 1rem 1.5rem;
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-xl);
      display: flex;
      align-items: center;
      gap: 1rem;
      z-index: 100;
      border: 1px solid var(--border);
    }

    .pwa-prompt.hidden {
      display: none;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .dashboard-grid {
        grid-template-columns: 1fr;
      }
      
      .welcome-section {
        padding: 1.2rem;
      }
      
      .welcome-title {
        font-size: 1.3rem;
      }
      
      .card-body {
        padding: 1.2rem;
      }
      
      .timetable th, .timetable td {
        padding: 0.6rem;
        font-size: 0.9rem;
      }
      
      .homework-item {
        gap: 0.6rem;
      }
      
      .hw-title {
        font-size: 0.95rem;
      }
      
      .message {
        gap: 0.6rem;
      }
      
      .message-avatar {
        width: 32px;
        height: 32px;
        font-size: 0.8rem;
      }
      
      .ai-avatar {
        width: 40px;
        height: 40px;
        font-size: 1rem;
      }
      
      .ai-message {
        font-size: 0.9rem;
        padding: 0.8rem;
      }
      
      .ai-input input {
        padding: 0.7rem;
      }
      
      .ai-input button {
        width: 40px;
        height: 40px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <div class="logo-section">
        <img src="https://i.postimg.cc/ryGx49TB/erasebg-transformed.png" alt="Logo" class="logo" />
        <div class="school-title">MKPS Balrampur</div>
      </div>
      <div class="header-actions">
        <button class="notification-btn" id="notification-btn">
          <i>üîî</i>
          <div class="notification-badge">3</div>
        </button>
        <button class="profile-btn" id="profile-btn">
          <i>üë§</i>
        </button>
      </div>
    </div>
  </header>

  <div class="container">
    <main>
      <!-- Welcome Section -->
      <section class="welcome-section">
        <h2 class="welcome-title">Welcome, <span id="student-name">Student</span>!</h2>
        <p class="welcome-subtitle">Class <span id="student-class">X</span> ‚Ä¢ Last Login: <span id="last-login">Today</span></p>
      </section>

      <!-- Dashboard Grid -->
      <div class="dashboard-grid">
        <!-- Timetable -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üìÖ</div>
            <h3 class="card-title">Today's Timetable</h3>
          </div>
          <div class="card-body">
            <table class="timetable">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Subject</th>
                </tr>
              </thead>
              <tbody id="timetable-body">
                <tr>
                  <td class="time">9:00 - 10:00</td>
                  <td class="subject">Hindi</td>
                </tr>
                <tr>
                  <td class="time">10:00 - 11:00</td>
                  <td class="subject">Mathematics</td>
                </tr>
                <tr>
                  <td class="time">11:15 - 12:15</td>
                  <td class="subject">Science</td>
                </tr>
                <tr>
                  <td class="time">12:15 - 1:15</td>
                  <td class="subject">English</td>
                </tr>
                <tr>
                  <td class="time">2:00 - 3:00</td>
                  <td class="subject">Social Studies</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Homework -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üìö</div>
            <h3 class="card-title">Homework</h3>
          </div>
          <div class="card-body">
            <ul class="homework-list" id="homework-list">
              <li class="homework-item">
                <span class="hw-icon">üìù</span>
                <div class="hw-content">
                  <div class="hw-title">Mathematics Assignment</div>
                  <div class="hw-subject">Chapter 5: Fractions</div>
                  <div class="hw-date">Due: Tomorrow</div>
                </div>
              </li>
              <li class="homework-item">
                <span class="hw-icon">üé®</span>
                <div class="hw-content">
                  <div class="hw-title">Art Project</div>
                  <div class="hw-subject">Landscape Drawing</div>
                  <div class="hw-date">Due: Friday</div>
                </div>
              </li>
              <li class="homework-item">
                <span class="hw-icon">üìñ</span>
                <div class="hw-content">
                  <div class="hw-title">Reading Assignment</div>
                  <div class="hw-subject">English: Chapter 3</div>
                  <div class="hw-date">Due: Monday</div>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <!-- Upload Homework -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üì§</div>
            <h3 class="card-title">Upload Homework</h3>
          </div>
          <div class="card-body">
            <div class="upload-area" id="upload-area">
              <div class="upload-icon">üìÅ</div>
              <div class="upload-text">Click to upload your completed homework</div>
              <button class="upload-btn">Choose File</button>
            </div>
          </div>
        </div>

        <!-- Messages -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üí¨</div>
            <h3 class="card-title">Messages</h3>
          </div>
          <div class="card-body">
            <div class="messages" id="messages-list">
              <div class="message">
                <div class="message-avatar">T</div>
                <div class="message-content">
                  <div class="message-sender">Teacher</div>
                  <div class="message-text">Don't forget to complete your mathematics assignment by tomorrow.</div>
                  <div class="message-time">10:30 AM</div>
                </div>
              </div>
              <div class="message">
                <div class="message-avatar">P</div>
                <div class="message-content">
                  <div class="message-sender">Principal</div>
                  <div class="message-text">School will be closed on Friday for Diwali celebrations.</div>
                  <div class="message-time">Yesterday</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Assistant -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">ü§ñ</div>
            <h3 class="card-title">AI Assistant</h3>
          </div>
          <div class="card-body ai-container">
            <div class="ai-avatar">AI</div>
            <div class="ai-message">
              Hello! I'm your learning assistant. How can I help you with your studies today?
            </div>
            <div class="ai-input">
              <input type="text" placeholder="Ask me anything about your studies..." id="ai-input" />
              <button id="ai-send">‚û§</button>
            </div>
          </div>
        </div>

        <!-- Calendar -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üóìÔ∏è</div>
            <h3 class="card-title">Calendar</h3>
          </div>
          <div class="card-body">
            <div class="calendar">
              <div class="calendar-header">October 2023</div>
              <div class="calendar-day">Sun</div>
              <div class="calendar-day">Mon</div>
              <div class="calendar-day">Tue</div>
              <div class="calendar-day">Wed</div>
              <div class="calendar-day">Thu</div>
              <div class="calendar-day">Fri</div>
              <div class="calendar-day">Sat</div>
              
              <div class="calendar-date">1</div>
              <div class="calendar-date">2</div>
              <div class="calendar-date">3</div>
              <div class="calendar-date">4</div>
              <div class="calendar-date">5</div>
              <div class="calendar-date">6</div>
              <div class="calendar-date">7</div>
              
              <div class="calendar-date">8</div>
              <div class="calendar-date">9</div>
              <div class="calendar-date">10</div>
              <div class="calendar-date">11</div>
              <div class="calendar-date">12</div>
              <div class="calendar-date">13</div>
              <div class="calendar-date">14</div>
              
              <div class="calendar-date">15</div>
              <div class="calendar-date">16</div>
              <div class="calendar-date">17</div>
              <div class="calendar-date">18</div>
              <div class="calendar-date">19</div>
              <div class="calendar-date">20</div>
              <div class="calendar-date today">21</div>
              
              <div class="calendar-date">22</div>
              <div class="calendar-date">23</div>
              <div class="calendar-date">24</div>
              <div class="calendar-date">25</div>
              <div class="calendar-date event">26</div>
              <div class="calendar-date">27</div>
              <div class="calendar-date">28</div>
              
              <div class="calendar-date">29</div>
              <div class="calendar-date">30</div>
              <div class="calendar-date">31</div>
              <div class="calendar-date"></div>
              <div class="calendar-date"></div>
              <div class="calendar-date"></div>
              <div class="calendar-date"></div>
            </div>
          </div>
        </div>

        <!-- Export Data -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon">üìä</div>
            <h3 class="card-title">Export Data</h3>
          </div>
          <div class="card-body">
            <div class="export-options">
              <button class="upload-btn" style="width: 100%; margin-bottom: 0.8rem;" id="export-pdf">
                üìÑ Export as PDF
              </button>
              <button class="upload-btn" style="width: 100%; background: #198754; border: none;" id="export-excel">
                üìä Export as Excel
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <div class="nav-item active">
      <i>üè†</i>
      <span>Home</span>
    </div>
    <div class="nav-item">
      <i>üìö</i>
      <span>Homework</span>
    </div>
    <div class="nav-item">
      <i>üí¨</i>
      <span>Messages</span>
    </div>
    <div class="nav-item">
      <i>üë§</i>
      <span>Profile</span>
    </div>
  </nav>

  <!-- PWA Install Prompt -->
  <div class="pwa-prompt hidden" id="pwa-prompt">
    <div>üì• Install our app for better experience!</div>
    <button style="background: var(--accent); color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px;" id="install-button">Install</button>
  </div>

  <!-- Shared Utilities from index.html -->
  <script>
    // Storage Utility with namespace
    const StorageUtil = {
      prefix: 'mkps_',
      set(key, value) {
        try {
          localStorage.setItem(this.prefix + key, JSON.stringify(value));
        } catch (e) {
          console.error('Storage error:', e);
        }
      },
      get(key) {
        try {
          const item = localStorage.getItem(this.prefix + key);
          return item ? JSON.parse(item) : null;
        } catch (e) {
          console.error('Storage error:', e);
          return null;
        }
      },
      remove(key) {
        localStorage.removeItem(this.prefix + key);
      }
    };

    // i18n Engine
    const i18n = {
      en: {
        welcome: 'Welcome',
        lastLogin: 'Last Login',
        today: 'Today',
        homework: 'Homework',
        upload: 'Upload',
        messages: 'Messages',
        aiAssistant: 'AI Assistant',
        calendar: 'Calendar',
        export: 'Export',
        installApp: 'Install our app for better experience!',
        install: 'Install',
        noHomework: 'No homework assigned',
        loading: 'Loading...',
        error: 'Error',
        success: 'Success'
      },
      hi: {
        welcome: '‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
        lastLogin: '‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§≤‡•â‡§ó‡§ø‡§®',
        today: '‡§Ü‡§ú',
        homework: '‡§ó‡•É‡§π‡§ï‡§æ‡§∞‡•ç‡§Ø',
        upload: '‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
        messages: '‡§∏‡§Ç‡§¶‡•á‡§∂',
        aiAssistant: '‡§è‡§Ü‡§à ‡§∏‡§π‡§æ‡§Ø‡§ï',
        calendar: '‡§ï‡•à‡§≤‡•á‡§Ç‡§°‡§∞',
        export: '‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§',
        installApp: '‡§¨‡•á‡§π‡§§‡§∞ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§ê‡§™ ‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç!',
        install: '‡§∏‡•ç‡§•‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç',
        noHomework: '‡§ï‡•ã‡§à ‡§ó‡•É‡§π‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à',
        loading: '‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
        error: '‡§§‡•ç‡§∞‡•Å‡§ü‡§ø',
        success: '‡§∏‡§´‡§≤‡§§‡§æ'
      }
    };

    // Current language
    let currentLang = 'en';

    // Date Utility
    const formatDate = (date) => {
      return new Date(date).toLocaleDateString(currentLang === 'hi' ? 'hi-IN' : 'en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    };

    const formatTimeAgo = (timestamp) => {
      const now = new Date();
      const time = new Date(timestamp);
      const diffInHours = Math.floor((now - time) / (1000 * 60 * 60));
      
      if (diffInHours < 1) return 'Just now';
      if (diffInHours < 24) return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;
      return formatDate(timestamp);
    };

    // Toast Notification System
    function showToast(message, type = 'success') {
      // Create toast if it doesn't exist
      let toast = document.getElementById('toast');
      if (!toast) {
        toast = document.createElement('div');
        toast.id = 'toast';
        toast.className = 'toast';
        document.body.appendChild(toast);
      }
      
      toast.textContent = message;
      toast.className = `toast ${type}`;
      toast.classList.add('show');

      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Initialize Dashboard
    function initDashboard() {
      // Get current user
      const currentUser = StorageUtil.get('currentUser');
      if (!currentUser || currentUser.role !== 'student') {
        window.location.href = 'index.html';
        return;
      }

      // Set current language
      currentLang = StorageUtil.get('language') || 'en';

      // Update welcome section
      document.getElementById('student-name').textContent = currentUser.name;
      document.getElementById('student-class').textContent = currentUser.class;
      document.getElementById('last-login').textContent = formatTimeAgo(currentUser.timestamp);

      // Update timetable based on class
      updateTimetable(currentUser.class);

      // Load homework
      loadHomework(currentUser.class);

      // Check for PWA install
      checkPWAInstall();

      // Event Listeners
      setupEventListeners();
    }

    function updateTimetable(classLevel) {
      const timetableBody = document.getElementById('timetable-body');
      timetableBody.innerHTML = '';

      // Sample timetable data by class
      const timetableData = {
        'Nursery': [
          { time: '9:00 - 10:00', subject: 'Rhymes & Songs' },
          { time: '10:00 - 11:00', subject: 'Basic Shapes' },
          { time: '11:15 - 12:15', subject: 'Story Time' },
          { time: '12:15 - 1:15', subject: 'Drawing' },
          { time: '2:00 - 3:00', subject: 'Play Time' }
        ],
        '1': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'EVS' },
          { time: '2:00 - 3:00', subject: 'Art & Craft' }
        ],
        '2': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'EVS' },
          { time: '2:00 - 3:00', subject: 'Art & Craft' }
        ],
        '3': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'EVS' },
          { time: '2:00 - 3:00', subject: 'Art' }
        ],
        '4': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'Science' },
          { time: '2:00 - 3:00', subject: 'Social Studies' }
        ],
        '5': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'Science' },
          { time: '2:00 - 3:00', subject: 'Social Studies' }
        ],
        '6': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'Science' },
          { time: '2:00 - 3:00', subject: 'Social Studies' }
        ],
        '7': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'Science' },
          { time: '2:00 - 3:00', subject: 'Social Studies' }
        ],
        '8': [
          { time: '9:00 - 10:00', subject: 'Hindi' },
          { time: '10:00 - 11:00', subject: 'Mathematics' },
          { time: '11:15 - 12:15', subject: 'English' },
          { time: '12:15 - 1:15', subject: 'Science' },
          { time: '2:00 - 3:00', subject: 'Social Studies' }
        ]
      };

      const data = timetableData[classLevel] || timetableData['1'];
      data.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="time">${item.time}</td>
          <td class="subject">${item.subject}</td>
        `;
        timetableBody.appendChild(row);
      });
    }

    function loadHomework(classLevel) {
      const homeworkList = document.getElementById('homework-list');
      homeworkList.innerHTML = '';

      // Sample homework data
      const homeworkData = {
        'Nursery': [
          { title: 'Color the picture', subject: 'Art & Craft', due: 'Tomorrow' },
          { title: 'Learn rhymes', subject: 'Rhymes', due: 'Friday' }
        ],
        '1': [
          { title: 'Mathematics Worksheet', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Hindi Varnamala', subject: 'Hindi', due: 'Friday' },
          { title: 'English Alphabet', subject: 'English', due: 'Monday' }
        ],
        '2': [
          { title: 'Mathematics Assignment', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Hindi Paragraph', subject: 'Hindi', due: 'Friday' },
          { title: 'English Story', subject: 'English', due: 'Monday' }
        ],
        '3': [
          { title: 'Mathematics Problems', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Hindi Essay', subject: 'Hindi', due: 'Friday' },
          { title: 'English Composition', subject: 'English', due: 'Monday' }
        ],
        '4': [
          { title: 'Mathematics Exercise', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Hindi Project', subject: 'Hindi', due: 'Friday' },
          { title: 'English Letter', subject: 'English', due: 'Monday' }
        ],
        '5': [
          { title: 'Mathematics Assignment', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Science Project', subject: 'Science', due: 'Friday' },
          { title: 'English Essay', subject: 'English', due: 'Monday' }
        ],
        '6': [
          { title: 'Mathematics Problems', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Science Experiment', subject: 'Science', due: 'Friday' },
          { title: 'English Composition', subject: 'English', due: 'Monday' }
        ],
        '7': [
          { title: 'Mathematics Exercise', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Science Project', subject: 'Science', due: 'Friday' },
          { title: 'English Essay', subject: 'English', due: 'Monday' }
        ],
        '8': [
          { title: 'Mathematics Assignment', subject: 'Mathematics', due: 'Tomorrow' },
          { title: 'Science Experiment', subject: 'Science', due: 'Friday' },
          { title: 'English Composition', subject: 'English', due: 'Monday' }
        ]
      };

      const data = homeworkData[classLevel] || homeworkData['1'];
      if (data.length === 0) {
        homeworkList.innerHTML = '<li class="homework-item empty-state"><div class="empty-icon">üìù</div><div class="hw-content"><div class="hw-title">No homework assigned</div></div></li>';
        return;
      }

      data.forEach(item => {
        const li = document.createElement('li');
        li.className = 'homework-item';
        li.innerHTML = `
          <span class="hw-icon">üìù</span>
          <div class="hw-content">
            <div class="hw-title">${item.title}</div>
            <div class="hw-subject">${item.subject}</div>
            <div class="hw-date">Due: ${item.due}</div>
          </div>
        `;
        homeworkList.appendChild(li);
      });
    }

    function setupEventListeners() {
      // Upload area
      document.getElementById('upload-area').addEventListener('click', () => {
        showToast('File upload feature will be available soon!', 'warning');
      });

      // AI Assistant
      document.getElementById('ai-send').addEventListener('click', handleAIQuery);
      document.getElementById('ai-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          handleAIQuery();
        }
      });

      // Export buttons
      document.getElementById('export-pdf').addEventListener('click', () => {
        showToast('Exporting data as PDF...', 'success');
      });

      document.getElementById('export-excel').addEventListener('click', () => {
        showToast('Exporting data as Excel...', 'success');
      });

      // Notification button
      document.getElementById('notification-btn').addEventListener('click', () => {
        showToast('Loading notifications...', 'success');
      });

      // Profile button
      document.getElementById('profile-btn').addEventListener('click', () => {
        showToast('Opening profile...', 'success');
      });

      // Bottom nav
      document.querySelectorAll('.nav-item').forEach((item, index) => {
        item.addEventListener('click', () => {
          document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
          
          const pages = ['index.html', 'dashboard.html', 'parent.html', 'teacher.html'];
          if (index === 0) return; // Already on home
          if (index === 1) window.location.href = 'dashboard.html';
          if (index === 2) showToast('Messages will be available soon!', 'warning');
          if (index === 3) showToast('Profile will be available soon!', 'warning');
        });
      });

      // PWA install
      document.getElementById('install-button').addEventListener('click', () => {
        showToast('App installed successfully!', 'success');
        document.getElementById('pwa-prompt').classList.add('hidden');
      });
    }

    function handleAIQuery() {
      const input = document.getElementById('ai-input');
      const query = input.value.trim();
      
      if (!query) return;
      
      // Add user message (simulated)
      const aiMessage = document.querySelector('.ai-message');
      aiMessage.textContent = 'Thinking...';
      
      // Simulate AI response
      setTimeout(() => {
        const responses = [
          'I can help you with your studies. What would you like to know?',
          'That\'s a great question! Let me explain that concept for you.',
          'I recommend reviewing your textbook for that topic. Would you like me to summarize it?',
          'You can find the answer in Chapter 3 of your Mathematics book.',
          'Let me help you solve that problem step by step.'
        ];
        aiMessage.textContent = responses[Math.floor(Math.random() * responses.length)];
        input.value = '';
      }, 1000);
    }

    function checkPWAInstall() {
      // Simulate PWA install prompt after 3 seconds
      setTimeout(() => {
        document.getElementById('pwa-prompt').classList.remove('hidden');
      }, 3000);
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', initDashboard);

    // Theme handling
    const savedTheme = StorageUtil.get('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
  </script>
</body>
</html>
