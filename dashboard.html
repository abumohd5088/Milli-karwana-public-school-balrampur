<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Student Dashboard | Milli Karwaan Public School</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --primary: #4361ee;
      --primary-light: #5ee7df;
      --secondary: #3a0ca3;
      --success: #4cc9f0;
      --warning: #f72585;
      --dark: #1d3557;
      --light: #f8f9fa;
      --gray: #adb5bd;
      --danger: #e63946;
      --info: #457b9d;
      --gradient: linear-gradient(135deg, var(--primary), var(--primary-light));
      --shadow-sm: 0 2px 10px rgba(0,0,0,0.05);
      --shadow: 0 10px 30px rgba(0,0,0,0.1);
      --shadow-lg: 0 20px 40px rgba(0,0,0,0.15);
      --border-radius: 12px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: #f0f2f5;
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
      transition: var(--transition);
      padding-bottom: 70px; /* Space for mobile footer */
    }

    .container {
      display: flex;
      min-height: 100vh;
      flex-direction: column;
    }

    /* SIDEBAR */
    .sidebar {
      width: 280px;
      background: white;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      z-index: 1000;
      transition: var(--transition);
      border-right: 1px solid rgba(0,0,0,0.05);
      position: fixed;
      height: 100%;
      overflow-y: auto;
      top: 0;
      left: 0;
    }

    .sidebar-header {
      padding: 24px 24px 20px;
      background: var(--gradient);
      color: white;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .logo {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .logo span {
      color: #fff8;
    }

    .sidebar-nav {
      padding: 16px 0;
    }

    .nav-item {
      padding: 14px 24px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: var(--transition);
      border-left: 4px solid transparent;
      position: relative;
    }

    .nav-item:hover {
      background: rgba(67, 97, 238, 0.08);
    }

    .nav-item.active {
      background: rgba(67, 97, 238, 0.1);
      border-left-color: var(--primary);
      color: var(--primary);
      font-weight: 500;
    }

    .nav-icon {
      margin-right: 12px;
      font-size: 20px;
      width: 24px;
      text-align: center;
    }

    .nav-text {
      font-size: 15px;
      font-weight: 500;
    }

    /* MOBILE FOOTER NAVIGATION */
    .mobile-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      padding: 10px 0;
      z-index: 1000;
      border-top: 1px solid #eee;
    }

    .mobile-nav-item {
      flex: 1;
      text-align: center;
      padding: 8px 0;
      cursor: pointer;
      color: var(--gray);
      font-size: 12px;
    }

    .mobile-nav-item.active {
      color: var(--primary);
    }

    .mobile-nav-icon {
      font-size: 20px;
      margin-bottom: 4px;
      display: block;
    }

    @media (max-width: 992px) {
      .mobile-nav {
        display: flex;
      }
      
      .sidebar {
        transform: translateX(-100%);
        position: fixed;
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
      }
    }

    /* MAIN CONTENT */
    .main-content {
      flex: 1;
      margin-left: 280px;
      transition: var(--transition);
      min-height: 100vh;
    }

    .header {
      background: white;
      box-shadow: var(--shadow-sm);
      padding: 16px 20px;
      position: sticky;
      top: 0;
      z-index: 900;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
    }

    .welcome {
      font-size: 16px;
      font-weight: 600;
      color: var(--dark);
      max-width: 70%;
    }

    .welcome span {
      color: var(--primary);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 14px;
    }

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      top: 50px;
      background: white;
      min-width: 200px;
      box-shadow: var(--shadow-lg);
      border-radius: var(--border-radius);
      overflow: hidden;
      z-index: 1000;
      animation: slideDown 0.3s ease;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .dropdown-item {
      padding: 14px 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 1px solid #eee;
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    .dropdown-item:hover {
      background: rgba(67, 97, 238, 0.08);
      color: var(--primary);
    }

    .dropdown-icon {
      font-size: 18px;
      width: 24px;
      text-align: center;
    }

    /* DASHBOARD */
    .dashboard {
      padding: 20px;
    }

    .page-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--dark);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .page-title i {
      color: var(--primary);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: white;
      border-radius: var(--border-radius);
      padding: 16px;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      border-top: 4px solid var(--primary);
      text-align: center;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow);
    }

    .stat-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 10px;
      font-size: 18px;
      color: white;
    }

    .stat-icon.blue {
      background: var(--primary);
    }

    .stat-icon.green {
      background: #2a9d8f;
    }

    .stat-icon.orange {
      background: #e9c46a;
    }

    .stat-icon.purple {
      background: #8338ec;
    }

    .stat-title {
      font-size: 13px;
      color: var(--gray);
      margin-bottom: 6px;
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--dark);
    }

    .homework-section {
      background: white;
      border-radius: var(--border-radius);
      padding: 18px;
      box-shadow: var(--shadow-sm);
      margin-bottom: 20px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark);
    }

    .view-all {
      color: var(--primary);
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      transition: var(--transition);
    }

    .view-all:hover {
      color: var(--primary-light);
    }

    .homework-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .homework-card {
      border: 1px solid #e9ecef;
      border-radius: var(--border-radius);
      padding: 14px;
      transition: var(--transition);
      cursor: pointer;
    }

    .homework-card:hover {
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    .hw-subject {
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 15px;
    }

    .hw-subject i {
      color: var(--primary);
    }

    .hw-desc {
      color: var(--gray);
      font-size: 13px;
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .hw-meta {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--info);
    }

    .due-soon {
      color: var(--warning) !important;
      font-weight: 500;
    }

    /* FILTER BAR */
    .filter-bar {
      display: flex;
      gap: 8px;
      padding: 12px 0;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .filter-bar::-webkit-scrollbar {
      display: none;
    }

    .filter-btn {
      background: white;
      border: 1px solid #e9ecef;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      white-space: nowrap;
      cursor: pointer;
      transition: var(--transition);
    }

    .filter-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* NOTIFICATIONS */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: var(--shadow-lg);
      z-index: 3000;
      max-width: 300px;
      transform: translateX(400px);
      opacity: 0;
      transition: all 0.4s ease;
      border-left: 4px solid var(--primary);
    }

    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }

    .notification-title {
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--dark);
    }

    .notification-message {
      font-size: 14px;
      color: var(--gray);
    }

    /* AI CHATBOX */
    .ai-chatbox {
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 320px;
      height: 400px;
      background: white;
      border-radius: 16px;
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      z-index: 2000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.4s ease;
    }

    .ai-chatbox.open {
      transform: translateY(0);
      opacity: 1;
    }

    .chat-header {
      background: var(--gradient);
      color: white;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: move;
    }

    .chat-title {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
    }

    .chat-title i {
      font-size: 18px;
    }

    .chat-controls {
      display: flex;
      gap: 8px;
    }

    .chat-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .chat-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .chat-body {
      flex: 1;
      padding: 12px;
      overflow-y: auto;
      background: #f8f9fa;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 300px;
    }

    .chat-message {
      max-width: 80%;
      padding: 10px 12px;
      border-radius: 16px;
      font-size: 14px;
      line-height: 1.4;
    }

    .message-user {
      align-self: flex-end;
      background: var(--primary);
      color: white;
      border-bottom-right-radius: 4px;
    }

    .message-ai {
      align-self: flex-start;
      background: white;
      color: var(--dark);
      border-bottom-left-radius: 4px;
      box-shadow: var(--shadow-sm);
    }

    .chat-input {
      padding: 12px 16px 12px;
      display: flex;
      gap: 8px;
      background: white;
      border-top: 1px solid #e9ecef;
    }

    .chat-input input {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      outline: none;
      font-family: inherit;
      font-size: 14px;
    }

    .chat-input input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
    }

    .send-btn {
      background: var(--primary);
      color: white;
      border: none;
      width: 36px;
      height: 36px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
    }

    .send-btn:hover {
      background: var(--primary-light);
    }

    /* AI MODE SELECTOR */
    .ai-mode-selector {
      display: flex;
      background: #f8f9fa;
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 12px;
      font-size: 13px;
    }

    .ai-mode-btn {
      flex: 1;
      text-align: center;
      padding: 6px 0;
      border-radius: 6px;
      cursor: pointer;
      transition: var(--transition);
    }

    .ai-mode-btn.active {
      background: white;
      box-shadow: var(--shadow-sm);
      font-weight: 500;
    }

    /* AI TOGGLE BUTTON */
    .ai-toggle {
      position: fixed;
      bottom: 90px;
      right: 20px;
      width: 50px;
      height: 50px;
      background: var(--gradient);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: 1999;
      transition: var(--transition);
      animation: pulse 2s infinite;
    }

    .ai-toggle:hover {
      transform: scale(1.1);
    }

    /* FOOTER */
    footer {
      text-align: center;
      padding: 16px;
      background: white;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      color: var(--gray);
      font-size: 13px;
      margin-top: 20px;
      width: 100%;
      position: fixed;
      bottom: 0;
      left: 0;
      z-index: 1000;
      border-top: 1px solid #eee;
    }

    /* ANIMATIONS */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(67, 97, 238, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(67, 97, 238, 0);
      }
    }

    .fade-in {
      animation: fadeIn 0.6s ease forwards;
    }

    .delay-1 {
      animation-delay: 0.1s;
    }

    .delay-2 {
      animation-delay: 0.2s;
    }

    .delay-3 {
      animation-delay: 0.3s;
    }

    .delay-4 {
      animation-delay: 0.4s;
    }

    /* RESPONSIVE */
    @media (max-width: 1200px) {
      .sidebar {
        width: 240px;
      }
      .main-content {
        margin-left: 240px;
      }
      .ai-chatbox, .ai-toggle {
        width: 300px;
        bottom: 90px;
        right: 15px;
      }
    }

    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      .welcome {
        font-size: 15px;
      }
      .page-title {
        font-size: 20px;
      }
      .dashboard {
        padding: 16px;
      }
    }

    @media (max-width: 576px) {
      .ai-chatbox, .ai-toggle {
        width: calc(100% - 30px);
        left: 15px;
        right: 15px;
      }
      .chat-input input {
        font-size: 13px;
      }
    }

    /* HAMBURGER */
    .hamburger {
      display: none;
      font-size: 22px;
      cursor: pointer;
      color: var(--dark);
    }

    @media (max-width: 992px) {
      .hamburger {
        display: block;
      }
    }

    /* LOADER */
    .loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 3000;
      transition: var(--transition);
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }

    .modal-content {
      background: white;
      border-radius: var(--border-radius);
      width: 90%;
      max-width: 450px;
      padding: 24px;
      box-shadow: var(--shadow-lg);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
    }

    .close-modal {
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 20px;
      cursor: pointer;
      color: var(--gray);
      transition: var(--transition);
    }

    .close-modal:hover {
      color: var(--danger);
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 16px;
      color: var(--dark);
    }

    .modal-body {
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: var(--dark);
      font-size: 14px;
    }

    .form-control {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      font-family: inherit;
      font-size: 15px;
      outline: none;
      transition: var(--transition);
    }

    .form-control:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
    }

    .btn {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-light);
    }

    .btn-block {
      width: 100%;
    }

    .btn-sm {
      padding: 8px 12px;
      font-size: 13px;
    }

    /* PROFILE MODAL */
    .profile-header {
      text-align: center;
      padding: 16px 0;
      border-bottom: 1px solid #e9ecef;
      margin-bottom: 16px;
    }

    .profile-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--gradient);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .profile-name {
      font-size: 18px;
      font-weight: 600;
      color: var(--dark);
    }

    .profile-class {
      color: var(--info);
      font-size: 14px;
    }

    /* SETTINGS */
    .settings-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .setting-item {
      padding: 14px;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .setting-label {
      font-weight: 500;
      font-size: 14px;
    }

    .toggle {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 22px;
    }

    .toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 22px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--primary);
    }

    input:checked + .slider:before {
      transform: translateX(22px);
    }

    /* ADMIN HOOK */
    .admin-hook {
      display: none;
    }

    /* BADGE FOR NOTIFICATIONS */
    .notification-badge {
      position: absolute;
      top: 4px;
      right: 4px;
      background: var(--warning);
      color: white;
      font-size: 10px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <div class="loader">
    <div class="spinner"></div>
  </div>

  <div class="container">
    <!-- SIDEBAR -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="logo">MK<span>PS</span></div>
        <div style="font-size: 11px; margin-top: 2px; opacity: 0.9;">Milli Karwaan Public School</div>
      </div>
      <div class="sidebar-nav">
        <div class="nav-item active" data-page="dashboard">
          <span class="nav-icon"><i class="material-icons-round">dashboard</i></span>
          <span class="nav-text">Dashboard</span>
        </div>
        <div class="nav-item" data-page="homework">
          <span class="nav-icon"><i class="material-icons-round">assignment</i></span>
          <span class="nav-text">Homework</span>
        </div>
        <div class="nav-item" data-page="ai-help">
          <span class="nav-icon"><i class="material-icons-round">smart_toy</i></span>
          <span class="nav-text">AI Assistant</span>
        </div>
        <div class="nav-item" data-page="profile">
          <span class="nav-icon"><i class="material-icons-round">person</i></span>
          <span class="nav-text">Profile</span>
        </div>
        <div class="nav-item" data-page="settings">
          <span class="nav-icon"><i class="material-icons-round">settings</i></span>
          <span class="nav-text">Settings</span>
        </div>
        <div class="nav-item logout-btn">
          <span class="nav-icon"><i class="material-icons-round">logout</i></span>
          <span class="nav-text">Logout</span>
        </div>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">
      <div class="header">
        <div class="hamburger">
          <i class="material-icons-round">menu</i>
        </div>
        <div class="welcome fade-in" id="welcome-text">Welcome, <span id="student-name">Aarav Sharma</span></div>
        <div class="user-info">
          <div class="avatar" id="user-avatar">AS</div>
        </div>
      </div>

      <!-- DASHBOARD PAGE -->
      <div class="dashboard" id="dashboard-page">
        <h1 class="page-title fade-in"><i class="fas fa-home"></i> Dashboard</h1>
        
        <div class="stats-grid">
          <div class="stat-card fade-in delay-1">
            <div class="stat-icon blue">
              <i class="fas fa-book"></i>
            </div>
            <div class="stat-title">Subjects</div>
            <div class="stat-value" id="total-subjects">8</div>
          </div>
          <div class="stat-card fade-in delay-2">
            <div class="stat-icon green">
              <i class="fas fa-tasks"></i>
            </div>
            <div class="stat-title">Due</div>
            <div class="stat-value" id="homework-due">2</div>
          </div>
          <div class="stat-card fade-in delay-3">
            <div class="stat-icon orange">
              <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-title">Attendance</div>
            <div class="stat-value">96%</div>
          </div>
          <div class="stat-card fade-in delay-4">
            <div class="stat-icon purple">
              <i class="fas fa-graduation-cap"></i>
            </div>
            <div class="stat-title">Grade</div>
            <div class="stat-value">A+</div>
          </div>
        </div>

        <div class="homework-section fade-in delay-1">
          <div class="section-header">
            <h2 class="section-title">Recent Homework</h2>
            <div class="view-all homework-view-all">View All</div>
          </div>
          <div class="homework-list" id="homework-list">
            <!-- Homework items will be inserted here -->
          </div>
        </div>

        <div class="homework-section fade-in delay-2">
          <div class="section-header">
            <h2 class="section-title">Upcoming Events</h2>
            <div class="view-all">View Calendar</div>
          </div>
          <div class="homework-list">
            <div class="homework-card">
              <div class="hw-subject"><i class="fas fa-microphone"></i> Annual Day Practice</div>
              <div class="hw-desc">Final rehearsal for the annual day performance. All students must attend.</div>
              <div class="hw-meta">
                <span><i class="far fa-calendar"></i> Tomorrow</span>
                <span><i class="far fa-clock"></i> 3:00 PM</span>
              </div>
            </div>
            <div class="homework-card">
              <div class="hw-subject"><i class="fas fa-flask"></i> Science Fair</div>
              <div class="hw-desc">Science exhibition for classes 6-8. Project submissions due by Friday.</div>
              <div class="hw-meta">
                <span><i class="far fa-calendar"></i> This Friday</span>
                <span><i class="far fa-clock"></i> 10:00 AM</span>
              </div>
            </div>
            <div class="homework-card">
              <div class="hw-subject"><i class="fas fa-pencil-alt"></i> Unit Test</div>
              <div class="hw-desc">Mathematics unit test covering chapters 5-7. Prepare well.</div>
              <div class="hw-meta">
                <span><i class="far fa-calendar"></i> Next Monday</span>
                <span><i class="far fa-clock"></i> 9:00 AM</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- HOMEWORK PAGE -->
      <div class="dashboard" id="homework-page" style="display: none;">
        <h1 class="page-title"><i class="fas fa-clipboard-list"></i> Homework</h1>
        <div class="filter-bar" id="homework-filters">
          <div class="filter-btn active" data-filter="all">All</div>
          <div class="filter-btn" data-filter="today">Today</div>
          <div class="filter-btn" data-filter="this-week">This Week</div>
          <div class="filter-btn" data-filter="overdue">Overdue</div>
        </div>
        <div class="homework-section">
          <div class="section-header">
            <h2 class="section-title">All Homework</h2>
          </div>
          <div class="homework-list" id="all-homework-list">
            <!-- All homework will be inserted here -->
          </div>
        </div>
      </div>

      <!-- AI HELP PAGE -->
      <div class="dashboard" id="ai-help-page" style="display: none;">
        <h1 class="page-title"><i class="fas fa-robot"></i> AI Assistant</h1>
        <div class="homework-section">
          <div class="ai-mode-selector">
            <div class="ai-mode-btn active" data-mode="homework">Homework Help</div>
            <div class="ai-mode-btn" data-mode="general">General Knowledge</div>
          </div>
          <p style="margin-bottom: 12px; color: var(--gray); font-size: 14px;">Ask any question and get instant help.</p>
          <div style="background: #f8f9fa; border-radius: 12px; padding: 16px; margin-bottom: 16px;">
            <div style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 12px; margin-bottom: 12px;">
              <div style="color: var(--gray); font-size: 13px; margin-bottom: 6px;">Try asking:</div>
              <div style="display: flex; flex-wrap: wrap; gap: 6px;">
                <span style="background: #e3f2fd; color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 12px; cursor: pointer;" class="suggestion" data-query="Explain photosynthesis">Photosynthesis</span>
                <span style="background: #e3f2fd; color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 12px; cursor: pointer;" class="suggestion" data-query="Solve 2x + 5 = 15">Solve equation</span>
                <span style="background: #e3f2fd; color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 12px; cursor: pointer;" class="suggestion" data-query="Water cycle steps">Water cycle</span>
                <span style="background: #e3f2fd; color: var(--primary); padding: 4px 8px; border-radius: 12px; font-size: 12px; cursor: pointer;" class="suggestion" data-query="Help with essay writing">Essay help</span>
              </div>
            </div>
            <div style="display: flex; gap: 8px;">
              <input type="text" id="ai-query" placeholder="Ask your question..." style="flex: 1; padding: 10px 12px; border: 1px solid #e9ecef; border-radius: 8px; font-size: 14px; outline: none;">
              <button id="ai-submit" style="background: var(--primary); color: white; border: none; padding: 0 16px; border-radius: 8px; font-weight: 500; cursor: pointer; font-size: 14px;">Ask</button>
            </div>
          </div>
          <div id="ai-response" style="background: white; border-radius: 12px; padding: 16px; min-height: 200px; box-shadow: var(--shadow-sm);">
            <div style="text-align: center; color: var(--gray); padding: 30px 0; font-size: 14px;">
              <i class="fas fa-comments" style="font-size: 36px; margin-bottom: 12px; opacity: 0.3;"></i>
              <div>Ask a question to get started</div>
            </div>
          </div>
        </div>
      </div>

      <!-- PROFILE PAGE -->
      <div class="dashboard" id="profile-page" style="display: none;">
        <h1 class="page-title"><i class="fas fa-user-circle"></i> My Profile</h1>
        <div class="homework-section">
          <div class="profile-header">
            <div class="profile-avatar" id="profile-avatar">AS</div>
            <div class="profile-name" id="profile-name">Aarav Sharma</div>
            <div class="profile-class" id="profile-class">Class: 8</div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr; gap: 16px;">
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark); font-size: 15px;">Personal Information</div>
              <div style="color: var(--gray); font-size: 13px;">
                <div style="margin-bottom: 6px;"><strong>Student ID:</strong> <span id="profile-id">STU001</span></div>
                <div style="margin-bottom: 6px;"><strong>Date of Birth:</strong> <span id="profile-dob">Jan 1, 2010</span></div>
                <div style="margin-bottom: 6px;"><strong>Gender:</strong> <span id="profile-gender">Male</span></div>
                <div><strong>Address:</strong> <span id="profile-address">Balrampur, Uttar Pradesh</span></div>
              </div>
            </div>
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark); font-size: 15px;">Parent/Guardian</div>
              <div style="color: var(--gray); font-size: 13px;">
                <div style="margin-bottom: 6px;"><strong>Name:</strong> <span id="parent-name">Rajesh Sharma</span></div>
                <div style="margin-bottom: 6px;"><strong>Phone:</strong> <span id="parent-phone">+91 XXXXXXXXXX</span></div>
                <div><strong>Email:</strong> <span id="parent-email">parent@example.com</span></div>
              </div>
            </div>
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark); font-size: 15px;">Academic Details</div>
              <div style="color: var(--gray); font-size: 13px;">
                <div style="margin-bottom: 6px;"><strong>Class:</strong> <span id="profile-academic-class">Class 8</span></div>
                <div style="margin-bottom: 6px;"><strong>Section:</strong> <span id="profile-section">A</span></div>
                <div style="margin-bottom: 6px;"><strong>Roll No:</strong> <span id="profile-roll">15</span></div>
                <div><strong>Admission Date:</strong> <span id="profile-admission">Apr 1, 2020</span></div>
              </div>
            </div>
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 8px; color: var(--dark); font-size: 15px;">Contact Information</div>
              <div style="color: var(--gray); font-size: 13px;">
                <div style="margin-bottom: 6px;"><strong>Phone:</strong> <span id="student-phone">+91 XXXXXXXXXX</span></div>
                <div><strong>Email:</strong> <span id="student-email">aarav.sharma@student.mkps.edu.in</span></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- SETTINGS PAGE -->
      <div class="dashboard" id="settings-page" style="display: none;">
        <h1 class="page-title"><i class="fas fa-cog"></i> Settings</h1>
        <div class="homework-section">
          <div class="settings-grid">
            <div class="setting-item">
              <div class="setting-label">Dark Mode</div>
              <label class="toggle">
                <input type="checkbox" id="dark-mode-toggle">
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-label">Push Notifications</div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-label">Homework Alerts</div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-label">Email Updates</div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
            <div class="setting-item">
              <div class="setting-label">Auto-Save Work</div>
              <label class="toggle">
                <input type="checkbox" checked>
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="homework-section" style="margin-top: 16px;">
          <h2 class="section-title">Account Security</h2>
          <div style="display: grid; grid-template-columns: 1fr; gap: 16px; margin-top: 12px;">
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 6px; color: var(--dark); font-size: 15px;">Change Password</div>
              <div style="color: var(--gray); font-size: 13px; margin-bottom: 12px;">Update your account password regularly.</div>
              <button id="change-password-btn" style="background: var(--primary); color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 13px; cursor: pointer;">Change Password</button>
            </div>
            <div style="padding: 14px; background: #f8f9fa; border-radius: 12px;">
              <div style="font-weight: 600; margin-bottom: 6px; color: var(--dark); font-size: 15px;">Two-Factor Auth</div>
              <div style="color: var(--gray); font-size: 13px; margin-bottom: 12px;">Add extra security to your account.</div>
              <label class="toggle" style="margin-left: auto;">
                <input type="checkbox">
                <span class="slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- AI CHATBOX -->
      <div class="ai-chatbox" id="ai-chatbox">
        <div class="chat-header" id="chat-header">
          <div class="chat-title">
            <i class="fas fa-robot"></i>
            AI Assistant
          </div>
          <div class="chat-controls">
            <div class="chat-btn minimize-btn">
              <i class="fas fa-minus"></i>
            </div>
            <div class="chat-btn close-btn">
              <i class="fas fa-times"></i>
            </div>
          </div>
        </div>
        <div class="chat-body" id="chat-body">
          <div class="chat-message message-ai">
            Hello! I'm your AI study assistant. How can I help you today? üòä
          </div>
        </div>
        <div class="chat-input">
          <input type="text" id="chat-input" placeholder="Ask me anything..." />
          <button class="send-btn" id="chat-send">
            <i class="fas fa-paper-plane"></i>
          </button>
        </div>
      </div>

      <!-- AI TOGGLE BUTTON -->
      <div class="ai-toggle" id="ai-toggle">
        <i class="fas fa-robot"></i>
      </div>

      <!-- CHANGE PASSWORD MODAL -->
      <div class="modal" id="change-password-modal">
        <div class="modal-content">
          <span class="close-modal" id="close-password-modal">&times;</span>
          <div class="modal-title">Change Password</div>
          <div class="modal-body">
            <div class="form-group">
              <label class="form-label">Current Password</label>
              <input type="password" class="form-control" id="current-password" />
            </div>
            <div class="form-group">
              <label class="form-label">New Password</label>
              <input type="password" class="form-control" id="new-password" />
            </div>
            <div class="form-group">
              <label class="form-label">Confirm New Password</label>
              <input type="password" class="form-control" id="confirm-password" />
            </div>
          </div>
          <button class="btn btn-primary btn-block" id="save-password-btn">Save Changes</button>
        </div>
      </div>

      <!-- NOTIFICATION -->
      <div class="notification" id="notification">
        <div class="notification-title">New Homework</div>
        <div class="notification-message">Mathematics assignment has been added for tomorrow.</div>
      </div>

      <!-- ADMIN HOOK -->
      <div class="admin-hook" id="admin-hook">
        <!-- This is a hidden admin access point. Do not remove. -->
      </div>
    </div>

    <!-- MOBILE NAVIGATION -->
    <div class="mobile-nav">
      <div class="mobile-nav-item active" data-page="dashboard">
        <i class="mobile-nav-icon material-icons-round">dashboard</i>
        Home
      </div>
      <div class="mobile-nav-item" data-page="homework">
        <i class="mobile-nav-icon material-icons-round">assignment</i>
        Homework
      </div>
      <div class="mobile-nav-item" data-page="ai-help">
        <i class="mobile-nav-icon material-icons-round">smart_toy</i>
        AI
      </div>
      <div class="mobile-nav-item" data-page="profile">
        <i class="mobile-nav-icon material-icons-round">person</i>
        Profile
      </div>
      <div class="mobile-nav-item" data-page="settings">
        <i class="mobile-nav-icon material-icons-round">settings</i>
        Settings
      </div>
    </div>

    <footer>
      ¬© 2025 Milli Karwaan Public School, Balrampur. All Rights Reserved.
    </footer>

    <script>
      // Mock data for homework by class
      const homeworkData = {
        'Class 1': [
          { subject: 'Mathematics', description: 'Count numbers from 1 to 100 and write them in notebook.', due: 'Tomorrow', emoji: 'üî¢', filter: 'today' },
          { subject: 'English', description: 'Learn to write alphabets A to Z in capital and small letters.', due: 'Tomorrow', emoji: 'üî§', filter: 'today' },
          { subject: 'EVS', description: 'Draw pictures of animals you see around your home.', due: 'This Friday', emoji: 'üêò', filter: 'this-week' },
          { subject: 'Hindi', description: 'Practice writing vowels (‡§∏‡•ç‡§µ‡§∞) - ‡§Ö, ‡§Ü, ‡§á, ‡§à, ‡§â, ‡§ä', due: 'Next Monday', emoji: 'üáÆüá≥', filter: 'this-week' }
        ],
        'Class 2': [
          { subject: 'Mathematics', description: 'Solve addition and subtraction problems up to 100.', due: 'Tomorrow', emoji: '‚ûï', filter: 'today' },
          { subject: 'English', description: 'Write 5 sentences about your family using simple present tense.', due: 'Tomorrow', emoji: 'üë®‚Äçüë©‚Äçüëß', filter: 'today' },
          { subject: 'EVS', description: 'List 10 plants and trees you see in your neighborhood.', due: 'This Friday', emoji: 'üå≥', filter: 'this-week' },
          { subject: 'Hindi', description: 'Write a short story (5 sentences) using words: ‡§ò‡§∞, ‡§™‡•á‡§°‡§º, ‡§®‡§¶‡•Ä, ‡§™‡§ï‡•ç‡§∑‡•Ä, ‡§´‡•Ç‡§≤', due: 'Next Monday', emoji: 'üìñ', filter: 'this-week' },
          { subject: 'Art', description: 'Create a collage using colored paper cuttings of different shapes.', due: 'Next Wednesday', emoji: 'üé®', filter: 'this-week' }
        ],
        'Class 3': [
          { subject: 'Mathematics', description: 'Learn multiplication tables from 2 to 10. Practice 10 problems for each.', due: 'Tomorrow', emoji: '‚úñÔ∏è', filter: 'today' },
          { subject: 'English', description: 'Write a paragraph about your favorite festival (8-10 sentences).', due: 'Tomorrow', emoji: 'üéâ', filter: 'today' },
          { subject: 'Science', description: 'Observe the life cycle of a butterfly or frog and draw it in your notebook.', due: 'This Friday', emoji: 'ü¶ã', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Draw a map of India and label all states and union territories.', due: 'Next Monday', emoji: 'üó∫Ô∏è', filter: 'this-week' },
          { subject: 'Hindi', description: 'Translate the English paragraph about your favorite festival into Hindi.', due: 'Next Wednesday', emoji: '<translation>', filter: 'this-week' }
        ],
        'Class 4': [
          { subject: 'Mathematics', description: 'Solve word problems involving addition, subtraction, multiplication, and division.', due: 'Tomorrow', emoji: 'üßÆ', filter: 'today' },
          { subject: 'English', description: 'Read a story from your textbook and write a summary in 10 sentences.', due: 'Tomorrow', emoji: 'üìö', filter: 'today' },
          { subject: 'Science', description: 'Collect 5 different types of leaves and paste them in your scrapbook with names.', due: 'This Friday', emoji: 'üçÉ', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Research and write about the major rivers of India (5 rivers, 5 points each).', due: 'Next Monday', emoji: 'üåä', filter: 'this-week' },
          { subject: 'Computer', description: 'Practice typing 100 words on the computer without looking at the keyboard.', due: 'Next Wednesday', emoji: '‚å®Ô∏è', filter: 'this-week' }
        ],
        'Class 5': [
          { subject: 'Mathematics', description: 'Learn to calculate area and perimeter of rectangles and squares. Solve 10 problems.', due: 'Tomorrow', emoji: 'üìê', filter: 'today' },
          { subject: 'English', description: 'Write a letter to your friend describing your summer vacation.', due: 'Tomorrow', emoji: '‚úâÔ∏è', filter: 'today' },
          { subject: 'Science', description: 'Create a model of the solar system using clay or paper mache.', due: 'This Friday', emoji: 'ü™ê', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Prepare a presentation on "Famous Monuments of India" (10 slides minimum).', due: 'Next Monday', emoji: 'üèõÔ∏è', filter: 'this-week' },
          { subject: 'Hindi', description: 'Write a poem in Hindi about nature (12 lines minimum) with rhyming words.', due: 'Next Wednesday', emoji: 'üåø', filter: 'this-week' }
        ],
        'Class 6': [
          { subject: 'Mathematics', description: 'Solve problems on fractions and decimals. Convert fractions to decimals and vice versa.', due: 'Tomorrow', emoji: '‚ûó', filter: 'today' },
          { subject: 'English', description: 'Analyze the character of the protagonist in the novel you are reading.', due: 'Tomorrow', emoji: 'üë§', filter: 'today' },
          { subject: 'Science', description: 'Conduct an experiment to show how plants absorb water. Document your observations.', due: 'This Friday', emoji: 'üî¨', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Create a timeline of major events in Indian history from 1857 to 1947.', due: 'Next Monday', emoji: 'üï∞Ô∏è', filter: 'this-week' },
          { subject: 'Computer', description: 'Create a PowerPoint presentation on "Importance of Computers in Education".', due: 'Next Wednesday', emoji: 'üíª', filter: 'this-week' }
        ],
        'Class 7': [
          { subject: 'Mathematics', description: 'Learn and practice algebraic expressions and simple equations.', due: 'Tomorrow', emoji: 'üß©', filter: 'today' },
          { subject: 'English', description: 'Write a debate speech on "Social media: Boon or Bane" (300 words).', due: 'Tomorrow', emoji: 'üó£Ô∏è', filter: 'today' },
          { subject: 'Science', description: 'Study the human digestive system and create a labeled diagram.', due: 'This Friday', emoji: 'üî¨', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Research and write about the different types of government systems around the world.', due: 'Next Monday', emoji: 'üåç', filter: 'this-week' },
          { subject: 'Hindi', description: 'Write a formal letter to the principal requesting a school trip to a historical site.', due: 'Next Wednesday', emoji: 'üìù', filter: 'this-week' }
        ],
        'Class 8': [
          { subject: 'Mathematics', description: 'Solve problems on linear equations in one variable. Create 5 word problems.', due: 'Tomorrow', emoji: 'üìä', filter: 'today' },
          { subject: 'English', description: 'Write a review of a movie or book you recently watched/read (400 words).', due: 'Tomorrow', emoji: 'üé¨', filter: 'today' },
          { subject: 'Science', description: 'Prepare a detailed project on "Renewable and Non-renewable Resources".', due: 'This Friday', emoji: '‚ö°', filter: 'this-week' },
          { subject: 'Social Studies', description: 'Analyze the causes and effects of the Industrial Revolution in Europe.', due: 'Next Monday', emoji: 'üè≠', filter: 'this-week' },
          { subject: 'Computer', description: 'Learn basic HTML and create a simple webpage about your school.', due: 'Next Wednesday', emoji: 'üåê', filter: 'this-week' }
        ]
      };

      // Student data (normally from localStorage after login)
      let studentData = {
        name: 'Aarav Sharma',
        class: 'Class 8',
        parent: 'Rajesh Sharma',
        phone: '+91 9876543210',
        email: 'aarav.sharma@student.mkps.edu.in',
        dob: '15 Mar 2010',
        gender: 'Male',
        address: '123 Education Lane, Balrampur, Uttar Pradesh 271201',
        studentId: 'MKPS8001',
        admissionDate: '01 Apr 2020',
        section: 'A',
        rollNo: '15'
      };

      // Current AI mode
      let aiMode = 'homework'; // 'homework' or 'general'
      let apiKey1 = 'AIzaSyCqGS8gb5kh7Jr0pv8d84LxCLhgHU-O_VU';
      let apiKey2 = 'AIzaSyCdzFBQ1KVgBfmmjSgHJJwcuLbqne9VjUs';

      // Load student data from localStorage if available
      function loadStudentData() {
        try {
          const savedData = localStorage.getItem('mkps_student');
          if (savedData) {
            studentData = JSON.parse(savedData);
          }
        } catch (e) {
          console.warn('Could not load student data from localStorage', e);
        }
        
        // Update UI with student data
        updateStudentUI();
      }

      function updateStudentUI() {
        // Update welcome message
        document.getElementById('student-name').textContent = studentData.name;
        document.getElementById('welcome-text').innerHTML = `Welcome, <span id="student-name">${studentData.name}</span>`;
        
        // Update avatar
        const initials = studentData.name.split(' ').map(n => n[0]).join('');
        document.getElementById('user-avatar').textContent = initials;
        document.getElementById('profile-avatar').textContent = initials;
        
        // Update profile page
        document.getElementById('profile-name').textContent = studentData.name;
        document.getElementById('profile-class').textContent = `Class: ${studentData.class}`;
        document.getElementById('profile-academic-class').textContent = studentData.class;
        document.getElementById('parent-name').textContent = studentData.parent;
        document.getElementById('parent-phone').textContent = studentData.phone;
        document.getElementById('parent-email').textContent = studentData.email || 'parent@example.com';
        document.getElementById('student-phone').textContent = studentData.phone;
        document.getElementById('student-email').textContent = studentData.email;
        document.getElementById('profile-id').textContent = studentData.studentId;
        document.getElementById('profile-dob').textContent = studentData.dob;
        document.getElementById('profile-gender').textContent = studentData.gender;
        document.getElementById('profile-address').textContent = studentData.address;
        document.getElementById('profile-section').textContent = studentData.section;
        document.getElementById('profile-roll').textContent = studentData.rollNo;
        document.getElementById('profile-admission').textContent = studentData.admissionDate;
        
        // Set homework based on class
        const classHomework = homeworkData[studentData.class] || homeworkData['Class 8'];
        displayHomework(classHomework);
        
        // Show notification
        setTimeout(showNotification, 1500);
      }

      function showNotification() {
        const notification = document.getElementById('notification');
        notification.classList.add('show');
        
        setTimeout(() => {
          notification.classList.remove('show');
        }, 5000);
      }

      function displayHomework(homeworkList) {
        const homeworkListEl = document.getElementById('homework-list');
        const allHomeworkListEl = document.getElementById('all-homework-list');
        
        homeworkListEl.innerHTML = '';
        allHomeworkListEl.innerHTML = '';
        
        // Show first 3 for dashboard
        const dashboardHomework = homeworkList.slice(0, 3);
        const dueCount = dashboardHomework.filter(h => h.due === 'Tomorrow').length;
        document.getElementById('homework-due').textContent = dueCount;
        
        dashboardHomework.forEach(hw => {
          const hwEl = createHomeworkElement(hw);
          homeworkListEl.appendChild(hwEl);
        });
        
        // Show all for homework page
        homeworkList.forEach(hw => {
          const hwEl = createHomeworkElement(hw);
          allHomeworkListEl.appendChild(hwEl);
        });
        
        // Setup filters
        setupHomeworkFilters(homeworkList);
      }

      function createHomeworkElement(hw) {
        const hwCard = document.createElement('div');
        hwCard.className = 'homework-card';
        
        const dueClass = hw.due === 'Tomorrow' ? 'due-soon' : '';
        
        hwCard.innerHTML = `
          <div class="hw-subject"><i class="fas fa-book-open"></i> ${hw.subject} ${hw.emoji}</div>
          <div class="hw-desc">${hw.description}</div>
          <div class="hw-meta">
            <span><i class="far fa-calendar"></i> ${hw.due}</span>
            <span class="${dueClass}"><i class="far fa-clock"></i> Due</span>
          </div>
        `;
        
        return hwCard;
      }

      function setupHomeworkFilters(homeworkList) {
        const filterButtons = document.querySelectorAll('#homework-filters .filter-btn');
        
        filterButtons.forEach(button => {
          button.addEventListener('click', () => {
            // Remove active class from all buttons
            filterButtons.forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            button.classList.add('active');
            
            const filter = button.getAttribute('data-filter');
            
            // Filter homework
            const filteredHomework = filter === 'all' ? 
              homeworkList : 
              homeworkList.filter(hw => hw.filter === filter);
            
            // Update homework list
            const allHomeworkListEl = document.getElementById('all-homework-list');
            allHomeworkListEl.innerHTML = '';
            
            filteredHomework.forEach(hw => {
              const hwEl = createHomeworkElement(hw);
              allHomeworkListEl.appendChild(hwEl);
            });
          });
        });
      }

      // Navigation
      function setupNavigation() {
        const navItems = document.querySelectorAll('.nav-item');
        const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
        const pages = ['dashboard', 'homework', 'ai-help', 'profile', 'settings'];
        
        // Desktop navigation
        navItems.forEach(item => {
          item.addEventListener('click', () => {
            const page = item.getAttribute('data-page');
            if (page) {
              showPage(page);
            } else if (item.classList.contains('logout-btn')) {
              logout();
            }
          });
        });
        
        // Mobile navigation
        mobileNavItems.forEach(item => {
          item.addEventListener('click', () => {
            const page = item.getAttribute('data-page');
            showPage(page);
            
            // Update active class
            mobileNavItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');
          });
        });
        
        // View all homework
        document.querySelector('.homework-view-all').addEventListener('click', () => {
          showPage('homework');
          mobileNavItems.forEach(i => i.classList.remove('active'));
          document.querySelector('.mobile-nav-item[data-page="homework"]').classList.add('active');
        });
      }

      function showPage(page) {
        const pages = ['dashboard', 'homework', 'ai-help', 'profile', 'settings'];
        pages.forEach(p => {
          document.getElementById(`${p}-page`).style.display = p === page ? 'block' : 'none';
        });
        
        // Update active nav item
        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
          if (item.getAttribute('data-page') === page) {
            item.classList.add('active');
          }
        });
      }

      function logout() {
        if (confirm('Are you sure you want to logout?')) {
          // Clear any session data
          localStorage.removeItem('mkps_student');
          
          // Redirect to login page
          window.location.href = 'index.html';
        }
      }

      // AI Chatbox functionality
      function setupAIChatbox() {
        const chatbox = document.getElementById('ai-chatbox');
        const toggleBtn = document.getElementById('ai-toggle');
        const closeBtn = document.getElementById('chat-close');
        const minimizeBtn = document.getElementById('chat-minimize');
        const chatSend = document.getElementById('chat-send');
        const chatInput = document.getElementById('chat-input');
        const chatBody = document.getElementById('chat-body');
        
        // Toggle chatbox
        toggleBtn.addEventListener('click', () => {
          chatbox.classList.toggle('open');
          if (chatbox.classList.contains('open')) {
            toggleBtn.style.display = 'none';
          }
        });
        
        // Close chatbox
        document.querySelector('.close-btn').addEventListener('click', () => {
          chatbox.classList.remove('open');
          setTimeout(() => {
            document.getElementById('ai-toggle').style.display = 'flex';
          }, 300);
        });
        
        // Minimize chatbox
        document.querySelector('.minimize-btn').addEventListener('click', () => {
          chatbox.style.height = chatbox.style.height === '300px' ? '400px' : '300px';
        });
        
        // Send message
        chatSend.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            sendMessage();
          }
        });
        
        function sendMessage() {
          const message = chatInput.value.trim();
          if (!message) return;
          
          // Add user message
          addMessage(message, 'user');
          chatInput.value = '';
          
          // Simulate AI response
          setTimeout(() => {
            const response = getAIResponse(message);
            addMessage(response, 'ai');
          }, 1000);
        }
        
        function addMessage(text, sender) {
          const messageEl = document.createElement('div');
          messageEl.className = `chat-message message-${sender}`;
          messageEl.textContent = text;
          chatBody.appendChild(messageEl);
          chatBody.scrollTop = chatBody.scrollHeight;
        }
        
        function getAIResponse(query) {
          const lowerQuery = query.toLowerCase();
          
          if (aiMode === 'homework') {
            if (lowerQuery.includes('hello') || lowerQuery.includes('hi') || lowerQuery.includes('hey')) {
              return "Hello! üëã I'm your homework assistant. I can help you with your assignments. What subject do you need help with?";
            } else if (lowerQuery.includes('math') || lowerQuery.includes('calculate') || lowerQuery.includes('solve')) {
              return "I can help with math problems! üßÆ Please share the specific problem you're working on, and I'll guide you through the solution step by step.";
            } else if (lowerQuery.includes('science') || lowerQuery.includes('experiment') || lowerQuery.includes('biology') || lowerQuery.includes('chemistry')) {
              return "I'm here to help with science homework! üî¨ What specific concept or experiment are you working on? I can explain it clearly.";
            } else if (lowerQuery.includes('english') || lowerQuery.includes('writing') || lowerQuery.includes('essay')) {
              return "Need help with English homework? üìñ I can assist with grammar, writing, or literature analysis. Tell me what you're working on!";
            } else if (lowerQuery.includes('social') || lowerQuery.includes('history') || lowerQuery.includes('geography')) {
              return "I can help with social studies homework! üåç What historical event or geographical concept are you studying?";
            } else {
              return "I'm your homework assistant! üìö I can help with Math, Science, English, and Social Studies. Please tell me which subject and what specific problem you're working on.";
            }
          } else {
            if (lowerQuery.includes('hello') || lowerQuery.includes('hi') || lowerQuery.includes('hey')) {
              return "Hello! üëã I'm your general knowledge assistant. I can answer questions about science, history, technology, and more!";
            } else if (lowerQuery.includes('science') || lowerQuery.includes('physics') || lowerQuery.includes('chemistry') || lowerQuery.includes('biology')) {
              return "Science is fascinating! üî¨ I can explain scientific concepts, discoveries, and principles. What would you like to know about?";
            } else if (lowerQuery.includes('history') || lowerQuery.includes('past') || lowerQuery.includes('ancient')) {
              return "History is full of amazing stories! üï∞Ô∏è I can tell you about civilizations, wars, inventions, and important figures from the past. What period interests you?";
            } else if (lowerQuery.includes('technology') || lowerQuery.includes('computer') || lowerQuery.includes('ai') || lowerQuery.includes('robot')) {
              return "Technology is changing our world! üíª I can explain how computers work, what AI is, and how technology impacts our lives. What would you like to know?";
            } else if (lowerQuery.includes('space') || lowerQuery.includes('universe') || lowerQuery.includes('planet') || lowerQuery.includes('star')) {
              return "Space is incredible! üåå I can tell you about planets, stars, galaxies, and space exploration. The universe is full of wonders to discover!";
            } else {
              return "I'm here to answer your questions about the world! üåç I can help with science, history, technology, space, and many other topics. What would you like to learn about?";
            }
          }
        }
      }

      // AI Help Page functionality
      function setupAIHelp() {
        const aiSubmit = document.getElementById('ai-submit');
        const aiQuery = document.getElementById('ai-query');
        const aiResponse = document.getElementById('ai-response');
        const suggestions = document.querySelectorAll('.suggestion');
        const modeButtons = document.querySelectorAll('.ai-mode-btn');
        
        // AI mode selection
        modeButtons.forEach(button => {
          button.addEventListener('click', () => {
            modeButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            aiMode = button.getAttribute('data-mode');
          });
        });
        
        aiSubmit.addEventListener('click', processAIQuery);
        aiQuery.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            processAIQuery();
          }
        });
        
        suggestions.forEach(suggestion => {
          suggestion.addEventListener('click', () => {
            aiQuery.value = suggestion.getAttribute('data-query');
            processAIQuery();
          });
        });
        
        function processAIQuery() {
          const query = aiQuery.value.trim();
          if (!query) return;
          
          // Show loading state
          aiResponse.innerHTML = '<div style="text-align: center; color: var(--info);"><i class="fas fa-spinner fa-spin"></i> Thinking...</div>';
          
          // Simulate API call delay
          setTimeout(() => {
            const response = getAIResponse(query);
            aiResponse.innerHTML = `
              <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 12px;">
                <div style="font-weight: 600; margin-bottom: 6px; color: var(--dark); font-size: 14px;">Your Question:</div>
                <div style="color: var(--gray); font-size: 14px;">${query}</div>
              </div>
              <div style="background: white; padding: 12px; border-radius: 8px;">
                <div style="font-weight: 600; margin-bottom: 6px; color: var(--dark); font-size: 14px;">AI Response:</div>
                <div style="color: var(--gray); line-height: 1.5; font-size: 14px;">${response}</div>
              </div>
            `;
          }, 1500);
        }
        
        function getAIResponse(query) {
          const lowerQuery = query.toLowerCase();
          
          if (aiMode === 'homework') {
            if (lowerQuery.includes('photosynthesis')) {
              return "Photosynthesis is the process by which green plants make their own food using sunlight, carbon dioxide, and water. üåø The plant's leaves absorb sunlight and take in carbon dioxide from the air, while roots absorb water from the soil. Using the energy from sunlight, the plant converts these into glucose (a type of sugar) and releases oxygen as a byproduct. This process happens in the chloroplasts of plant cells, which contain a green pigment called chlorophyll.";
            } else if (lowerQuery.includes('quadratic') || lowerQuery.includes('equation')) {
              return "To solve a quadratic equation in the form ax¬≤ + bx + c = 0, you can use several methods: üßÆ\n\n1. **Factoring**: Find two numbers that multiply to 'a√óc' and add to 'b'.\n2. **Completing the square**: Rewrite the equation in the form (x + p)¬≤ = q.\n3. **Quadratic formula**: Use x = (-b ¬± ‚àö(b¬≤ - 4ac)) / (2a)\n\nThe discriminant (b¬≤ - 4ac) tells you about the nature of roots:\n- If > 0: Two real and different roots\n- If = 0: One real root (repeated)\n- If < 0: Two complex roots";
            } else if (lowerQuery.includes('water cycle')) {
              return "The water cycle describes how water moves around our planet. üíß It has four main stages:\n\n1. **Evaporation**: Sun heats water from oceans, lakes, and rivers, turning it into water vapor that rises into the air.\n2. **Condensation**: As water vapor rises and cools, it forms clouds (tiny water droplets).\n3. **Precipitation**: When cloud droplets combine and grow heavy, they fall as rain, snow, sleet, or hail.\n4. **Collection**: Water collects in oceans, lakes, rivers, or soaks into the ground (groundwater).";
            } else if (lowerQuery.includes('math') || lowerQuery.includes('homework')) {
              return "I'd be happy to help with your math homework! üìê Please tell me:\n\n1. What specific problem are you working on?\n2. What grade are you in?\n3. Have you tried solving it? Where are you stuck?\n\nI'll guide you through the solution step by step.";
            } else {
              return "I'm here to help with your homework! üìö I can assist with Math, Science, English, and Social Studies. Please tell me which subject and what specific problem you're working on, and I'll provide a detailed explanation.";
            }
          } else {
            if (lowerQuery.includes('ai') || lowerQuery.includes('artificial intelligence')) {
              return "Artificial Intelligence (AI) is a branch of computer science that aims to create software or machines that exhibit human-like intelligence. ü§ñ This includes learning from experience, understanding natural language, solving problems, recognizing patterns, and making decisions. AI is used in many applications like virtual assistants, recommendation systems, autonomous vehicles, and medical diagnosis.";
            } else if (lowerQuery.includes('climate') || lowerQuery.includes('change') || lowerQuery.includes('global warming')) {
              return "Climate change refers to long-term shifts in temperatures and weather patterns. üå°Ô∏è Human activities, especially burning fossil fuels like coal, oil, and gas, have been the main driver of climate change through the emission of greenhouse gases. This leads to rising temperatures, melting ice caps, sea level rise, and more extreme weather events. We can help by reducing emissions, using renewable energy, and protecting forests.";
            } else if (lowerQuery.includes('internet') || lowerQuery.includes('how internet works')) {
              return "The internet is a global network of computers connected through cables, satellites, and wireless connections. üåê When you access a website, your device sends a request through your internet service provider to servers that host the website's data. This data travels through routers and switches across the world using standardized protocols (like TCP/IP) to reach your device and display the website. It's like a digital postal system for information.";
            } else if (lowerQuery.includes('solar system') || lowerQuery.includes('planets')) {
              return "Our solar system consists of the Sun and everything bound to it by gravity. üåû This includes 8 planets (Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune), dwarf planets like Pluto, moons, asteroids, comets, and interplanetary dust. The Sun contains 99.8% of the solar system's mass. Earth is the only planet known to support life, located in the 'habitable zone' where liquid water can exist.";
            } else {
              return "I'm here to answer your questions about the world! üåç I can provide information on science, technology, history, space, and many other topics. What would you like to learn about? Just ask me a specific question!";
            }
          }
        }
      }

      // Settings functionality
      function setupSettings() {
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const changePasswordBtn = document.getElementById('change-password-btn');
        const closePasswordModal = document.getElementById('close-password-modal');
        const changePasswordModal = document.getElementById('change-password-modal');
        const savePasswordBtn = document.getElementById('save-password-btn');
        
        // Dark mode toggle
        darkModeToggle.addEventListener('change', () => {
          if (darkModeToggle.checked) {
            document.body.style.setProperty('--dark', '#f8f9fa');
            document.body.style.setProperty('--light', '#1a1a1a');
            document.body.style.setProperty('--gray', '#6c757d');
            document.body.style.backgroundColor = '#1a1a1a';
          } else {
            document.body.style.setProperty('--dark', '#1d3557');
            document.body.style.setProperty('--light', '#f8f9fa');
            document.body.style.setProperty('--gray', '#adb5bd');
            document.body.style.backgroundColor = '#f0f2f5';
          }
        });
        
        // Change password button
        changePasswordBtn.addEventListener('click', () => {
          changePasswordModal.style.display = 'flex';
        });
        
        // Close password modal
        closePasswordModal.addEventListener('click', () => {
          changePasswordModal.style.display = 'none';
        });
        
        // Close modal when clicking outside
        changePasswordModal.addEventListener('click', (e) => {
          if (e.target === changePasswordModal) {
            changePasswordModal.style.display = 'none';
          }
        });
        
        // Save password
        savePasswordBtn.addEventListener('click', () => {
          const current = document.getElementById('current-password').value;
          const newPass = document.getElementById('new-password').value;
          const confirm = document.getElementById('confirm-password').value;
          
          if (!current || !newPass || !confirm) {
            alert('Please fill in all fields');
            return;
          }
          
          if (newPass !== confirm) {
            alert('New passwords do not match');
            return;
          }
          
          if (newPass.length < 6) {
            alert('Password must be at least 6 characters long');
            return;
          }
          
          // In a real app, this would send to a server
          alert('Password changed successfully!');
          changePasswordModal.style.display = 'none';
          
          // Clear fields
          document.getElementById('current-password').value = '';
          document.getElementById('new-password').value = '';
          document.getElementById('confirm-password').value = '';
        });
      }

      // Mobile menu
      function setupMobileMenu() {
        const hamburger = document.querySelector('.hamburger');
        const sidebar = document.querySelector('.sidebar');
        
        hamburger.addEventListener('click', () => {
          sidebar.classList.toggle('open');
        });
        
        // Close sidebar when clicking on nav items (mobile)
        document.querySelectorAll('.nav-item').forEach(item => {
          item.addEventListener('click', () => {
            if (window.innerWidth <= 992) {
              sidebar.classList.remove('open');
            }
          });
        });
      }

      // Admin access detection
      function setupAdminHook() {
        // This is a hidden admin access point
        // In a real application, this would be more secure
        document.addEventListener('keydown', (e) => {
          if (e.ctrlKey && e.shiftKey && e.key === 'M') {
            // Admin access - in a real app, this would require authentication
            alert('Admin mode activated. In a real application, this would provide administrative controls.');
            // Here you could enable admin features
          }
        });
      }

      // Initialize the dashboard
      function initDashboard() {
        // Simulate loading
        setTimeout(() => {
          document.querySelector('.loader').style.opacity = '0';
          setTimeout(() => {
            document.querySelector('.loader').style.display = 'none';
          }, 300);
          
          // Load student data and initialize
          loadStudentData();
          setupNavigation();
          setupAIChatbox();
          setupAIHelp();
          setupSettings();
          setupMobileMenu();
          setupAdminHook();
          
          // Show dashboard by default
          showPage('dashboard');
          
        }, 1000);
      }

      // Initialize when page loads
      document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
  </body>
</html>
