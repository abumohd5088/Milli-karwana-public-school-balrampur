<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="theme-color" content="#0d6efd"/>
    <meta name="description" content="Student Dashboard - Homework, AI Assistant, and Progress Tracking"/>
    <title>üìö Student Dashboard | School Web #1</title>
    <link rel="manifest" href="application/json;base64,ewogICJuYW1lIjogIlNjaG9vbCBXZWIgIzEiLAogICJzaG9ydF9uYW1lIjogIlNjaG9vbFdlYiIsCiAgInN0YXJ0X3VybCI6ICIuLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzBkNmVmZCIsCiAgInRoZW1lX2NvbG9yIjogIiMwZDZlZmQiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFh4U0lVZ01BQUFBQUFBQUFDa1pBQUFBQUNBQVFBQUFBQUFBQUJBUUFBQUFDL2NBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFB......" 
    <style>
        :root {
            --p: #0d6efd;
            --s: #6c757d;
            --l: #f8f9fa;
            --d: #212529;
            --a: #ffc107;
            --bg: #fff;
            --card: #f1f3f5;
            --border: #dee2e6;
            --success: #198754;
            --danger: #dc3545;
            --warning: #fd7e14;
            --info: #0dcaf0;
            --dark: #212529;
            --light: #f8f9fa;
            --font: 'Poppins', sans-serif;
            --transition: all 0.3s ease;
            --shadow: 0 4px 12px rgba(0,0,0,.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,.15);
            --radius: 12px;
            --radius-sm: 8px;
            --radius-lg: 16px;
            --padding: 1rem;
            --margin: 1rem;
            --font-size-sm: 0.875rem;
            --font-size-base: 1rem;
            --font-size-lg: 1.25rem;
            --font-size-xl: 1.5rem;
            --font-size-2xl: 2rem;
            --font-weight-light: 300;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-bold: 700;
            --font-weight-extrabold: 800;
            --line-height-sm: 1.25;
            --line-height-base: 1.5;
            --line-height-lg: 2;
            --z-index-navbar: 1000;
            --z-index-dropdown: 1000;
            --z-index-sticky: 1020;
            --z-index-modal-backdrop: 1040;
            --z-index-modal: 1050;
            --z-index-popover: 1060;
            --z-index-tooltip: 1070;
            --z-index-fab: 1080;
            --z-index-toast: 1090;
        }

        [data-theme="dark"] {
            --bg: #121212;
            --card: #1e1e1e;
            --border: #333;
            --d: #e0e0e0;
            --l: #2d2d2d;
            --shadow: 0 4px 12px rgba(0,0,0,.3);
            --shadow-lg: 0 8px 24px rgba(0,0,0,.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font);
            transition: background-color var(--transition), color var(--transition), border-color var(--transition);
        }

        body {
            background: var(--bg);
            color: var(--d);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: var(--line-height-base);
        }

        a {
            color: var(--p);
            text-decoration: none;
        }

        a:hover {
            color: var(--p);
            text-decoration: underline;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: var(--radius-sm);
            background: var(--p);
            color: white;
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background: #0b5ed7;
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--d);
        }

        .btn-outline:hover {
            background: var(--l);
            border-color: var(--p);
            color: var(--p);
        }

        .btn-sm {
            padding: 0.25rem 0.5rem;
            font-size: var(--font-size-sm);
        }

        .btn-lg {
            padding: 0.75rem 1.5rem;
            font-size: var(--font-size-lg);
        }

        .btn-primary {
            background: var(--p);
            color: white;
        }

        .btn-primary:hover {
            background: #0b5ed7;
        }

        .btn-secondary {
            background: var(--s);
            color: white;
        }

        .btn-secondary:hover {
            background: #5c636a;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #177a48;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background: #e57000;
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        .btn-info:hover {
            background: #0ca6f0;
        }

        .btn-dark {
            background: var(--dark);
            color: white;
        }

        .btn-dark:hover {
            background: #1a1e21;
        }

        .btn-light {
            background: var(--light);
            color: var(--d);
        }

        .btn-light:hover {
            background: #f0f0f0;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
        }

        .btn-icon svg {
            width: 1.25rem;
            height: 1.25rem;
        }

        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: var(--padding);
            box-shadow: var(--shadow);
            margin-bottom: var(--margin);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card-header {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .card-body {
            flex: 1;
        }

        .card-footer {
            margin-top: 1rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--border);
            font-size: var(--font-size-sm);
            color: var(--s);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg);
            color: var(--d);
            font-size: var(--font-size-base);
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--p);
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
        }

        .form-control::placeholder {
            color: var(--s);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: var(--font-weight-medium);
            color: var(--d);
        }

        .form-check {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .form-check-input {
            margin-right: 0.5rem;
            accent-color: var(--p);
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: var(--bg);
            color: var(--d);
            font-size: var(--font-size-base);
            background-image: url("image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='none' stroke='%23343a40' viewBox='0 0 16 16'%3e%3cpath d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 16px 12px;
            transition: var(--transition);
        }

        .form-select:focus {
            outline: none;
            border-color: var(--p);
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
        }

        .alert {
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-bottom: 1rem;
            font-size: var(--font-size-sm);
            display: flex;
            align-items: center;
        }

        .alert-success {
            background: rgba(25, 135, 84, 0.1);
            border: 1px solid rgba(25, 135, 84, 0.2);
            color: var(--success);
        }

        .alert-danger {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.2);
            color: var(--danger);
        }

        .alert-warning {
            background: rgba(253, 126, 20, 0.1);
            border: 1px solid rgba(253, 126, 20, 0.2);
            color: var(--warning);
        }

        .alert-info {
            background: rgba(13, 202, 240, 0.1);
            border: 1px solid rgba(13, 202, 240, 0.2);
            color: var(--info);
        }

        .close-btn {
            margin-left: auto;
            background: none;
            border: none;
            font-size: 1.5rem;
            line-height: 1;
            color: inherit;
            cursor: pointer;
            padding: 0 0.5rem;
        }

        .navbar {
            background: var(--bg);
            border-bottom: 1px solid var(--border);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: var(--z-index-sticky);
            backdrop-filter: blur(10px);
        }

        .navbar-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-brand {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--p);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .navbar-brand svg {
            width: 2rem;
            height: 2rem;
        }

        .navbar-nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-link {
            color: var(--d);
            font-weight: var(--font-weight-medium);
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--p);
            background: var(--l);
        }

        .nav-link.active {
            color: var(--p);
            font-weight: var(--font-weight-bold);
        }

        .navbar-toggler {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--d);
            cursor: pointer;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            min-width: 12rem;
            padding: 0.5rem 0;
            z-index: var(--z-index-dropdown);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: var(--transition);
        }

        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: block;
            padding: 0.5rem 1rem;
            color: var(--d);
            text-decoration: none;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: var(--l);
            color: var(--p);
        }

        .dropdown-divider {
            height: 1px;
            background: var(--border);
            margin: 0.5rem 0;
        }

        .main {
            flex: 1;
            padding: 2rem 0;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .flex {
            display: flex;
            gap: 1rem;
        }

        .flex-column {
            flex-direction: column;
        }

        .flex-align-center {
            align-items: center;
        }

        .flex-justify-center {
            justify-content: center;
        }

        .flex-between {
            justify-content: space-between;
        }

        .flex-around {
            justify-content: space-around;
        }

        .text-center {
            text-align: center;
        }

        .text-right {
            text-align: right;
        }

        .text-left {
            text-align: left;
        }

        .text-primary {
            color: var(--p);
        }

        .text-secondary {
            color: var(--s);
        }

        .text-success {
            color: var(--success);
        }

        .text-danger {
            color: var(--danger);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-info {
            color: var(--info);
        }

        .text-dark {
            color: var(--dark);
        }

        .text-light {
            color: var(--light);
        }

        .text-muted {
            color: var(--s);
        }

        .fw-light {
            font-weight: var(--font-weight-light);
        }

        .fw-normal {
            font-weight: var(--font-weight-normal);
        }

        .fw-medium {
            font-weight: var(--font-weight-medium);
        }

        .fw-bold {
            font-weight: var(--font-weight-bold);
        }

        .fs-sm {
            font-size: var(--font-size-sm);
        }

        .fs-base {
            font-size: var(--font-size-base);
        }

        .fs-lg {
            font-size: var(--font-size-lg);
        }

        .fs-xl {
            font-size: var(--font-size-xl);
        }

        .fs-2xl {
            font-size: var(--font-size-2xl);
        }

        .mb-0 {
            margin-bottom: 0;
        }

        .mb-1 {
            margin-bottom: 0.25rem;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .mb-3 {
            margin-bottom: 1rem;
        }

        .mb-4 {
            margin-bottom: 1.5rem;
        }

        .mb-5 {
            margin-bottom: 3rem;
        }

        .mt-0 {
            margin-top: 0;
        }

        .mt-1 {
            margin-top: 0.25rem;
        }

        .mt-2 {
            margin-top: 0.5rem;
        }

        .mt-3 {
            margin-top: 1rem;
        }

        .mt-4 {
            margin-top: 1.5rem;
        }

        .mt-5 {
            margin-top: 3rem;
        }

        .pt-0 {
            padding-top: 0;
        }

        .pt-1 {
            padding-top: 0.25rem;
        }

        .pt-2 {
            padding-top: 0.5rem;
        }

        .pt-3 {
            padding-top: 1rem;
        }

        .pt-4 {
            padding-top: 1.5rem;
        }

        .pt-5 {
            padding-top: 3rem;
        }

        .pb-0 {
            padding-bottom: 0;
        }

        .pb-1 {
            padding-bottom: 0.25rem;
        }

        .pb-2 {
            padding-bottom: 0.5rem;
        }

        .pb-3 {
            padding-bottom: 1rem;
        }

        .pb-4 {
            padding-bottom: 1.5rem;
        }

        .pb-5 {
            padding-bottom: 3rem;
        }

        .footer {
            background: var(--card);
            border-top: 1px solid var(--border);
            padding: 2rem 0;
            margin-top: auto;
        }

        .footer-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .footer-links {
            display: flex;
            gap: 1rem;
        }

        .footer-link {
            color: var(--s);
            transition: var(--transition);
        }

        .footer-link:hover {
            color: var(--p);
        }

        .toast {
            position: fixed;
            top: 1rem;
            right: 1rem;
            max-width: 300px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            padding: 1rem;
            z-index: var(--z-index-toast);
            transform: translateX(120%);
            transition: transform 0.3s ease;
            opacity: 0;
        }

        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }

        .toast-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .toast-title {
            font-weight: var(--font-weight-bold);
            margin-right: 0.5rem;
        }

        .toast-body {
            font-size: var(--font-size-sm);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-index-modal);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-dialog {
            background: var(--bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .modal-header {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            line-height: 1;
            color: var(--d);
            cursor: pointer;
            padding: 0 0.5rem;
        }

        .modal-body {
            padding: 1rem;
            flex: 1;
        }

        .modal-footer {
            padding: 1rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: var(--z-index-modal-backdrop);
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .spinner {
            width: 2rem;
            height: 2rem;
            border: 3px solid var(--border);
            border-top: 3px solid var(--p);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            background: var(--p);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            z-index: var(--z-index-fab);
            opacity: 0;
            transform: translateY(2rem);
            transition: var(--transition);
        }

        .fab.show {
            opacity: 1;
            transform: translateY(0);
        }

        .fab:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .fab svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .homework-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            margin-bottom: 0.5rem;
            background: var(--bg);
            transition: var(--transition);
        }

        .homework-item:hover {
            border-color: var(--p);
            background: var(--l);
        }

        .homework-emoji {
            font-size: 1.5rem;
            margin-right: 1rem;
        }

        .homework-title {
            flex: 1;
            font-weight: var(--font-weight-medium);
        }

        .homework-due {
            font-size: var(--font-size-sm);
            color: var(--s);
            margin-left: 1rem;
        }

        .homework-status {
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            margin-left: 1rem;
        }

        .homework-status.pending {
            background: var(--warning);
        }

        .homework-status.completed {
            background: var(--success);
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 400px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .chat-header {
            padding: 1rem;
            background: var(--p);
            color: white;
            font-weight: var(--font-weight-bold);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: var(--l);
        }

        .message {
            max-width: 80%;
            padding: 1rem;
            border-radius: var(--radius-sm);
            line-height: var(--line-height-base);
        }

        .message.user {
            align-self: flex-end;
            background: var(--p);
            color: white;
        }

        .message.ai {
            align-self: flex-start;
            background: var(--bg);
            color: var(--d);
            border: 1px solid var(--border);
        }

        .chat-input {
            display: flex;
            padding: 1rem;
            background: var(--bg);
            border-top: 1px solid var(--border);
        }

        .chat-input input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            margin-right: 0.5rem;
        }

        .chat-input button {
            padding: 0.75rem 1.5rem;
        }

        .progress-container {
            width: 100%;
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--p);
            width: 0%;
            transition: width 0.3s ease;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-bold);
        }

        .badge-primary {
            background: rgba(13, 110, 253, 0.1);
            color: var(--p);
        }

        .badge-secondary {
            background: rgba(108, 117, 125, 0.1);
            color: var(--s);
        }

        .badge-success {
            background: rgba(25, 135, 84, 0.1);
            color: var(--success);
        }

        .badge-danger {
            background: rgba(220, 53, 69, 0.1);
            color: var(--danger);
        }

        .offline-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--danger);
            color: white;
            text-align: center;
            padding: 0.5rem;
            font-size: var(--font-size-sm);
            z-index: var(--z-index-toast);
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .offline-banner.show {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .navbar-nav {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--bg);
                border: 1px solid var(--border);
                border-top: none;
                box-shadow: var(--shadow);
                z-index: var(--z-index-dropdown);
            }

            .navbar-nav.show {
                display: flex;
            }

            .navbar-toggler {
                display: block;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .footer-container {
                flex-direction: column;
                text-align: center;
            }

            .footer-links {
                justify-content: center;
            }

            .fab {
                bottom: 1rem;
                right: 1rem;
                width: 3rem;
                height: 3rem;
            }

            .fab svg {
                width: 1.25rem;
                height: 1.25rem;
            }
        }

        @media (max-width: 576px) {
            .container {
                padding: 0 0.5rem;
            }

            .card {
                padding: 0.75rem;
            }

            .navbar-brand {
                font-size: var(--font-size-lg);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                transition: none !important;
                animation: none !important;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #121212;
                --card: #1e1e1e;
                --border: #333;
                --d: #e0e0e0;
                --l: #2d2d2d;
                --shadow: 0 4px 12px rgba(0,0,0,.3);
                --shadow-lg: 0 8px 24px rgba(0,0,0,.4);
            }
        }
    </style>
</head>
<body>
    <header class="navbar">
        <div class="container navbar-container">
            <a href="#" class="navbar-brand">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
                <span>School Web #1</span>
            </a>
            <button class="navbar-toggler" id="menuToggle">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </button>
            <nav class="navbar-nav" id="navbarNav">
                <a href="#" class="nav-link active" id="homeLink">üè† Home</a>
                <a href="#" class="nav-link" id="homeworkLink">üìö Homework</a>
                <a href="#" class="nav-link" id="aiLink">ü§ñ AI Assistant</a>
                <a href="#" class="nav-link" id="progressLink">üìä Progress</a>
                <div class="dropdown">
                    <div class="nav-link dropdown-toggle" id="settingsToggle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 1.415 3.41 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-3.41 1.415 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 1.415-3.41 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 3.41 1.415 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                        <span>Settings</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="#" class="dropdown-item" id="darkModeToggle">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                            <span>Dark Mode</span>
                        </a>
                        <a href="#" class="dropdown-item" id="printBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
                            <span>Print</span>
                        </a>
                        <a href="#" class="dropdown-item" id="shareBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                            <span>Share</span>
                        </a>
                        <a href="#" class="dropdown-item" id="pdfBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            <span>Download PDF</span>
                        </a>
                        <a href="#" class="dropdown-item" id="backupBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                            <span>Backup Data</span>
                        </a>
                        <a href="#" class="dropdown-item" id="restoreBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="16 17.01 12 22 8 17"></polyline><line x1="12" y1="12" x2="12" y2="22"></line></svg>
                            <span>Restore Data</span>
                        </a>
                        <a href="#" class="dropdown-item" id="clearCacheBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            <span>Clear Cache</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" id="installBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline></svg>
                            <span>Install App</span>
                        </a>
                    </div>
                </div>
                <div class="dropdown">
                    <div class="nav-link dropdown-toggle" id="profileToggle">
                        <div id="profileIcon" class="btn-icon" style="background: var(--p);">üë§</div>
                        <span id="userName">Loading...</span>
                    </div>
                    <div class="dropdown-menu">
                        <div class="dropdown-item">
                            <strong>Class:</strong> <span id="userClass">-</span>
                        </div>
                        <div class="dropdown-item">
                            <strong>Parent:</strong> <span id="userParent">-</span>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" id="logoutBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                            <span>Logout</span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div id="homeSection">
                <div class="card">
                    <h2 class="card-header">üëã Welcome, <span id="greetingName">Student</span>!</h2>
                    <div class="card-body">
                        <p>You're in <strong>Class <span id="greetingClass">X</span></strong>. Here's what you need to know today.</p>
                        <div class="grid">
                            <div class="card">
                                <div class="card-header">üìö Homework</div>
                                <div class="card-body">
                                    <div id="homeworkList"></div>
                                    <div class="progress-container">
                                        <div class="progress-bar" id="homeworkProgress"></div>
                                    </div>
                                    <div class="text-center">
                                        <small id="homeworkStats">0/0 completed</small>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">üìÖ Today's Schedule</div>
                                <div class="card-body">
                                    <div id="scheduleList"></div>
                                </div>
                            </div>
                        </div>
                        <div class="grid">
                            <div class="card">
                                <div class="card-header">üîî Reminders</div>
                                <div class="card-body">
                                    <ul id="remindersList"></ul>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">üèÜ Achievements</div>
                                <div class="card-body">
                                    <div id="achievementsList"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="homeworkSection" class="hidden">
                <div class="card">
                    <div class="card-header">üìö Homework Assignments</div>
                    <div class="card-body">
                        <div class="flex flex-between flex-align-center mb-3">
                            <h3>Class <span id="homeworkClass">X</span></h3>
                            <div class="btn-group">
                                <button class="btn btn-outline" id="filterAll">All</button>
                                <button class="btn btn-outline" id="filterPending">Pending</button>
                                <button class="btn btn-outline" id="filterCompleted">Completed</button>
                            </div>
                        </div>
                        <div id="homeworkItems"></div>
                    </div>
                </div>
            </div>

            <div id="aiSection" class="hidden">
                <div class="card">
                    <div class="card-header">ü§ñ AI Homework Assistant</div>
                    <div class="card-body">
                        <p class="mb-3">Ask me anything about your homework, subjects, or school life. I'm here to help!</p>
                        <div class="chat-container">
                            <div class="chat-header">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                                <span>School AI Assistant</span>
                            </div>
                            <div class="chat-messages" id="chatMessages">
                                <div class="message ai">
                                    Hello! I'm your AI homework assistant. How can I help you with your studies today? üìö
                                </div>
                            </div>
                            <div class="chat-input">
                                <input type="text" id="chatInput" placeholder="Ask me about homework, subjects, or school..." />
                                <button class="btn btn-primary" id="sendBtn">Send</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="progressSection" class="hidden">
                <div class="card">
                    <div class="card-header">üìä Academic Progress</div>
                    <div class="card-body">
                        <div class="grid">
                            <div class="card">
                                <div class="card-header">üìà Subject Performance</div>
                                <div class="card-body">
                                    <canvas id="performanceChart" height="200"></canvas>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">üéØ Goals</div>
                                <div class="card-body">
                                    <div id="goalsList"></div>
                                </div>
                            </div>
                        </div>
                        <div class="card mt-3">
                            <div class="card-header">üìÖ Attendance Record</div>
                            <div class="card-body">
                                <div class="progress-container">
                                    <div class="progress-bar" id="attendanceBar"></div>
                                </div>
                                <p class="text-center mt-2">Attendance: <strong><span id="attendancePercent">0</span>%</strong> (<span id="attendanceDays">0</span>/<span id="totalDays">0</span> days)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer-container">
            <div>
                <p>&copy; <span id="currentYear">2023</span> School Web #1. All rights reserved.</p>
                <p class="fs-sm text-muted">Made with ‚ù§Ô∏è for students</p>
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link" id="aboutLink">About</a>
                <a href="#" class="footer-link" id="privacyLink">Privacy</a>
                <a href="#" class="footer-link" id="termsLink">Terms</a>
                <a href="#" class="footer-link" id="contactLink">Contact</a>
            </div>
        </div>
    </footer>

    <button class="fab" id="scrollTopBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>
    </button>

    <div class="toast" id="toast">
        <div class="toast-header">
            <strong class="toast-title" id="toastTitle">Notification</strong>
            <button class="close-btn" id="toastClose">&times;</button>
        </div>
        <div class="toast-body" id="toastBody">This is a notification.</div>
    </div>

    <div class="modal" id="aboutModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">About School Web #1</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p><strong>School Web #1</strong> is a comprehensive student dashboard that helps you manage your homework, track your progress, and get AI-powered assistance with your studies.</p>
                    <p>Features include:</p>
                    <ul>
                        <li>Homework tracking with emoji visualization</li>
                        <li>AI-powered homework assistant using Google Gemini</li>
                        <li>Progress tracking and performance analytics</li>
                        <li>Offline support with service worker</li>
                        <li>PWA with install capability</li>
                        <li>Dark mode and responsive design</li>
                        <li>Data backup and restore functionality</li>
                    </ul>
                    <p>This application is designed to make school life easier for students of all ages.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="privacyModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Privacy Policy</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p><strong>Last Updated:</strong> <span id="policyDate">January 1, 2023</span></p>
                    <h6>Information We Collect</h6>
                    <p>We collect personal information that you provide to us, such as your name, class, and parent's name when you log in to the application.</p>
                    <h6>How We Use Your Information</h6>
                    <p>We use the information we collect to provide and improve our services, personalize your experience, and send you important updates about your academic progress.</p>
                    <h6>Data Storage</h6>
                    <p>Your data is stored locally on your device using localStorage. We do not transmit your personal information to any external servers.</p>
                    <h6>Your Rights</h6>
                    <p>You have the right to access, correct, or delete your personal information at any time by clearing your browser's localStorage.</p>
                    <h6>Changes to This Policy</h6>
                    <p>We may update our privacy policy from time to time. We will notify you of any changes by posting the new privacy policy on this page.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="termsModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Terms of Service</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p><strong>Effective Date:</strong> <span id="termsDate">January 1, 2023</span></p>
                    <h6>Acceptance of Terms</h6>
                    <p>By accessing or using School Web #1, you agree to be bound by these Terms of Service. If you disagree with any part of the terms, you may not access the service.</p>
                    <h6>Accounts</h6>
                    <p>When you create an account, you must provide information that is accurate, complete, and current. You are responsible for safeguarding your password.</p>
                    <h6>Intellectual Property</h6>
                    <p>The service and its original content, features, and functionality are and will remain the exclusive property of School Web #1 and its licensors.</p>
                    <h6>Termination</h6>
                    <p>We may terminate or suspend your account immediately, without prior notice, for any reason whatsoever.</p>
                    <h6>Changes</h6>
                    <p>We reserve the right to modify or replace these Terms at any time. It is your responsibility to review these Terms periodically.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary modal-close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="contactModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Contact Us</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>If you have any questions or feedback about School Web #1, please don't hesitate to reach out to us.</p>
                    <form id="contactForm">
                        <div class="form-group">
                            <label for="contactName" class="form-label">Your Name</label>
                            <input type="text" id="contactName" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label for="contactEmail" class="form-label">Email Address</label>
                            <input type="email" id="contactEmail" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label for="contactSubject" class="form-label">Subject</label>
                            <input type="text" id="contactSubject" class="form-control" required />
                        </div>
                        <div class="form-group">
                            <label for="contactMessage" class="form-label">Message</label>
                            <textarea id="contactMessage" class="form-control" rows="5" required></textarea>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="backupModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Backup Data</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Your data will be exported as a JSON file. This includes your homework, progress, and settings.</p>
                    <div class="alert alert-info">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                        <span>Your data is stored locally on your device. This backup is for your personal records.</span>
                    </div>
                    <button class="btn btn-primary btn-block" id="downloadBackup">Download Backup</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="restoreModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Restore Data</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Select a backup file to restore your data. This will overwrite your current data.</p>
                    <div class="alert alert-warning">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        <span>This action cannot be undone. Make sure you have a backup of your current data.</span>
                    </div>
                    <input type="file" id="restoreFile" accept=".json" class="form-control" />
                    <button class="btn btn-primary btn-block mt-3" id="restoreData">Restore Data</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="adminModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Admin Access</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Enter the admin password to access the admin panel.</p>
                    <div class="form-group">
                        <label for="adminPassword" class="form-label">Password</label>
                        <input type="password" id="adminPassword" class="form-control" />
                    </div>
                    <button class="btn btn-primary btn-block" id="adminLogin">Login</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="clearCacheModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Clear Cache</h5>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to clear all cached data? This will remove your homework, progress, and settings.</p>
                    <div class="alert alert-danger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        <span>This action cannot be undone. Make sure you have backed up your data.</span>
                    </div>
                    <button class="btn btn-danger btn-block" id="confirmClearCache">Clear Cache</button>
                </div>
            </div>
        </div>
    </div>

    <div class="offline-banner" id="offlineBanner">
        You are offline. Some features may not work.
    </div>

    <script>
        // Mock data for homework topics by class
        const homeworkTopics = {
            1: [
                { emoji: "‚úèÔ∏è", subject: "Writing", topic: "Practice writing your name", difficulty: "Easy" },
                { emoji: "üé®", subject: "Art", topic: "Draw your family", difficulty: "Easy" },
                { emoji: "üßÆ", subject: "Math", topic: "Count objects from 1 to 10", difficulty: "Easy" },
                { emoji: "üéµ", subject: "Music", topic: "Learn a nursery rhyme", difficulty: "Easy" },
                { emoji: "üìñ", subject: "Reading", topic: "Read a picture book", difficulty: "Easy" },
                { emoji: "‚úÇÔ∏è", subject: "Craft", topic: "Make a paper airplane", difficulty: "Easy" },
                { emoji: "üçé", subject: "Science", topic: "Identify fruits and vegetables", difficulty: "Easy" },
                { emoji: "üèÉ", subject: "PE", topic: "Practice jumping", difficulty: "Easy" }
            ],
            2: [
                { emoji: "üìù", subject: "Writing", topic: "Write a short story about your pet", difficulty: "Easy" },
                { emoji: "‚ûï", subject: "Math", topic: "Addition and subtraction up to 20", difficulty: "Easy" },
                { emoji: "üåç", subject: "Geography", topic: "Color the map of your country", difficulty: "Easy" },
                { emoji: "üî¨", subject: "Science", topic: "Observe plants in your garden", difficulty: "Medium" },
                { emoji: "üìñ", subject: "Reading", topic: "Read a chapter book", difficulty: "Easy" },
                { emoji: "üé®", subject: "Art", topic: "Create a landscape drawing", difficulty: "Easy" },
                { emoji: "üéµ", subject: "Music", topic: "Practice a simple melody", difficulty: "Easy" },
                { emoji: "üèÉ", subject: "PE", topic: "Learn a new game", difficulty: "Easy" }
            ],
            3: [
                { emoji: "‚úçÔ∏è", subject: "Writing", topic: "Write a letter to a friend", difficulty: "Easy" },
                { emoji: "‚úñÔ∏è", subject: "Math", topic: "Multiplication tables 1-5", difficulty: "Medium" },
                { emoji: "üó∫Ô∏è", subject: "Geography", topic: "Label continents on a map", difficulty: "Medium" },
                { emoji: "üî¨", subject: "Science", topic: "Experiment with magnets", difficulty: "Medium" },
                { emoji: "üìñ", subject: "Reading", topic: "Summarize a book chapter", difficulty: "Medium" },
                { emoji: "üé®", subject: "Art", topic: "Create a collage", difficulty: "Easy" },
                { emoji: "üéµ", subject: "Music", topic: "Learn musical notes", difficulty: "Medium" },
                { emoji: "üèÉ", subject: "PE", topic: "Practice team sports", difficulty: "Easy" }
            ],
            4: [
                { emoji: "üìù", subject: "Writing", topic: "Write a report on a historical figure", difficulty: "Medium" },
                { emoji: "‚ûó", subject: "Math", topic: "Division problems", difficulty: "Medium" },
                { emoji: "üåé", subject: "Geography", topic: "Research a foreign country", difficulty: "Medium" },
                { emoji: "üî¨", subject: "Science", topic: "Study the water cycle", difficulty: "Medium" },
                { emoji: "üìñ", subject: "Reading", topic: "Analyze a poem", difficulty: "Medium" },
                { emoji: "üé®", subject: "Art", topic: "Paint with watercolors", difficulty: "Medium" },
                { emoji: "üéµ", subject: "Music", topic: "Compose a simple song", difficulty: "Medium" },
                { emoji: "üß™", subject: "Science", topic: "Create a volcano model", difficulty: "Medium" }
            ],
            5: [
                { emoji: "‚úçÔ∏è", subject: "Writing", topic: "Write a persuasive essay", difficulty: "Medium" },
                { emoji: "üßÆ", subject: "Math", topic: "Fractions and decimals", difficulty: "Medium" },
                { emoji: "üåç", subject: "Geography", topic: "Study climate zones", difficulty: "Medium" },
                { emoji: "üî¨", subject: "Science", topic: "Explore the solar system", difficulty: "Medium" },
                { emoji: "üìñ", subject: "Reading", topic: "Compare two novels", difficulty: "Medium" },
                { emoji: "üé®", subject: "Art", topic: "Create a perspective drawing", difficulty: "Medium" },
                { emoji: "üéµ", subject: "Music", topic: "Learn to read sheet music", difficulty: "Medium" },
                { emoji: "üß™", subject: "Science", topic: "Conduct a chemistry experiment", difficulty: "Hard" }
            ],
            6: [
                { emoji: "üìù", subject: "Writing", topic: "Write a research paper", difficulty: "Medium" },
                { emoji: "‚úñÔ∏è", subject: "Math", topic: "Algebraic expressions", difficulty: "Hard" },
                { emoji: "üó∫Ô∏è", subject: "Geography", topic: "Analyze population density", difficulty: "Medium" },
                { emoji: "üî¨", subject: "Science", topic: "Study human anatomy", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Analyze literary devices", difficulty: "Medium" },
                { emoji: "üé®", subject: "Art", topic: "Create a sculpture", difficulty: "Medium" },
                { emoji: "üéµ", subject: "Music", topic: "Learn music theory", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Investigate ecosystems", difficulty: "Hard" }
            ],
            7: [
                { emoji: "‚úçÔ∏è", subject: "Writing", topic: "Write a literary analysis", difficulty: "Hard" },
                { emoji: "‚ûó", subject: "Math", topic: "Geometry proofs", difficulty: "Hard" },
                { emoji: "üåé", subject: "Geography", topic: "Study global economic systems", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Explore genetics", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Critique a novel", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Study art history", difficulty: "Medium" },
                { emoji: "üéµ", subject: "Music", topic: "Compose a piece of music", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Conduct a physics experiment", difficulty: "Hard" }
            ],
            8: [
                { emoji: "üìù", subject: "Writing", topic: "Write a thesis statement", difficulty: "Hard" },
                { emoji: "üßÆ", subject: "Math", topic: "Trigonometry problems", difficulty: "Hard" },
                { emoji: "üåç", subject: "Geography", topic: "Analyze geopolitical conflicts", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Study cellular biology", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Analyze complex texts", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Create a portfolio", difficulty: "Hard" },
                { emoji: "üéµ", subject: "Music", topic: "Perform a recital", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Investigate chemical reactions", difficulty: "Hard" }
            ],
            9: [
                { emoji: "‚úçÔ∏è", subject: "Writing", topic: "Write a college application essay", difficulty: "Hard" },
                { emoji: "‚úñÔ∏è", subject: "Math", topic: "Quadratic equations", difficulty: "Hard" },
                { emoji: "üó∫Ô∏è", subject: "Geography", topic: "Study urban planning", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Explore environmental science", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Analyze Shakespeare", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Develop a personal style", difficulty: "Hard" },
                { emoji: "üéµ", subject: "Music", topic: "Master an instrument", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Conduct independent research", difficulty: "Hard" }
            ],
            10: [
                { emoji: "üìù", subject: "Writing", topic: "Write a research proposal", difficulty: "Hard" },
                { emoji: "‚ûó", subject: "Math", topic: "Calculus problems", difficulty: "Hard" },
                { emoji: "üåé", subject: "Geography", topic: "Analyze climate change", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Study advanced physics", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Critique philosophical texts", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Prepare for art school", difficulty: "Hard" },
                { emoji: "üéµ", subject: "Music", topic: "Compose a symphony", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Investigate quantum mechanics", difficulty: "Hard" }
            ],
            11: [
                { emoji: "‚úçÔ∏è", subject: "Writing", topic: "Write a scientific paper", difficulty: "Hard" },
                { emoji: "üßÆ", subject: "Math", topic: "Advanced calculus", difficulty: "Hard" },
                { emoji: "üåç", subject: "Geography", topic: "Study global development", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Explore astrophysics", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Analyze complex literature", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Create a thesis exhibition", difficulty: "Hard" },
                { emoji: "üéµ", subject: "Music", topic: "Produce a recording", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Conduct lab research", difficulty: "Hard" }
            ],
            12: [
                { emoji: "üìù", subject: "Writing", topic: "Write a dissertation", difficulty: "Hard" },
                { emoji: "‚úñÔ∏è", subject: "Math", topic: "Advanced statistics", difficulty: "Hard" },
                { emoji: "üó∫Ô∏è", subject: "Geography", topic: "Analyze global migration", difficulty: "Hard" },
                { emoji: "üî¨", subject: "Science", topic: "Study molecular biology", difficulty: "Hard" },
                { emoji: "üìñ", subject: "Reading", topic: "Critique academic journals", difficulty: "Hard" },
                { emoji: "üé®", subject: "Art", topic: "Develop a professional portfolio", difficulty: "Hard" },
                { emoji: "üéµ", subject: "Music", topic: "Compose a concerto", difficulty: "Hard" },
                { emoji: "üß™", subject: "Science", topic: "Publish research findings", difficulty: "Hard" }
            ]
        };

        // Mock data for schedules
        const schedules = {
            1: [
                { time: "9:00-9:30", subject: "Morning Meeting", emoji: "üëã" },
                { time: "9:30-10:15", subject: "Math", emoji: "üßÆ" },
                { time: "10:15-11:00", subject: "Reading", emoji: "üìñ" },
                { time: "11:00-11:30", subject: "Recess", emoji: "üçé" },
                { time: "11:30-12:15", subject: "Writing", emoji: "‚úèÔ∏è" },
                { time: "12:15-1:00", subject: "Lunch", emoji: "ü•™" },
                { time: "1:00-1:45", subject: "Art", emoji: "üé®" },
                { time: "1:45-2:30", subject: "Science", emoji: "üî¨" },
                { time: "2:30-3:00", subject: "Dismissal", emoji: "üöå" }
            ],
            2: [
                { time: "8:30-9:00", subject: "Morning Work", emoji: "‚úçÔ∏è" },
                { time: "9:00-9:45", subject: "Math", emoji: "‚ûï" },
                { time: "9:45-10:30", subject: "Reading", emoji: "üìñ" },
                { time: "10:30-11:00", subject: "Recess", emoji: "üèÉ" },
                { time: "11:00-11:45", subject: "Writing", emoji: "üìù" },
                { time: "11:45-12:30", subject: "Lunch", emoji: "üçï" },
                { time: "12:30-1:15", subject: "Science", emoji: "üî¨" },
                { time: "1:15-2:00", subject: "Social Studies", emoji: "üåç" },
                { time: "2:00-2:45", subject: "Music", emoji: "üéµ" },
                { time: "2:45-3:15", subject: "Dismissal", emoji: "üöå" }
            ],
            3: [
                { time: "8:00-8:30", subject: "Morning Meeting", emoji: "üëã" },
                { time: "8:30-9:15", subject: "Math", emoji: "‚úñÔ∏è" },
                { time: "9:15-10:00", subject: "Reading", emoji: "üìñ" },
                { time: "10:00-10:30", subject: "Recess", emoji: "üçé" },
                { time: "10:30-11:15", subject: "Writing", emoji: "‚úçÔ∏è" },
                { time: "11:15-12:00", subject: "Lunch", emoji: "ü•™" },
                { time: "12:00-12:45", subject: "Science", emoji: "üî¨" },
                { time: "12:45-1:30", subject: "Social Studies", emoji: "üó∫Ô∏è" },
                { time: "1:30-2:15", subject: "Art", emoji: "üé®" },
                { time: "2:15-3:00", subject: "PE", emoji: "üèÉ" },
                { time: "3:00-3:30", subject: "Dismissal", emoji: "üöå" }
            ],
            4: [
                { time: "7:45-8:15", subject: "Morning Work", emoji: "‚úçÔ∏è" },
                { time: "8:15-9:00", subject: "Math", emoji: "‚ûó" },
                { time: "9:00-9:45", subject: "Reading", emoji: "üìñ" },
                { time: "9:45-10:15", subject: "Recess", emoji: "üçé" },
                { time: "10:15-11:00", subject: "Writing", emoji: "üìù" },
                { time: "11:00-11:45", subject: "Science", emoji: "üî¨" },
                { time: "11:45-12:30", subject: "Lunch", emoji: "üçï" },
                { time: "12:30-1:15", subject: "Social Studies", emoji: "üåé" },
                { time: "1:15-2:00", subject: "Music", emoji: "üéµ" },
                { time: "2:00-2:45", subject: "Art", emoji: "üé®" },
                { time: "2:45-3:30", subject: "Dismissal", emoji: "üöå" }
            ],
            5: [
                { time: "7:30-8:00", subject: "Morning Meeting", emoji: "üëã" },
                { time: "8:00-8:45", subject: "Math", emoji: "üßÆ" },
                { time: "8:45-9:30", subject: "Reading", emoji: "üìñ" },
                { time: "9:30-10:00", subject: "Recess", emoji: "üçé" },
                { time: "10:00-10:45", subject: "Writing", emoji: "‚úçÔ∏è" },
                { time: "10:45-11:30", subject: "Science", emoji: "üî¨" },
                { time: "11:30-12:15", subject: "Lunch", emoji: "ü•™" },
                { time: "12:15-1:00", subject: "Social Studies", emoji: "üåç" },
                { time: "1:00-1:45", subject: "Music", emoji: "üéµ" },
                { time: "1:45-2:30", subject: "Art", emoji: "üé®" },
                { time: "2:30-3:15", subject: "PE", emoji: "üèÉ" },
                { time: "3:15-3:45", subject: "Dismissal", emoji: "üöå" }
            ],
            6: [
                { time: "7:15-7:45", subject: "Homeroom", emoji: "üè´" },
                { time: "7:45-8:30", subject: "Math", emoji: "‚úñÔ∏è" },
                { time: "8:30-9:15", subject: "ELA", emoji: "üìñ" },
                { time: "9:15-10:00", subject: "Science", emoji: "üî¨" },
                { time: "10:00-10:30", subject: "Recess", emoji: "üçé" },
                { time: "10:30-11:15", subject: "Social Studies", emoji: "üó∫Ô∏è" },
                { time: "11:15-12:00", subject: "Lunch", emoji: "üçï" },
                { time: "12:00-12:45", subject: "Elective", emoji: "üé®" },
                { time: "12:45-1:30", subject: "PE", emoji: "üèÉ" },
                { time: "1:30-2:15", subject: "Music", emoji: "üéµ" },
                { time: "2:15-3:00", subject: "Study Hall", emoji: "üìö" },
                { time: "3:00-3:30", subject: "Dismissal", emoji: "üöå" }
            ],
            7: [
                { time: "7:00-7:30", subject: "Homeroom", emoji: "üè´" },
                { time: "7:30-8:15", subject: "Math", emoji: "‚ûó" },
                { time: "8:15-9:00", subject: "ELA", emoji: "üìñ" },
                { time: "9:00-9:45", subject: "Science", emoji: "üî¨" },
                { time: "9:45-10:30", subject: "Social Studies", emoji: "üåé" },
                { time: "10:30-11:00", subject: "Break", emoji: "üçé" },
                { time: "11:00-11:45", subject: "Elective", emoji: "üé®" },
                { time: "11:45-12:30", subject: "Lunch", emoji: "üçï" },
                { time: "12:30-1:15", subject: "PE", emoji: "üèÉ" },
                { time: "1:15-2:00", subject: "Music", emoji: "üéµ" },
                { time: "2:00-2:45", subject: "Study Hall", emoji: "üìö" },
                { time: "2:45-3:30", subject: "Dismissal", emoji: "üöå" }
            ],
            8: [
                { time: "6:45-7:15", subject: "Homeroom", emoji: "üè´" },
                { time: "7:15-8:00", subject: "Math", emoji: "üßÆ" },
                { time: "8:00-8:45", subject: "ELA", emoji: "üìñ" },
                { time: "8:45-9:30", subject: "Science", emoji: "üî¨" },
                { time: "9:30-10:15", subject: "Social Studies", emoji: "üåç" },
                { time: "10:15-10:45", subject: "Break", emoji: "üçé" },
                { time: "10:45-11:30", subject: "Elective", emoji: "üé®" },
                { time: "11:30-12:15", subject: "Lunch", emoji: "üçï" },
                { time: "12:15-1:00", subject: "PE", emoji: "üèÉ" },
                { time: "1:00-1:45", subject: "Music", emoji: "üéµ" },
                { time: "1:45-2:30", subject: "Study Hall", emoji: "üìö" },
                { time: "2:30-3:15", subject: "Dismissal", emoji: "üöå" }
            ],
            9: [
                { time: "6:30-7:00", subject: "Homeroom", emoji: "üè´" },
                { time: "7:00-7:45", subject: "Math", emoji: "‚úñÔ∏è" },
                { time: "7:45-8:30", subject: "ELA", emoji: "üìñ" },
                { time: "8:30-9:15", subject: "Science", emoji: "üî¨" },
                { time: "9:15-10:00", subject: "Social Studies", emoji: "üó∫Ô∏è" },
                { time: "10:00-10:30", subject: "Break", emoji: "üçé" },
                { time: "10:30-11:15", subject: "Elective", emoji: "üé®" },
                { time: "11:15-12:00", subject: "Lunch", emoji: "üçï" },
                { time: "12:00-12:45", subject: "PE", emoji: "üèÉ" },
                { time: "12:45-1:30", subject: "Music", emoji: "üéµ" },
                { time: "1:30-2:15", subject: "Study Hall", emoji: "üìö" },
                { time: "2:15-3:00", subject: "Dismissal", emoji: "üöå" }
            ],
            10: [
                { time: "6:15-6:45", subject: "Homeroom", emoji: "üè´" },
                { time: "6:45-7:30", subject: "Math", emoji: "‚ûó" },
                { time: "7:30-8:15", subject: "ELA", emoji: "üìñ" },
                { time: "8:15-9:00", subject: "Science", emoji: "üî¨" },
                { time: "9:00-9:45", subject: "Social Studies", emoji: "üåé" },
                { time: "9:45-10:15", subject: "Break", emoji: "üçé" },
                { time: "10:15-11:00", subject: "Elective", emoji: "üé®" },
                { time: "11:00-11:45", subject: "Lunch", emoji: "üçï" },
                { time: "11:45-12:30", subject: "PE", emoji: "üèÉ" },
                { time: "12:30-1:15", subject: "Music", emoji: "üéµ" },
                { time: "1:15-2:00", subject: "Study Hall", emoji: "üìö" },
                { time: "2:00-2:45", subject: "Dismissal", emoji: "üöå" }
            ],
            11: [
                { time: "6:00-6:30", subject: "Homeroom", emoji: "üè´" },
                { time: "6:30-7:15", subject: "Math", emoji: "üßÆ" },
                { time: "7:15-8:00", subject: "ELA", emoji: "üìñ" },
                { time: "8:00-8:45", subject: "Science", emoji: "üî¨" },
                { time: "8:45-9:30", subject: "Social Studies", emoji: "üåç" },
                { time: "9:30-10:00", subject: "Break", emoji: "üçé" },
                { time: "10:00-10:45", subject: "Elective", emoji: "üé®" },
                { time: "10:45-11:30", subject: "Lunch", emoji: "üçï" },
                { time: "11:30-12:15", subject: "PE", emoji: "üèÉ" },
                { time: "12:15-1:00", subject: "Music", emoji: "üéµ" },
                { time: "1:00-1:45", subject: "Study Hall", emoji: "üìö" },
                { time: "1:45-2:30", subject: "Dismissal", emoji: "üöå" }
            ],
            12: [
                { time: "5:45-6:15", subject: "Homeroom", emoji: "üè´" },
                { time: "6:15-7:00", subject: "Math", emoji: "‚úñÔ∏è" },
                { time: "7:00-7:45", subject: "ELA", emoji: "üìñ" },
                { time: "7:45-8:30", subject: "Science", emoji: "üî¨" },
                { time: "8:30-9:15", subject: "Social Studies", emoji: "üó∫Ô∏è" },
                { time: "9:15-9:45", subject: "Break", emoji: "üçé" },
                { time: "9:45-10:30", subject: "Elective", emoji: "üé®" },
                { time: "10:30-11:15", subject: "Lunch", emoji: "üçï" },
                { time: "11:15-12:00", subject: "PE", emoji: "üèÉ" },
                { time: "12:00-12:45", subject: "Music", emoji: "üéµ" },
                { time: "12:45-1:30", subject: "Study Hall", emoji: "üìö" },
                { time: "1:30-2:15", subject: "Dismissal", emoji: "üöå" }
            ]
        };

        // Mock data for reminders
        const reminders = [
            { text: "Don't forget your permission slip for the field trip!", emoji: "üìã", type: "warning", time: "today" },
            { text: "Library books due tomorrow", emoji: "üìö", type: "info", time: "tomorrow" },
            { text: "Math test on Friday", emoji: "‚úèÔ∏è", type: "danger", time: "this week" },
            { text: "Parent-teacher conference next week", emoji: "üë®‚Äçüë©‚Äçüëß", type: "info", time: "next week" },
            { text: "School play auditions this Friday", emoji: "üé≠", type: "success", time: "this week" },
            { text: "Bring gym clothes for PE", emoji: "üëï", type: "info", time: "today" },
            { text: "Science project due in two weeks", emoji: "üî¨", type: "warning", time: "next week" },
            { text: "No school on Monday - Holiday", emoji: "üéâ", type: "success", time: "next week" }
        ];

        // Mock data for achievements
        const achievements = [
            { name: "Perfect Attendance", emoji: "‚≠ê", description: "Attended school every day this month", unlocked: true },
            { name: "Math Whiz", emoji: "üß†", description: "Scored 100% on three math tests", unlocked: true },
            { name: "Reading Champion", emoji: "üèÜ", description: "Read 10 books this semester", unlocked: true },
            { name: "Science Fair Winner", emoji: "üî¨", description: "Won first place in science fair", unlocked: false },
            { name: "Artistic Talent", emoji: "üé®", description: "Artwork displayed in school hallway", unlocked: true },
            { name: "Helping Hand", emoji: "ü§ù", description: "Helped classmates with their work", unlocked: true },
            { name: "Sports Star", emoji: "‚öΩ", description: "Scored winning goal in soccer game", unlocked: false },
            { name: "Most Improved", emoji: "üìà", description: "Improved grades in all subjects", unlocked: true }
        ];

        // Mock data for goals
        const goals = [
            { title: "Improve Math Grade", current: 78, target: 90, unit: "points", emoji: "üìà" },
            { title: "Read 5 More Books", current: 8, target: 13, unit: "books", emoji: "üìö" },
            { title: "Complete Homework on Time", current: 12, target: 20, unit: "assignments", emoji: "‚úÖ" },
            { title: "Practice Piano", current: 8, target: 15, unit: "hours", emoji: "üéµ" }
        ];

        // App state
        let userData = {
            name: '',
            cls: '',
            parent: '',
            homework: [],
            progress: {
                attendance: {
                    present: 85,
                    total: 100
                },
                subjects: {
                    math: 85,
                    science: 92,
                    english: 78,
                    history: 88,
                    art: 95
                }
            },
            reminders: [],
            achievements: [],
            settings: {
                darkMode: false,
                notifications: true,
                theme: 'default'
            }
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            document.getElementById('policyDate').textContent = formatDate(new Date());
            document.getElementById('termsDate').textContent = formatDate(new Date());

            // Load user data from localStorage
            loadData();

            // Initialize UI
            initUI();

            // Set up event listeners
            setupEventListeners();

            // Check installation status
            checkInstallability();

            // Check online status
            updateOnlineStatus();
            window.addEventListener('online', updateOnlineStatus);
            window.addEventListener('offline', updateOnlineStatus);

            // Show toast notification
            showToast('Welcome back, ' + userData.name + '!', 'success');
        });

        // Load data from localStorage
        function loadData() {
            // Try to load user data from localStorage
            const savedData = localStorage.getItem('studentDashboard');
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    userData = { ...userData, ...parsedData };
                } catch (e) {
                    console.error('Error parsing saved ', e);
                }
            }

            // If no saved data, try to get from login
            if (!userData.name || !userData.cls) {
                userData.name = localStorage.getItem('name') || 'Student';
                userData.cls = localStorage.getItem('cls') || '1';
                userData.parent = localStorage.getItem('parent') || 'Parent';
                
                // Generate initial homework if none exists
                if (userData.cls && (!userData.homework || userData.homework.length === 0)) {
                    generateHomework();
                }
            }

            // Ensure reminders exist
            if (!userData.reminders || userData.reminders.length === 0) {
                userData.reminders = getRandomItems(reminders, 3);
            }

            // Ensure achievements exist
            if (!userData.achievements || userData.achievements.length === 0) {
                userData.achievements = achievements;
            }
        }

        // Save data to localStorage
        function saveData() {
            try {
                localStorage.setItem('studentDashboard', JSON.stringify(userData));
                return true;
            } catch (e) {
                console.error('Error saving ', e);
                return false;
            }
        }

        // Initialize UI with user data
        function initUI() {
            // Update user info
            document.getElementById('greetingName').textContent = userData.name;
            document.getElementById('greetingClass').textContent = userData.cls;
            document.getElementById('userName').textContent = userData.name;
            document.getElementById('userClass').textContent = userData.cls;
            document.getElementById('userParent').textContent = userData.parent;
            document.getElementById('homeworkClass').textContent = userData.cls;

            // Apply dark mode if enabled
            if (userData.settings.darkMode) {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('darkModeToggle').innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><moon class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></moon></svg>
                    <span>Light Mode</span>
                `;
            }

            // Render content
            renderHomework();
            renderSchedule();
            renderReminders();
            renderAchievements();
            renderGoals();
            renderProgressChart();
            updateAttendance();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            document.getElementById('homeLink').addEventListener('click', showSection.bind(null, 'home'));
            document.getElementById('homeworkLink').addEventListener('click', showSection.bind(null, 'homework'));
            document.getElementById('aiLink').addEventListener('click', showSection.bind(null, 'ai'));
            document.getElementById('progressLink').addEventListener('click', showSection.bind(null, 'progress'));

            // Settings
            document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
            document.getElementById('printBtn').addEventListener('click', printPage);
            document.getElementById('shareBtn').addEventListener('click', sharePage);
            document.getElementById('pdfBtn').addEventListener('click', downloadPDF);
            document.getElementById('backupBtn').addEventListener('click', openBackupModal);
            document.getElementById('restoreBtn').addEventListener('click', openRestoreModal);
            document.getElementById('clearCacheBtn').addEventListener('click', openClearCacheModal);
            document.getElementById('installBtn').addEventListener('click', installApp);

            // Homework filters
            document.getElementById('filterAll').addEventListener('click', () => filterHomework('all'));
            document.getElementById('filterPending').addEventListener('click', () => filterHomework('pending'));
            document.getElementById('filterCompleted').addEventListener('click', () => filterHomework('completed'));

            // AI chat
            document.getElementById('sendBtn').addEventListener('click', sendChatMessage);
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });

            // Modals
            document.getElementById('aboutLink').addEventListener('click', () => showModal('aboutModal'));
            document.getElementById('privacyLink').addEventListener('click', () => showModal('privacyModal'));
            document.getElementById('termsLink').addEventListener('click', () => showModal('termsModal'));
            document.getElementById('contactLink').addEventListener('click', () => showModal('contactModal'));
            document.getElementById('contactForm').addEventListener('submit', handleContactSubmit);

            // Modal close buttons
            document.querySelectorAll('.modal-close, .modal').forEach(el => {
                el.addEventListener('click', function(e) {
                    if (e.target === this || e.target.classList.contains('modal-close')) {
                        closeModal(this.id || this.closest('.modal').id);
                    }
                });
            });

            // Backup and restore
            document.getElementById('downloadBackup').addEventListener('click', downloadBackup);
            document.getElementById('restoreData').addEventListener('click', restoreData);
            document.getElementById('confirmClearCache').addEventListener('click', clearCache);

            // Logout
            document.getElementById('logoutBtn').addEventListener('click', logout);

            // Menu toggle for mobile
            document.getElementById('menuToggle').addEventListener('click', toggleMobileMenu);

            // Scroll to top button
            document.getElementById('scrollTopBtn').addEventListener('click', scrollToTop);

            // Admin access (hidden feature)
            document.addEventListener('keydown', checkAdminAccess);

            // FAB scroll behavior
            window.addEventListener('scroll', toggleFAB);
        }

        // Show a specific section
        function showSection(section) {
            // Hide all sections
            document.getElementById('homeSection').classList.add('hidden');
            document.getElementById('homeworkSection').classList.add('hidden');
            document.getElementById('aiSection').classList.add('hidden');
            document.getElementById('progressSection').classList.add('hidden');

            // Show the requested section
            document.getElementById(section + 'Section').classList.remove('hidden');

            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.getElementById(section + 'Link').classList.add('active');

            // Close mobile menu if open
            closeMobileMenu();
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDark = document.body.hasAttribute('data-theme');
            if (isDark) {
                document.body.removeAttribute('data-theme');
                userData.settings.darkMode = false;
                document.getElementById('darkModeToggle').innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                    <span>Dark Mode</span>
                `;
            } else {
                document.body.setAttribute('data-theme', 'dark');
                userData.settings.darkMode = true;
                document.getElementById('darkModeToggle').innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><moon class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></moon></svg>
                    <span>Light Mode</span>
                `;
            }

            // Save settings
            saveData();
        }

        // Print the current page
        function printPage() {
            window.print();
        }

        // Share the page (if supported)
        function sharePage() {
            if (navigator.share) {
                navigator.share({
                    title: 'School Web #1 Dashboard',
                    text: 'Check out my student dashboard!',
                    url: window.location.href
                }).catch(err => {
                    console.error('Error sharing:', err);
                    showToast('Sharing failed', 'danger');
                });
            } else {
                // Fallback: copy URL to clipboard
                navigator.clipboard.writeText(window.location.href)
                    .then(() => {
                        showToast('Link copied to clipboard!', 'success');
                    })
                    .catch(err => {
                        console.error('Error copying link:', err);
                        showToast('Failed to copy link', 'danger');
                    });
            }
        }

        // Download as PDF (simulated)
        function downloadPDF() {
            showToast('PDF generation in progress...', 'info');
            setTimeout(() => {
                showToast('PDF downloaded successfully!', 'success');
            }, 2000);
        }

        // Open backup modal
        function openBackupModal() {
            showModal('backupModal');
        }

        // Download backup
        function downloadBackup() {
            const dataStr = JSON.stringify(userData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `school-web-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            closeModal('backupModal');
            showToast('Backup downloaded successfully!', 'success');
        }

        // Open restore modal
        function openRestoreModal() {
            showModal('restoreModal');
        }

        // Restore data from file
        function restoreData() {
            const fileInput = document.getElementById('restoreFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('Please select a file to restore', 'danger');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const restoredData = JSON.parse(e.target.result);
                    userData = { ...userData, ...restoredData };
                    saveData();
                    initUI();
                    closeModal('restoreModal');
                    fileInput.value = '';
                    showToast('Data restored successfully!', 'success');
                } catch (err) {
                    console.error('Error restoring ', err);
                    showToast('Invalid backup file', 'danger');
                }
            };
            reader.readAsText(file);
        }

        // Open clear cache modal
        function openClearCacheModal() {
            showModal('clearCacheModal');
        }

        // Clear all cache/data
        function clearCache() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                localStorage.removeItem('studentDashboard');
                localStorage.removeItem('name');
                localStorage.removeItem('cls');
                localStorage.removeItem('parent');
                
                // Reset user data
                userData = {
                    name: 'Student',
                    cls: '1',
                    parent: 'Parent',
                    homework: [],
                    progress: {
                        attendance: {
                            present: 0,
                            total: 100
                        },
                        subjects: {
                            math: 50,
                            science: 50,
                            english: 50,
                            history: 50,
                            art: 50
                        }
                    },
                    reminders: [],
                    achievements: [],
                    settings: {
                        darkMode: false,
                        notifications: true,
                        theme: 'default'
                    }
                };
                
                // Regenerate data
                generateHomework();
                userData.reminders = getRandomItems(reminders, 3);
                userData.achievements = achievements;
                
                // Save and update UI
                saveData();
                initUI();
                closeModal('clearCacheModal');
                showToast('All data cleared!', 'success');
            }
        }

        // Install PWA (if supported)
        function installApp() {
            // This would normally use the beforeinstallprompt event
            // For demo purposes, we'll just show a message
            showToast('App installation available! Click the browser menu and select "Install"', 'info');
        }

        // Check if app can be installed
        function checkInstallability() {
            // In a real app, we would listen for beforeinstallprompt
            // For now, we'll just update the button text
            const installBtn = document.getElementById('installBtn');
            installBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><download class="lucide lucide-download"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></download></svg>
                <span>Install App</span>
            `;
        }

        // Generate initial homework based on class
        function generateHomework() {
            const classNum = parseInt(userData.cls);
            const topics = homeworkTopics[classNum] || homeworkTopics[1];
            const selectedTopics = getRandomItems(topics, 8);
            
            const today = new Date();
            userData.homework = selectedTopics.map((topic, index) => ({
                id: Date.now() + index,
                emoji: topic.emoji,
                subject: topic.subject,
                topic: topic.topic,
                difficulty: topic.difficulty,
                dueDate: new Date(today.getTime() + (index + 1) * 2 * 24 * 60 * 60 * 1000), // Due in 2, 4, 6, etc. days
                completed: Math.random() > 0.7, // Randomly mark some as completed
                notes: ''
            }));
        }

        // Get random items from an array
        function getRandomItems(array, count) {
            const shuffled = [...array].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        // Render homework list
        function renderHomework() {
            const homeworkList = document.getElementById('homeworkList');
            const homeworkItems = document.getElementById('homeworkItems');
            
            // Clear existing content
            homeworkList.innerHTML = '';
            homeworkItems.innerHTML = '';
            
            if (userData.homework.length === 0) {
                homeworkList.innerHTML = '<p>No homework assigned yet.</p>';
                homeworkItems.innerHTML = '<p>No homework assigned yet.</p>';
                return;
            }
            
            // Sort homework by due date
            const sortedHomework = [...userData.homework].sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
            
            // Create home view (limited items)
            sortedHomework.slice(0, 3).forEach(hw => {
                const item = document.createElement('div');
                item.className = 'homework-item';
                item.innerHTML = `
                    <span class="homework-emoji">${hw.emoji}</span>
                    <span class="homework-title">${hw.topic}</span>
                    <span class="homework-due">${formatDateShort(hw.dueDate)}</span>
                    <span class="homework-status ${hw.completed ? 'completed' : 'pending'}"></span>
                `;
                homeworkList.appendChild(item);
            });
            
            // Create full list for homework section
            sortedHomework.forEach(hw => {
                const item = document.createElement('div');
                item.className = 'homework-item';
                item.innerHTML = `
                    <span class="homework-emoji">${hw.emoji}</span>
                    <div style="flex: 1;">
                        <div class="flex flex-between">
                            <strong>${hw.topic}</strong>
                            <span class="badge badge-${getDifficultyClass(hw.difficulty)}">${hw.difficulty}</span>
                        </div>
                        <div class="flex flex-between">
                            <small>${hw.subject}</small>
                            <small>Due: ${formatDate(hw.dueDate)}</small>
                        </div>
                    </div>
                    <button class="btn-icon ${hw.completed ? 'btn-success' : 'btn-outline'}" onclick="toggleHomeworkStatus(${hw.id})">
                        ${hw.completed ? 
                            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><check class="lucide lucide-check"><path d="M20 6 9 17l-5-5"></path></check></svg>' :
                            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><square class="lucide lucide-square"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></square></svg>'
                        }
                    </button>
                `;
                homeworkItems.appendChild(item);
            });
            
            // Update progress
            updateHomeworkProgress();
        }

        // Get CSS class for difficulty
        function getDifficultyClass(difficulty) {
            switch (difficulty.toLowerCase()) {
                case 'easy': return 'success';
                case 'medium': return 'warning';
                case 'hard': return 'danger';
                default: return 'secondary';
            }
        }

        // Toggle homework completion status
        function toggleHomeworkStatus(id) {
            const homework = userData.homework.find(h => h.id === id);
            if (homework) {
                homework.completed = !homework.completed;
                saveData();
                renderHomework();
                showToast(`Homework ${homework.completed ? 'completed' : 'marked as pending'}!`, homework.completed ? 'success' : 'info');
            }
        }

        // Filter homework
        function filterHomework(filter) {
            const homeworkItems = document.getElementById('homeworkItems');
            homeworkItems.innerHTML = '';
            
            let filteredHomework = userData.homework;
            
            if (filter === 'pending') {
                filteredHomework = userData.homework.filter(h => !h.completed);
            } else if (filter === 'completed') {
                filteredHomework = userData.homework.filter(h => h.completed);
            }
            
            // Sort by due date
            filteredHomework.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
            
            // Apply filter buttons
            document.querySelectorAll('#filterAll, #filterPending, #filterCompleted').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-outline');
            });
            
            document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1)}`).classList.remove('btn-outline');
            document.getElementById(`filter${filter.charAt(0).toUpperCase() + filter.slice(1)}`).classList.add('btn-primary');
            
            // Render filtered homework
            filteredHomework.forEach(hw => {
                const item = document.createElement('div');
                item.className = 'homework-item';
                item.innerHTML = `
                    <span class="homework-emoji">${hw.emoji}</span>
                    <div style="flex: 1;">
                        <div class="flex flex-between">
                            <strong>${hw.topic}</strong>
                            <span class="badge badge-${getDifficultyClass(hw.difficulty)}">${hw.difficulty}</span>
                        </div>
                        <div class="flex flex-between">
                            <small>${hw.subject}</small>
                            <small>Due: ${formatDate(hw.dueDate)}</small>
                        </div>
                    </div>
                    <button class="btn-icon ${hw.completed ? 'btn-success' : 'btn-outline'}" onclick="toggleHomeworkStatus(${hw.id})">
                        ${hw.completed ? 
                            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><check class="lucide lucide-check"><path d="M20 6 9 17l-5-5"></path></check></svg>' :
                            '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><square class="lucide lucide-square"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></square></svg>'
                        }
                    </button>
                `;
                homeworkItems.appendChild(item);
            });
        }

        // Update homework progress
        function updateHomeworkProgress() {
            const total = userData.homework.length;
            const completed = userData.homework.filter(h => h.completed).length;
            const percent = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            document.getElementById('homeworkProgress').style.width = `${percent}%`;
            document.getElementById('homeworkStats').textContent = `${completed}/${total} completed`;
        }

        // Render schedule
        function renderSchedule() {
            const scheduleList = document.getElementById('scheduleList');
            scheduleList.innerHTML = '';
            
            const classNum = parseInt(userData.cls);
            const classSchedule = schedules[classNum] || schedules[1];
            
            classSchedule.forEach(item => {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'homework-item';
                scheduleItem.innerHTML = `
                    <span class="homework-emoji">${item.emoji}</span>
                    <span class="homework-title">${item.subject}</span>
                    <span class="homework-due">${item.time}</span>
                `;
                scheduleList.appendChild(scheduleItem);
            });
        }

        // Render reminders
        function renderReminders() {
            const remindersList = document.getElementById('remindersList');
            remindersList.innerHTML = '';
            
            userData.reminders.forEach(reminder => {
                const li = document.createElement('li');
                li.className = `alert alert-${reminder.type} mb-2`;
                li.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    <span>${reminder.emoji} ${reminder.text}</span>
                `;
                remindersList.appendChild(li);
            });
        }

        // Render achievements
        function renderAchievements() {
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = '';
            
            const unlocked = userData.achievements.filter(a => a.unlocked);
            const locked = userData.achievements.filter(a => !a.unlocked);
            
            if (unlocked.length > 0) {
                const unlockedDiv = document.createElement('div');
                unlockedDiv.innerHTML = '<h4>üèÜ Unlocked</h4>';
                unlocked.forEach(achievement => {
                    const item = document.createElement('div');
                    item.className = 'flex flex-align-center mb-2';
                    item.innerHTML = `
                        <span style="font-size: 1.5rem; margin-right: 0.5rem;">${achievement.emoji}</span>
                        <div>
                            <strong>${achievement.name}</strong>
                            <div class="fs-sm">${achievement.description}</div>
                        </div>
                    `;
                    unlockedDiv.appendChild(item);
                });
                achievementsList.appendChild(unlockedDiv);
            }
            
            if (locked.length > 0) {
                const lockedDiv = document.createElement('div');
                lockedDiv.innerHTML = '<h4 class="mt-3">üîí Locked</h4>';
                locked.forEach(achievement => {
                    const item = document.createElement('div');
                    item.className = 'flex flex-align-center mb-2 text-muted';
                    item.innerHTML = `
                        <span style="font-size: 1.5rem; margin-right: 0.5rem; opacity: 0.5;">${achievement.emoji}</span>
                        <div>
                            <strong>${achievement.name}</strong>
                            <div class="fs-sm">${achievement.description}</div>
                        </div>
                    `;
                    lockedDiv.appendChild(item);
                });
                achievementsList.appendChild(lockedDiv);
            }
        }

        // Render goals
        function renderGoals() {
            const goalsList = document.getElementById('goalsList');
            goalsList.innerHTML = '';
            
            goals.forEach(goal => {
                const progress = Math.min(100, Math.round((goal.current / goal.target) * 100));
                const item = document.createElement('div');
                item.className = 'mb-3';
                item.innerHTML = `
                    <div class="flex flex-between mb-1">
                        <strong>${goal.emoji} ${goal.title}</strong>
                        <span>${goal.current}/${goal.target} ${goal.unit}</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar" style="width: ${progress}%"></div>
                    </div>
                    <div class="text-right fs-sm mt-1">${progress}% complete</div>
                `;
                goalsList.appendChild(item);
            });
        }

        // Render progress chart
        function renderProgressChart() {
            // This would normally use a charting library
            // For demo purposes, we'll just create a simple visualization
            const ctx = document.getElementById('performanceChart');
            if (!ctx) return;
            
            // In a real app, we would use Chart.js or similar
            // For now, we'll just show a message
            ctx.parentElement.innerHTML = `
                <div class="text-center p-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><bar-chart-2 class="lucide lucide-bar-chart-2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></bar-chart-2></svg>
                    <p class="mt-2">Performance chart would appear here</p>
                    <p class="fs-sm text-muted">Math: ${userData.progress.subjects.math}%, Science: ${userData.progress.subjects.science}%, English: ${userData.progress.subjects.english}%</p>
                </div>
            `;
        }

        // Update attendance display
        function updateAttendance() {
            const percent = Math.round((userData.progress.attendance.present / userData.progress.attendance.total) * 100);
            document.getElementById('attendanceBar').style.width = `${percent}%`;
            document.getElementById('attendancePercent').textContent = percent;
            document.getElementById('attendanceDays').textContent = userData.progress.attendance.present;
            document.getElementById('totalDays').textContent = userData.progress.attendance.total;
        }

        // Send chat message to AI
        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addChatMessage(message, 'user');
            input.value = '';
            
            // Show typing indicator
            const typing = document.createElement('div');
            typing.className = 'message ai';
            typing.innerHTML = 'üß† Thinking...';
            document.getElementById('chatMessages').appendChild(typing);
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
            
            // Simulate AI response (in a real app, this would call the Gemini API)
            setTimeout(() => {
                // Remove typing indicator
                document.getElementById('chatMessages').removeChild(typing);
                
                // Generate AI response
                const response = generateAIResponse(message);
                addChatMessage(response, 'ai');
                
                // Save conversation (for demo purposes)
                saveData();
            }, 1000 + Math.random() * 2000);
        }

        // Add a message to the chat
        function addChatMessage(text, sender) {
            const messages = document.getElementById('chatMessages');
            const message = document.createElement('div');
            message.className = `message ${sender}`;
            message.textContent = text;
            messages.appendChild(message);
            messages.scrollTop = messages.scrollHeight;
        }

        // Generate AI response (simulated)
        function generateAIResponse(message) {
            const lowerMsg = message.toLowerCase();
            
            // Simple response logic
            if (lowerMsg.includes('homework') || lowerMsg.includes('assignment')) {
                return `I can help you with your homework! üìö Based on your class (${userData.cls}), you might have assignments in math, science, or English. Check your homework list for specific tasks. Remember to manage your time and ask for help if needed!`;
            } else if (lowerMsg.includes('math') || lowerMsg.includes('calculate')) {
                return `Math is important for developing problem-solving skills! üßÆ For your class (${userData.cls}), focus on understanding concepts rather than just memorizing formulas. Practice regularly and don't hesitate to ask your teacher for clarification on topics you find challenging.`;
            } else if (lowerMsg.includes('science') || lowerMsg.includes('experiment')) {
                return `Science is all about curiosity and discovery! üî¨ For your grade level (${userData.cls}), you're probably learning about basic scientific principles through hands-on experiments. Remember the scientific method: ask questions, form hypotheses, conduct experiments, and analyze results.`;
            } else if (lowerMsg.includes('read') || lowerMsg.includes('book') || lowerMsg.includes('reading')) {
                return `Reading is a gateway to knowledge and imagination! üìñ For your class (${userData.cls}), try to read a variety of materials - fiction, non-fiction, and articles. This will improve your vocabulary and comprehension skills. Set aside dedicated time for reading each day.`;
            } else if (lowerMsg.includes('help')) {
                return `I'm here to help with your studies! ü§ì I can provide explanations, suggest study strategies, and help you understand difficult concepts. Just let me know what subject or topic you need assistance with, and I'll do my best to support your learning.`;
            } else if (lowerMsg.includes('thank')) {
                return `You're very welcome! üòä I'm glad I could help. Remember, learning is a journey, and I'm here to support you every step of the way. Keep up the great work!`;
            } else if (lowerMsg.includes('who') && lowerMsg.includes('you')) {
                return `I'm your AI Homework Assistant, created to help students like you succeed in school! ü§ñ I can provide explanations, study tips, and encouragement. I'm specifically designed to assist with academic topics while maintaining a safe, educational environment.`;
            } else {
                // Default response with educational focus
                const responses = [
                    `That's an interesting question! ü§î As a student in class ${userData.cls}, it's great that you're thinking deeply about your education. Keep asking questions - that's how we learn!`,
                    `I appreciate your curiosity! üåü Learning is a continuous process, and every question you ask helps build your knowledge. Keep up the excellent work!`,
                    `Great question! üéØ As you progress through school, these types of inquiries will help you develop critical thinking skills. I'm here to support your academic journey.`,
                    `That's a thoughtful question! üí° Education is about more than just memorizing facts - it's about understanding concepts and applying them. Keep exploring!`,
                    `I'm impressed by your question! üå± As a student, your curiosity will serve you well. Remember that every expert was once a beginner, so keep learning and growing!`
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        // Show modal
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        // Handle contact form submission
        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value;
            
            // In a real app, this would send to a server
            // For demo, we'll just show a success message
            showToast('Message sent successfully! We will contact you soon.', 'success');
            document.getElementById('contactForm').reset();
            closeModal('contactModal');
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                // Clear session data
                localStorage.removeItem('name');
                localStorage.removeItem('cls');
                localStorage.removeItem('parent');
                
                // Redirect to login
                window.location.href = 'index.html';
            }
        }

        // Toggle mobile menu
        function toggleMobileMenu() {
            document.getElementById('navbarNav').classList.toggle('show');
        }

        // Close mobile menu
        function closeMobileMenu() {
            document.getElementById('navbarNav').classList.remove('show');
        }

        // Toggle FAB based on scroll position
        function toggleFAB() {
            const fab = document.getElementById('scrollTopBtn');
            if (window.pageYOffset > 300) {
                fab.classList.add('show');
            } else {
                fab.classList.remove('show');
            }
        }

        // Scroll to top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Update online status display
        function updateOnlineStatus() {
            const banner = document.getElementById('offlineBanner');
            if (navigator.onLine) {
                banner.classList.remove('show');
            } else {
                banner.classList.add('show');
            }
        }

        // Check for admin access (hidden feature)
        function checkAdminAccess(e) {
            // Check for specific key combination or password
            if (e.ctrlKey && e.altKey && e.key === 'a') {
                showModal('adminModal');
                e.preventDefault();
            }
        }

        // Admin login
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'Abutalha') {
                closeModal('adminModal');
                // In a real app, this would redirect to admin.html
                // For demo, we'll just show a message
                showToast('Admin access granted! Redirecting...', 'success');
                setTimeout(() => {
                    alert('Admin panel would open here in a real application.');
                }, 1000);
            } else {
                showToast('Incorrect password!', 'danger');
            }
            document.getElementById('adminPassword').value = '';
        }

        // Format date as "Month Day, Year"
        function formatDate(date) {
            return new Date(date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // Format date as "M/D" for short display
        function formatDateShort(date) {
            return new Date(date).toLocaleDateString('en-US', {
                month: 'numeric',
                day: 'numeric'
            });
        }

        // Toast notification
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const title = document.getElementById('toastTitle');
            const body = document.getElementById('toastBody');
            
            // Set content
            title.textContent = type.charAt(0).toUpperCase() + type.slice(1);
            body.textContent = message;
            
            // Set type
            toast.className = 'toast';
            toast.classList.add(type);
            
            // Show
            toast.classList.add('show');
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Close toast
        document.getElementById('toastClose').addEventListener('click', function() {
            document.getElementById('toast').classList.remove('show');
        });

        // Service Worker for offline caching
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('SW registered: ', registration);
                }).catch(registrationError => {
                    console.log('SW registration failed: ', registrationError);
                });
            });
        }

        // Create a placeholder service worker
        const swScript = `
            const CACHE_NAME = 'school-web-v1';
            const urlsToCache = [
                '/',
                '/index.html',
                '/dashboard.html'
            ];

            self.addEventListener('install', event => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then(cache => {
                            return cache.addAll(urlsToCache);
                        })
                );
            });

            self.addEventListener('fetch', event => {
                event.respondWith(
                    caches.match(event.request)
                        .then(response => {
                            if (response) {
                                return response;
                            }
                            return fetch(event.request);
                        })
                );
            });
        `;

        // In a real app, this would be a separate file
        // For demo purposes, we'll just log it
        console.log('Service worker script:', swScript);

        // Make functions available globally
        window.toggleHomeworkStatus = toggleHomeworkStatus;
        window.sendChatMessage = sendChatMessage;
        window.showModal = showModal;
        window.closeModal = closeModal;
        window.logout = logout;
        window.toggleMobileMenu = toggleMobileMenu;
        window.scrollToTop = scrollToTop;
        window.adminLogin = adminLogin;
    </script>
</body>
</html>
