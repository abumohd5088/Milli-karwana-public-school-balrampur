<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dashboard | School Web #1</title>
    <meta name="theme-color" content="#0d6efd">
    <style>
        :root{--p:#0d6efd;--s:#6c757d;--l:#f8f9fa;--d:#212529;--a:#ffc107;--bg:#fff;--card:#f8f3ff;}
        .dark{--bg:#121212;--card:#1e1e1e;--d:#f1f3f5;}
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
        body{background:var(--bg);color:var(--d);transition:.3s}
        .navbar{display:flex;justify-content:space-between;align-items:center;background:var(--p);color:#fff;padding:12px 20px;font-weight:600}
        .toggle{background:none;border:none;color:#fff;font-size:1.3em}
        .container{padding:15px;max-width:600px;margin:auto}
        .card{background:var(--card);border-radius:12px;padding:15px;margin-bottom:15px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
        h2{font-size:1.2em;margin-bottom:10px}
        ul{list-style:none}
        li{margin:8px 0}
        .chatBox{height:180px;overflow-y:auto;border:1px solid #ccc;border-radius:8px;padding:8px;background:#fff;color:#000;font-size:.85em;margin-bottom:8px}
        .chatInput{display:flex;gap:5px}
        .chatInput input{flex:1;padding:8px;border:1px solid #ccc;border-radius:8px}
        .chatInput button{padding:8px 12px;background:var(--p);color:#fff;border:none;border-radius:8px;font-weight:bold}
        footer{text-align:center;padding:15px;background:var(--l);color:var(--s);font-size:.8em;margin-top:30px}
        @media(max-width:500px){.navbar{font-size:1em}}
    </style>
</head>
<body>
    <nav class="navbar">
        <span>üè´ Dashboard ‚Äì Class <span id="clsSpan"></span></span>
        <button class="toggle" onclick="toggleDark()">üåô</button>
    </nav>

    <div class="container">
        <!-- Welcome -->
        <div class="card">
            <h2>Hi <span id="nameSpan"></span> üëã</h2>
            <button onclick="logout()">Logout</button>
        </div>

        <!-- Homework -->
        <div class="card">
            <h2>üìö Homework</h2>
            <ul id="hwList"></ul>
        </div>

        <!-- AI (only homework) -->
        <div class="card">
            <h2>ü§ñ Homework Helper</h2>
            <div class="chatBox" id="chatBox"></div>
            <div class="chatInput">
                <input id="chatIn" placeholder="Ask about homework‚Ä¶"/>
                <button onclick="askAI()">Send</button>
            </div>
        </div>
    </div>

    <footer>¬© 2025 School Web #1 ‚Äì Professional & Mobile Ready</footer>

<script>
/* ---------- CONFIG ---------- */
const API_KEY = "AIzaSyCdzFBQ1KVgBfmmjSgHJJwcuLbqne9VjUs";
const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

/* ---------- AUTH ---------- */
if(!localStorage.getItem('name')) location.href='index.html';
const cls = localStorage.getItem('cls');
const name = localStorage.getItem('name');
document.getElementById('clsSpan').innerText = cls;
document.getElementById('nameSpan').innerText = name;

/* ---------- DARK MODE ---------- */
function toggleDark(){
    document.body.classList.toggle('dark');
    localStorage.setItem('dark',document.body.classList.contains('dark'));
}
if(localStorage.getItem('dark')==='true') document.body.classList.add('dark');

/* ---------- CLASS-WISE HOMEWORK ---------- */
const homeworkDB = {
    "1": ["Math ‚Äì Count 1-50", "English ‚Äì A-Z writing"],
    "2": ["Math ‚Äì Tables 2-5", "EVS ‚Äì My Family worksheet"],
    "3": ["Math ‚Äì Addition 3-digit", "English ‚Äì Story reading"],
    "4": ["Math ‚Äì Long division", "Science ‚Äì Plant parts diagram"],
    "5": ["Math ‚Äì Fraction basics", "English ‚Äì Paragraph writing"],
    "6": ["Math ‚Äì Algebra intro", "Science ‚Äì Light reflection"],
    "7": ["Math ‚Äì Simple equations", "History ‚Äì Delhi Sultanate"],
    "8": ["Math ‚Äì Rational numbers", "Physics ‚Äì Force & pressure"],
    "9": ["Math ‚Äì Polynomials", "Chemistry ‚Äì Matter notes"],
    "10": ["Math ‚Äì Quadratic equations", "Physics ‚Äì Electricity derivations"],
    "11": ["Math ‚Äì Sets & functions", "Chemistry ‚Äì Mole concept"],
    "12": ["Math ‚Äì Relations & functions", "Physics ‚Äì Electrostatics problems"]
};
document.getElementById('hwList').innerHTML = homeworkDB[cls].map(h=>`<li>${h}</li>`).join('');

/* ---------- AI HOMEWORK CHAT ---------- */
async function askAI(){
    const msg = document.getElementById('chatIn').value.trim();
    if(!msg) return;
    const box=document.getElementById('chatBox');
    box.innerHTML+=`<div><b>You:</b> ${msg}</div>`;
    document.getElementById('chatIn').value='';
    const prompt=`Class ${cls} student: ${msg}. Reply only about homework, short & clear.`;
    try{
        const res=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:prompt}]}]})});
        const data=await res.json();
        const reply=data.candidates?.[0]?.content?.parts?.[0]?.text||'No reply';
        box.innerHTML+=`<div><b>AI:</b> ${reply}</div>`;
        box.scrollTop=box.scrollHeight;
    }catch(e){box.innerHTML+=`<div><b>Error:</b> Check internet</div>`;}
}

/* ---------- LOGOUT ---------- */
function logout(){
    localStorage.clear();
    location.href='index.html';
}
</script>
</body>
</html>
