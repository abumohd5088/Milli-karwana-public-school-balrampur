<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Teacher Control Panel â€“ MKPS</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <style>
    :root{--p:#667eea;--s:#764ba2;--bg:#f5f7fa;--c:#fff;--t:#333;--m:#777}
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
    body{background:var(--bg);color:var(--t)}
    .header{background:linear-gradient(135deg,var(--p),var(--s));color:#fff;padding:18px 20px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000}
    .header h2{font-size:20px}
    .logout{background:rgba(255,255,255,.25);border:none;color:#fff;border-radius:20px;padding:6px 12px;font-size:12px}
    .section{margin:20px 0}
    .section-title{padding:0 20px 10px;font-size:18px;font-weight:600}
    .form-card{background:var(--c);border-radius:18px;padding:20px;margin:0 20px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
    .form-card label{font-size:14px;margin-bottom:4px;display:block}
    .form-card input,select,textarea{width:100%;padding:12px;margin:6px 0;border:1px solid #ddd;border-radius:10px;font-size:14px}
    .btn{background:var(--p);color:#fff;border:none;padding:14px;border-radius:12px;width:100%;cursor:pointer;font-size:16px}
    .list-card{background:var(--c);border-radius:18px;padding:16px;margin:10px 20px;box-shadow:0 2px 10px rgba(0,0,0,.08)}
    .list-card h4{margin-bottom:6px}
    .list-card small{color:var(--m)}
    .bottom-nav{position:fixed;bottom:0;left:0;right:0;background:var(--c);display:flex;border-top:1px solid #eee;height:58px}
    .nav-item{flex:1;text-align:center;padding-top:6px;font-size:10px;color:var(--m);cursor:pointer}
    .nav-item.active{color:var(--p)}
  </style>
</head>
<body>

<header>
  <h2><i class="fas fa-chalkboard-teacher"></i> Teacher Panel</h2>
  <button class="logout" onclick="logout()"><i class="fas fa-sign-out-alt"></i></button>
</header>

<!-- Add Homework -->
<section class="section">
  <div class="section-title"><i class="fas fa-book"></i> Add Homework</div>
  <div class="form-card">
    <label>Class</label>
    <select id="hwClass">
      <option>Nursery</option><option>LKG</option><option>UKG</option>
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option>
    </select>
    <label>Subject</label>
    <input id="hwSub" placeholder="e.g. Math">
    <label>Description</label>
    <textarea id="hwDesc" rows="2" placeholder="e.g. Solve 20 sums"></textarea>
    <button class="btn" onclick="addHW()">Add Homework</button>
  </div>
</section>

<!-- Add Note -->
<section class="section">
  <div class="section-title"><i class="fas fa-sticky-note"></i> Add Note</div>
  <div class="form-card">
    <label>Class</label>
    <select id="noteClass">
      <option>Nursery</option><option>LKG</option><option>UKG</option>
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option>
    </select>
    <label>Title</label>
    <input id="noteTitle" placeholder="e.g. Fraction Basics">
    <label>Content</label>
    <textarea id="noteContent" rows="2" placeholder="e.g. Numerator/Denominator"></textarea>
    <button class="btn" onclick="addNote()">Add Note</button>
  </div>
</section>

<!-- Add Timetable -->
<section class="section">
  <div class="section-title"><i class="fas fa-calendar-alt"></i> Add Timetable</div>
  <div class="form-card">
    <label>Class</label>
    <select id="ttClass">
      <option>Nursery</option><option>LKG</option><option>UKG</option>
      <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option>
    </select>
    <label>Time</label>
    <input id="ttTime" placeholder="e.g. 08:30-09:15">
    <input id="ttMon" placeholder="Monday">
    <input id="ttTue" placeholder="Tuesday">
    <input id="ttWed" placeholder="Wednesday">
    <input id="ttThu" placeholder="Thursday">
    <input id="ttFri" placeholder="Friday">
    <button class="btn" onclick="addTT()">Add Timetable</button>
  </div>
</section>

<!-- Add Announcement -->
<section class="section">
  <div class="section-title"><i class="fas fa-bullhorn"></i> Announcement</div>
  <div class="form-card">
    <label>Title</label>
    <input id="annTitle" placeholder="e.g. Holiday">
    <label>Message</label>
    <textarea id="annMsg" rows="2" placeholder="e.g. Tomorrow is holiday"></textarea>
    <button class="btn" onclick="addAnnouncement()">Post</button>
  </div>
</section>

<!-- Bottom Nav -->
<nav class="bottom-nav">
  <div class="nav-item active"><i class="fas fa-home"></i><br>Home</div>
  <div class="nav-item" onclick="showSection('students')"><i class="fas fa-users"></i><br>Students</div>
  <div class="nav-item" onclick="showSection('reports')"><i class="fas fa-chart-bar"></i><br>Reports</div>
</nav>

<script>
  firebase.initializeApp({
    apiKey:"AIzaSyB0fHtqeoerlckQ2RXx_VC86cZz_BJaIIU",
    authDomain:"mkps-balrampur.firebaseapp.com",
    projectId:"mkps-balrampur"
  });
  const db=firebase.firestore();

  if(localStorage.getItem('role')!=='teacher')location.href='index.html';
  document.title='Teacher Panel';

  async function addHW(){
    await db.collection('homework').add({
      class:document.getElementById('hwClass').value,
      subject:document.getElementById('hwSub').value,
      desc:document.getElementById('hwDesc').value,
      date:new Date(),
      status:'pending'
    });
    alert('Homework added');
  }
  async function addNote(){
    await db.collection('notes').add({
      class:document.getElementById('noteClass').value,
      title:document.getElementById('noteTitle').value,
      content:document.getElementById('noteContent').value,
      createdAt:new Date()
    });
    alert('Note added');
  }
  async function addTT(){
    await db.collection('timetable').add({
      class:document.getElementById('ttClass').value,
      time:document.getElementById('ttTime').value,
      Mon:document.getElementById('ttMon').value,
      Tue:document.getElementById('ttTue').value,
      Wed:document.getElementById('ttWed').value,
      Thu:document.getElementById('ttThu').value,
      Fri:document.getElementById('ttFri').value
    });
    alert('Timetable added');
  }
  async function addAnnouncement(){
    await db.collection('announcements').add({
      title:document.getElementById('annTitle').value,
      message:document.getElementById('annMsg').value,
      date:new Date()
    });
    alert('Announcement posted');
  }
  function showSection(sec){alert(sec+' section coming soon!');}
  function logout(){localStorage.clear();location.href='index.html';}
</script>
</body>
</html>
