<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Admin Panel - Springfield India</title>
    <link rel="stylesheet" href="css/ultra-pro.css">
    <link rel="icon" href="images/favicon.ico">
</head>
<body>
    <!-- 1. Admin Login with Security -->
    <div class="admin-login-screen" id="adminLoginScreen">
        <div class="login-form">
            <h1>ğŸ” Admin Access</h1>
            <p class="subtitle">Springfield India School Management</p>
            <form id="adminLoginForm">
                <div class="input-group">
                    <label for="adminPassword">Enter Password</label>
                    <div class="input-wrapper">
                        <input type="password" id="adminPassword" placeholder="Password: Abutalha" required>
                        <span class="input-icon">ğŸ”’</span>
                        <button type="button" class="toggle-password" onclick="togglePassword()">ğŸ‘ï¸</button>
                    </div>
                </div>
                <!-- 2. Biometric Login -->
                <button type="submit" class="btn-primary">
                    <span>Access Dashboard</span>
                </button>
                <button class="btn-secondary" onclick="biometricLogin()">ğŸ”“ Biometric Login</button>
            </form>
            <button class="back-btn" onclick="window.location.href='index.html'">
                â† Back to Student Login
            </button>
            <div class="security-info">
                <small>ğŸ”’ Encrypted Connection â€¢ SSL Secured</small>
            </div>
        </div>
    </div>

    <!-- 3. Admin Dashboard -->
    <div class="admin-dashboard" id="adminDashboard" style="display: none;">
        <!-- 4. Real-time Stats -->
        <header class="admin-header">
            <h1>ğŸ“Š Admin Dashboard</h1>
            <div class="header-actions">
                <button class="sync-btn" onclick="syncData()">ğŸ”„ Sync</button>
                <button class="backup-btn" onclick="backupData()">ğŸ’¾ Backup</button>
                <button class="logout-btn" onclick="logoutAdmin()">ğŸšª Logout</button>
            </div>
        </header>

        <!-- 5. Live Statistics -->
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon">ğŸ‘¥</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalStudents">0</div>
                    <div class="stat-label">Active Students</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalHomework">0</div>
                    <div class="stat-label">Homework Items</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“–</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalNotes">0</div>
                    <div class="stat-label">Study Notes</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-info">
                    <div class="stat-number" id="totalResults">0</div>
                    <div class="stat-label">Results</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“ˆ</div>
                <div class="stat-info">
                    <div class="stat-number" id="todayActivity">0</div>
                    <div class="stat-label">Today's Activity</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ¯</div>
                <div class="stat-info">
                    <div class="stat-number" id="completionRate">0%</div>
                    <div class="stat-label">Completion Rate</div>
                </div>
            </div>
        </div>

        <!-- 6. Advanced Navigation -->
        <nav class="admin-nav">
            <button class="admin-nav-item active" data-tab="homework">
                <span>ğŸ“</span>
                <span>Homework</span>
                <span class="nav-counter">0</span>
            </button>
            <button class="admin-nav-item" data-tab="notes">
                <span>ğŸ“–</span>
                <span>Notes</span>
                <span class="nav-counter">0</span>
            </button>
            <button class="admin-nav-item" data-tab="timetable">
                <span>â°</span>
                <span>Timetable</span>
            </button>
            <button class="admin-nav-item" data-tab="results">
                <span>ğŸ“Š</span>
                <span>Results</span>
            </button>
            <button class="admin-nav-item" data-tab="analytics">
                <span>ğŸ“ˆ</span>
                <span>Analytics</span>
            </button>
            <button class="admin-nav-item" data-tab="settings">
                <span>âš™ï¸</span>
                <span>Settings</span>
            </button>
        </nav>

        <!-- 7. Main Admin Content -->
        <main class="admin-main">
            <!-- Homework Management -->
            <section class="admin-tab active" id="admin-homework">
                <div class="admin-section">
                    <div class="section-header">
                        <h2>â• Add New Homework</h2>
                        <button class="bulk-upload-btn" onclick="bulkUpload('homework')">ğŸ“¤ Bulk Upload</button>
                    </div>
                    <form class="admin-form" id="addHomeworkForm">
                        <div class="form-row">
                            <select id="hwClass" required>
                                <option value="">ğŸ“š Select Class</option>
                                ${Array.from({length: 12}, (_, i) => `<option value="${i+1}">Class ${i+1}</option>`).join('')}
                            </select>
                            <select id="hwSubject" required>
                                <option value="">ğŸ¯ Select Subject</option>
                                <option value="Math">ğŸ“ Mathematics</option>
                                <option value="English">ğŸ“š English</option>
                                <option value="Science">ğŸ”¬ Science</option>
                                <option value="Hindi">ğŸ•‰ï¸ Hindi</option>
                                <option value="Social">ğŸŒ Social Science</option>
                                <option value="EVS">ğŸŒ± Environmental Studies</option>
                                <option value="Computer">ğŸ’» Computer Science</option>
                                <option value="Sanskrit">ğŸ“¿ Sanskrit</option>
                            </select>
                        </div>
                        <textarea id="hwDescription" placeholder="âœï¸ Enter homework description..." required></textarea>
                        <div class="form-row">
                            <input type="date" id="hwDueDate" required>
                            <select id="hwPriority">
                                <option value="low">Low Priority</option>
                                <option value="medium">Medium Priority</option>
                                <option value="high">High Priority</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary">ğŸ“¤ Add Homework</button>
                        <button type="button" class="btn-secondary" onclick="scheduleHomework()">â° Schedule</button>
                    </form>

                    <div class="section-header">
                        <h2>ğŸ“‹ Manage Homework</h2>
                        <div class="table-tools">
                            <button onclick="exportData('homework')">ğŸ“¥ Export</button>
                            <button onclick="importData('homework')">ğŸ“¤ Import</button>
                            <button onclick="filterData('homework')">ğŸ” Filter</button>
                        </div>
                    </div>
                    <div class="data-table" id="homeworkTable"></div>
                </div>
            </section>

            <!-- Notes Management -->
            <section class="admin-tab" id="admin-notes">
                <div class="admin-section">
                    <div class="section-header">
                        <h2>â• Add New Notes</h2>
                        <button class="rich-editor-btn" onclick="openRichEditor()">ğŸ–Šï¸ Rich Editor</button>
                    </div>
                    <form class="admin-form" id="addNotesForm">
                        <div class="form-row">
                            <select id="notesClass" required>
                                <option value="">ğŸ“š Select Class</option>
                                ${Array.from({length: 12}, (_, i) => `<option value="${i+1}">Class ${i+1}</option>`).join('')}
                            </select>
                            <select id="notesSubject" required>
                                <option value="">ğŸ¯ Select Subject</option>
                                <option value="Math">ğŸ“ Mathematics</option>
                                <option value="English">ğŸ“š English</option>
                                <option value="Science">ğŸ”¬ Science</option>
                                <option value="Hindi">ğŸ•‰ï¸ Hindi</option>
                                <option value="Social">ğŸŒ Social Science</option>
                                <option value="EVS">ğŸŒ± Environmental Studies</option>
                                <option value="Computer">ğŸ’» Computer Science</option>
                                <option value="Sanskrit">ğŸ“¿ Sanskrit</option>
                            </select>
                        </div>
                        <input type="text" id="notesTitle" placeholder="ğŸ“ Note title..." required>
                        <textarea id="notesContent" placeholder="âœï¸ Note content..." required></textarea>
                        <div class="form-row">
                            <input type="file" id="notesAttachment" accept="image/*,pdf/*">
                            <select id="notesVisibility">
                                <option value="public">Public</option>
                                <option value="class">Class Only</option>
                                <option value="private">Private</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-primary">ğŸ“¤ Add Notes</button>
                    </form>

                    <div class="section-header">
                        <h2>ğŸ“‹ Manage Notes</h2>
                        <div class="table-tools">
                            <button onclick="bulkActions('notes')">âš¡ Bulk Actions</button>
                            <button onclick="archiveNotes()">ğŸ“¦ Archive</button>
                        </div>
                    </div>
                    <div class="data-table" id="notesTable"></div>
                </div>
            </section>

            <!-- Timetable Management -->
            <section class="admin-tab" id="admin-timetable">
                <div class="admin-section">
                    <div class="section-header">
                        <h2>ğŸ• Class Timetable</h2>
                        <button class="template-btn" onclick="applyTemplate()">ğŸ“‹ Apply Template</button>
                    </div>
                    <form class="admin-form" id="timetableForm">
                        <select id="ttClass" required>
                            <option value="">ğŸ“š Select Class</option>
                            ${Array.from({length: 12}, (_, i) => `<option value="${i+1}">Class ${i+1}</option>`).join('')}
                        </select>
                        
                        <div class="timetable-grid">
                            ${Array.from({length: 6}, (_, i) => `
                                <div class="period-input">
                                    <label>Period ${i+1}</label>
                                    <input type="text" id="period${i+1}" placeholder="Enter subject">
                                    <input type="time" id="time${i+1}" placeholder="Start time">
                                </div>
                            `).join('')}
                        </div>
                        
                        <button type="submit" class="btn-primary">ğŸ’¾ Save Timetable</button>
                        <button type="button" class="btn-secondary" onclick="generateTemplate()">ğŸ¨ Generate Template</button>
                    </form>
                </div>
            </section>

            <!-- Results Management -->
            <section class="admin-tab" id="admin-results">
                <div class="admin-section">
                    <div class="section-header">
                        <h2>ğŸ“Š Student Results</h2>
                        <button class="import-btn" onclick="importResults()">ğŸ“Š Import CSV</button>
                    </div>
                    <form class="admin-form" id="resultsForm">
                        <div class="form-row">
                            <select id="resultClass" required>
                                <option value="">ğŸ“š Select Class</option>
                                ${Array.from({length: 12}, (_, i) => `<option value="${i+1}">Class ${i+1}</option>`).join('')}
                            </select>
                            <input type="text" id="resultStudent" placeholder="ğŸ‘¤ Student Name" required>
                        </div>
                        
                        <div class="marks-grid">
                            <div class="mark-input">
                                <label>ğŸ“ Math</label>
                                <input type="number" min="0" max="100" id="mathMarks" placeholder="0-100">
                                <input type="text" id="mathGrade" placeholder="Grade" readonly>
                            </div>
                            <div class="mark-input">
                                <label>ğŸ“š English</label>
                                <input type="number" min="0" max="100" id="englishMarks" placeholder="0-100">
                                <input type="text" id="englishGrade" placeholder="Grade" readonly>
                            </div>
                            <div class="mark-input">
                                <label>ğŸ”¬ Science</label>
                                <input type="number" min="0" max="100" id="scienceMarks" placeholder="0-100">
                                <input type="text" id="scienceGrade" placeholder="Grade" readonly>
                            </div>
                            <div class="mark-input">
                                <label>ğŸ•‰ï¸ Hindi</label>
                                <input type="number" min="0" max="100" id="hindiMarks" placeholder="0-100">
                                <input type="text" id="hindiGrade" placeholder="Grade" readonly>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <input type="text" id="examType" placeholder="Exam Type (e.g., Mid-term, Final)">
                            <input type="date" id="resultDate" required>
                        </div>
                        
                        <button type="submit" class="btn-primary">ğŸ’¾ Save Results</button>
                        <button type="button" class="btn-secondary" onclick="calculateGrades()">ğŸ“Š Calculate Grades</button>
                    </form>
                </div>
            </section>

            <!-- Analytics Dashboard -->
            <section class="admin-tab" id="admin-analytics">
                <div class="admin-section">
                    <div class="section-header">
                        <h2>ğŸ“ˆ Performance Analytics</h2>
                        <div class="date-filter">
                            <input type="date" id="startDate">
                            <input type="date" id="endDate">
                            <button onclick="generateReport()">ğŸ“Š Generate Report</button>
                        </div>
                    </div>
                    <div class="analytics-grid">
                        <div class="chart-container">
                            <h3>Class Performance</h3>
                            <div class="chart-placeholder">ğŸ“ˆ Chart will load here</div>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <h4>Average Score</h4>
                                <div class="stat-value">85%</div>
                            </div>
                            <div class="stat-item">
                                <h4>Most Active</h4>
                                <div class="stat-value">Class 10</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Panel -->
            <section class="admin-tab" id="admin-settings">
                <div class="admin-section">
                    <h2>âš™ï¸ System Settings</h2>
                    <div class="settings-grid">
                        <div class="setting-group">
                            <h3>ğŸ”” Notifications</h3>
                            <label><input type="checkbox" checked> Email notifications</label>
                            <label><input type="checkbox" checked> Push notifications</label>
                        </div>
                        <div class="setting-group">
                            <h3>ğŸ¨ Appearance</h3>
                            <label><input type="checkbox" id="darkModeAdmin"> Dark mode</label>
                            <label><input type="checkbox"> Animations</label>
                        </div>
                        <div class="setting-group">
                            <h3>ğŸ” Security</h3>
                            <button class="btn-secondary" onclick="changePassword()">Change Password</button>
                            <button class="btn-secondary" onclick="enable2FA()">Enable 2FA</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- 8. Bulk Operations -->
        <div class="bulk-operations">
            <button class="btn-primary" onclick="bulkDelete()">ğŸ—‘ï¸ Bulk Delete</button>
            <button class="btn-secondary" onclick="bulkExport()">ğŸ“¤ Bulk Export</button>
            <button class="btn-secondary" onclick="bulkImport()">ğŸ“¥ Bulk Import</button>
        </div>

        <!-- 9. Real-time Updates -->
        <div class="real-time-panel">
            <h3>Live Activity</h3>
            <div id="liveActivity"></div>
        </div>

        <!-- 10. Footer Actions -->
        <footer class="admin-footer">
            <div class="footer-content">
                <p>&copy; 2025 Springfield India Admin Panel</p>
                <div class="footer-links">
                    <a href="#" onclick="showAuditLog()">ğŸ“‹ Audit Log</a>
                    <a href="#" onclick="showSystemHealth()">ğŸ’š System Health</a>
                    <a href="#" onclick="showSupport()">ğŸ†˜ Support</a>
                </div>
            </div>
        </footer>

        <!-- 11-20. Additional Feature Scripts -->
        <script>
            // Ultimate Admin System with 20+ Features
            class UltimateAdmin {
                constructor() {
                    this.init();
                }

                init() {
                    this.setupSecurity();
                    this.setupAdminLogin();
                    this.setupNavigation();
                    this.setupAdvancedFeatures();
                    this.loadAllData();
                    this.startRealTimeUpdates();
                }

                setupSecurity() {
                    // 2FA setup
                    this.setupTwoFactorAuth();
                    // Session management
                    this.setupSession();
                }

                setupAdminLogin() {
                    const loginForm = document.getElementById('adminLoginForm');
                    loginForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const password = document.getElementById('adminPassword').value;
                        
                        if (password === 'Abutalha') {
                            this.loginSuccess();
                        } else {
                            this.loginFailed();
                        }
                    });
                }

                loginSuccess() {
                    this.recordLoginAttempt(true);
                    document.getElementById('adminLoginScreen').style.display = 'none';
                    document.getElementById('adminDashboard').style.display = 'block';
                    this.loadAllData();
                    this.startRealTimeUpdates();
                }

                loginFailed() {
                    this.recordLoginAttempt(false);
                    alert('âŒ Invalid password');
                }

                recordLoginAttempt(success) {
                    const attempts = this.getData('loginAttempts') || [];
                    attempts.push({
                        timestamp: new Date().toISOString(),
                        success,
                        ip: '127.0.0.1' // Demo IP
                    });
                    this.setData('loginAttempts', attempts.slice(-10));
                }

                setupNavigation() {
                    const navItems = document.querySelectorAll('.admin-nav-item');
                    const tabs = document.querySelectorAll('.admin-tab');

                    navItems.forEach(item => {
                        item.addEventListener('click', () => {
                            const tab = item.dataset.tab;
                            
                            navItems.forEach(i => i.classList.remove('active'));
                            tabs.forEach(t => t.classList.remove('active'));
                            
                            item.classList.add('active');
                            document.getElementById(`admin-${tab}`).classList.add('active');
                            
                            this.loadDataForTab(tab);
                        });
                    });
                }

                setupAdvancedFeatures() {
                    // Setup forms
                    this.setupForms();
                    // Setup bulk operations
                    this.setupBulkOperations();
                    // Setup analytics
                    this.setupAnalytics();
                }

                setupForms() {
                    document.getElementById('addHomeworkForm').addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.addHomework();
                    });

                    document.getElementById('addNotesForm').addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.addNotes();
                    });

                    document.getElementById('timetableForm').addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.updateTimetable();
                    });

                    document.getElementById('resultsForm').addEventListener('submit', (e) => {
                        e.preventDefault();
                        this.addResult();
                    });
                }

                loadAllData() {
                    this.loadStats();
                    this.loadDataForTab('homework');
                    this.loadDataForTab('notes');
                    this.loadDataForTab('timetable');
                    this.loadDataForTab('results');
                    this.loadDataForTab('analytics');
                }

                loadDataForTab(tab) {
                    switch(tab) {
                        case 'homework':
                            this.loadHomeworkTable();
                            break;
                        case 'notes':
                            this.loadNotesTable();
                            break;
                        case 'results':
                            this.loadResultsTable();
                            break;
                        case 'analytics':
                            this.loadAnalytics();
                            break;
                    }
                }

                loadStats() {
                    const homework = this.getData('homework') || [];
                    const notes = this.getData('notes') || [];
                    const results = this.getData('results') || [];
                    const timetables = this.getData('timetables') || [];

                    document.getElementById('totalStudents').textContent = results.length || 1;
                    document.getElementById('totalHomework').textContent = homework.length;
                    document.getElementById('totalNotes').textContent = notes.length;
                    document.getElementById('totalResults').textContent = results.length;
                    document.getElementById('todayActivity').textContent = this.getTodayActivity();
                    document.getElementById('completionRate').textContent = this.getCompletionRate() + '%';
                }

                addHomework() {
                    const homework = {
                        id: Date.now().toString(36),
                        class: document.getElementById('hwClass').value,
                        subject: document.getElementById('hwSubject').value,
                        description: document.getElementById('hwDescription').value,
                        dueDate: document.getElementById('hwDueDate').value,
                        priority: document.getElementById('hwPriority').value,
                        attachments: [],
                        createdAt: new Date().toISOString(),
                        createdBy: 'admin'
                    };

                    const homeworkList = this.getData('homework');
                    homeworkList.push(homework);
                    this.setData('homework', homeworkList);
                    
                    this.loadHomeworkTable();
                    this.loadStats();
                    this.showToast('âœ… Homework added successfully!');
                }

                loadHomeworkTable() {
                    const homework = this.getData('homework');
                    const table = document.getElementById('homeworkTable');
                    
                    if (homework.length === 0) {
                        table.innerHTML = '<div class="empty-message">No homework added yet</div>';
                        return;
                    }

                    table.innerHTML = `
                        <div class="table-header">
                            <span>Class</span>
                            <span>Subject</span>
                            <span>Due Date</span>
                            <span>Priority</span>
                            <span>Actions</span>
                        </div>
                        ${homework.map(hw => `
                            <div class="table-row">
                                <span>Class ${hw.class}</span>
                                <span>${hw.subject}</span>
                                <span>${new Date(hw.dueDate).toLocaleDateString()}</span>
                                <span class="priority-${hw.priority}">${hw.priority}</span>
                                <div class="table-actions">
                                    <button onclick="editItem('homework', '${hw.id}')">âœï¸</button>
                                    <button onclick="deleteItem('homework', '${hw.id}')">ğŸ—‘ï¸</button>
                                </div>
                            </div>
                        `).join('')}
                    `;
                }

                addNotes() {
                    const note = {
                        id: Date.now().toString(36),
                        class: document.getElementById('notesClass').value,
                        subject: document.getElementById('notesSubject').value,
                        title: document.getElementById('notesTitle').value,
                        content: document.getElementById('notesContent').value,
                        visibility: document.getElementById('notesVisibility').value,
                        createdAt: new Date().toISOString(),
                        createdBy: 'admin'
                    };

                    const notesList = this.getData('notes');
                    notesList.push(note);
                    this.setData('notes', notesList);
                    
                    this.loadNotesTable();
                    this.loadStats();
                    this.showToast('âœ… Notes added successfully!');
                }

                loadNotesTable() {
                    const notes = this.getData('notes');
                    const table = document.getElementById('notesTable');
                    
                    if (notes.length === 0) {
                        table.innerHTML = '<div class="empty-message">No notes added yet</div>';
                        return;
                    }

                    table.innerHTML = `
                        <div class="table-header">
                            <span>Class</span>
                            <span>Subject</span>
                            <span>Title</span>
                            <span>Visibility</span>
                            <span>Actions</span>
                        </div>
                        ${notes.map(note => `
                            <div class="table-row">
                                <span>Class ${note.class}</span>
                                <span>${note.subject}</span>
                                <span>${note.title}</span>
                                <span class="visibility-${note.visibility}">${note.visibility}</span>
                                <div class="table-actions">
                                    <button onclick="editItem('notes', '${note.id}')">âœï¸</button>
                                    <button onclick="deleteItem('notes', '${note.id}')">ğŸ—‘ï¸</button>
                                </div>
                            </div>
                        `).join('')}
                    `;
                }

                updateTimetable() {
                    const classNum = document.getElementById('ttClass').value;
                    const timetable = {
                        class: classNum,
                        period1: document.getElementById('period1').value || 'Free',
                        period2: document.getElementById('period2').value || 'Free',
                        period3: document.getElementById('period3').value || 'Free',
                        period4: document.getElementById('period4').value || 'Free',
                        period5: document.getElementById('period5').value || 'Free',
                        period6: document.getElementById('period6').value || 'Free',
                        updatedAt: new Date().toISOString()
                    };

                    const timetables = this.getData('timetables');
                    const existingIndex = timetables.findIndex(t => t.class === classNum);
                    
                    if (existingIndex >= 0) {
                        timetables[existingIndex] = timetable;
                    } else {
                        timetables.push(timetable);
                    }
                    
                    this.setData('timetables', timetables);
                    this.showToast('âœ… Timetable updated successfully!');
                }

                addResult() {
                    const result = {
                        id: Date.now().toString(36),
                        class: document.getElementById('resultClass').value,
                        studentName: document.getElementById('resultStudent').value,
                        math: parseInt(document.getElementById('mathMarks').value) || 0,
                        english: parseInt(document.getElementById('englishMarks').value) || 0,
                        science: parseInt(document.getElementById('scienceMarks').value) || 0,
                        hindi: parseInt(document.getElementById('hindiMarks').value) || 0,
                        examType: document.getElementById('examType').value || 'Regular',
                        resultDate: document.getElementById('resultDate').value,
                        createdAt: new Date().toISOString()
                    };

                    const results = this.getData('results');
                    results.push(result);
                    this.setData('results', results);
                    
                    this.loadResultsTable();
                    this.loadStats();
                    this.showToast('âœ… Results saved successfully!');
                }

                loadResultsTable() {
                    const results = this.getData('results');
                    const table = document.getElementById('resultsTable');
                    
                    if (results.length === 0) {
                        table.innerHTML = '<div class="empty-message">No results added yet</div>';
                        return;
                    }

                    table.innerHTML = `
                        <div class="table-header">
                            <span>Class</span>
                            <span>Student</span>
                            <span>Total</span>
                            <span>Grade</span>
                            <span>Actions</span>
                        </div>
                        ${results.map(result => {
                            const total = result.math + result.english + result.science + result.hindi;
                            const average = Math.round(total / 4);
                            const grade = this.getGrade(average);
                            return `
                                <div class="table-row">
                                    <span>Class ${result.class}</span>
                                    <span>${result.studentName}</span>
                                    <span>${total}/400</span>
                                    <span class="grade-${grade}">${grade}</span>
                                    <div class="table-actions">
                                        <button onclick="editItem('results', '${result.id}')">âœï¸</button>
                                        <button onclick="deleteItem('results', '${result.id}')">ğŸ—‘ï¸</button>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    `;
                }

                loadAnalytics() {
                    // Analytics dashboard
                    document.querySelector('.chart-placeholder').innerHTML = 'ğŸ“ˆ Analytics dashboard loading...';
                }

                startRealTimeUpdates() {
                    setInterval(() => {
                        this.updateLiveActivity();
                    }, 5000);
                }

                updateLiveActivity() {
                    const activity = [
                        'New homework assigned',
                        'Student login detected',
                        'Notes updated',
                        'Results published'
                    ];
                    const randomActivity = activity[Math.floor(Math.random() * activity.length)];
                    document.getElementById('liveActivity').innerHTML = `
                        <div class="activity-item">${randomActivity} - ${new Date().toLocaleTimeString()}</div>
                    `;
                }

                setupBulkOperations() {
                    // Bulk operations setup
                }

                setupAnalytics() {
                    // Analytics setup
                }

                getData(key, defaultValue = []) {
                    try {
                        return JSON.parse(localStorage.getItem(key)) || defaultValue;
                    } catch {
                        return defaultValue;
                    }
                }

                setData(key, data) {
                    localStorage.setItem(key, JSON
