<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>AI Assistant | School Web</title>
<style>
:root{--p:#0d6efd;--s:#6c757d;--l:#f8f9fa;--d:#212529;--a:#ffc107;--bg:#fff;--card:#f1f3f5;}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:var(--bg);color:var(--d);display:flex;flex-direction:column;min-height:100vh;}
header{position:sticky;top:0;background:var(--p);color:#fff;padding:12px;text-align:center;font-size:1.2em;font-weight:bold;}
main{flex:1;padding:15px;display:grid;gap:15px;}
.card{background:var(--card);border-radius:12px;padding:15px;box-shadow:0 4px 12px rgba(0,0,0,.1);}
h2{margin-bottom:10px}
.chatBox{height:300px;overflow-y:auto;padding:10px;border:1px solid #ccc;border-radius:8px;background:#fff;}
.msg{margin:5px 0;padding:8px;border-radius:8px;max-width:80%;}
.user{background:var(--p);color:#fff;margin-left:auto;}
.ai{background:#e7f3ff;border:1px solid var(--p);}
input,select,textarea,button{width:100%;padding:10px;margin:5px 0;border-radius:8px;border:1px solid #ccc;}
button{background:var(--p);color:#fff;border:none;font-weight:bold;cursor:pointer;}
footer{position:sticky;bottom:0;background:var(--s);color:#fff;text-align:center;padding:10px;}
#fab{position:fixed;bottom:20px;right:20px;width:50px;height:50px;border-radius:50%;background:var(--a);color:#000;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.3);}
.dark{--bg:#121212;--d:#f1f1f1;--card:#1e1e1e;}
.offline{display:none;background:#ff4444;color:#fff;text-align:center;padding:5px;}
</style>
</head>
<body>
<header>ğŸ¤– School AI Assistant</header>
<div class="offline" id="offline">âš ï¸ You are offline</div>
<main>
<div class="card">
<h2>ğŸ‘¤ Student Info</h2>
<p><b>Name:</b> <span id="stName"></span></p>
<p><b>Class:</b> <span id="stClass"></span></p>
</div>

<div class="card">
<h2>ğŸ“š Homework (Your Class)</h2>
<ul id="hwList"></ul>
</div>

<div class="card">
<h2>ğŸ¤– AI Chat</h2>
<select id="mode">
<option value="school">School Mode (Homework)</option>
<option value="free">Free Mode (General)</option>
</select>
<div class="chatBox" id="chat"></div>
<textarea id="q" placeholder="Type your question..."></textarea>
<button onclick="askAI()">Ask AI</button>
</div>

<div class="card">
<h2>âš™ï¸ Tools</h2>
<button onclick="toggleDark()">ğŸŒ™ Toggle Dark Mode</button>
<button onclick="printPage()">ğŸ–¨ï¸ Print</button>
<button onclick="downloadPDF()">ğŸ“„ Save PDF</button>
<button onclick="sharePage()">ğŸ”— Share</button>
<button onclick="backup()">ğŸ’¾ Backup Data</button>
<button onclick="restore()">ğŸ“‚ Restore Data</button>
<button onclick="adminHook()">ğŸ”‘ Admin</button>
</div>
</main>
<footer>Â© 2025 School AI Portal</footer>
<div id="fab" onclick="window.scrollTo({top:0,behavior:'smooth'})">â¬†ï¸</div>

<script>
const keySchool="AIzaSyCdzFBQ1KVgBfmmjSgHJJwcuLbqne9VjUs";
const keyFree="AIzaSyCqGS8gb5kh7Jr0pv8d84LxCLhgHU-O_VU";

const name=localStorage.getItem('name')||"Unknown";
const cls=localStorage.getItem('cls')||"0";
document.getElementById('stName').innerText=name;
document.getElementById('stClass').innerText="Class "+cls;

const homeworkData={
1:["ğŸ Draw an apple","âœï¸ Write A to Z","ğŸ¶ Learn a poem"],
2:["ğŸ“– Read story book","ğŸ“ Write 10 lines on myself","ğŸ”¢ Practice tables 2-5"],
3:["ğŸŒ Draw India map","ğŸ§® Math sums","ğŸ¨ Make a chart"],
4:["ğŸ“˜ Science chapter 1","âœï¸ Essay on school","ğŸµ Practice song"],
5:["âš—ï¸ Do experiment","ğŸ“Š Math fractions","ğŸ“š History notes"],
6:["ğŸ”¬ Science project","ğŸ—ºï¸ Geography rivers","ğŸ“ English summary"],
7:["ğŸ““ Algebra sums","ğŸŒ± Plant growth record","ğŸ“– Hindi grammar"],
8:["ğŸ’¡ Physics laws","ğŸ¨ Art poster","ğŸ“‘ Civics lesson"],
9:["ğŸ§ª Chemistry practical","ğŸ“ˆ Trigonometry","ğŸ“– Literature Q/A"],
10:["ğŸ§¬ Biology diagrams","ğŸ“ Essay practice","ğŸ“Š Statistics"],
11:["ğŸ“˜ Economics notes","ğŸ§ª Organic chem","ğŸ§® Calculus ex"],
12:["ğŸ“– Revision all","ğŸ“ Mock test","ğŸ’¡ Physics derivations"]
};
let done={};
function loadHW(){
let list=document.getElementById('hwList');
list.innerHTML="";
(homeworkData[cls]||["âœ… No Homework"]).forEach(hw=>{
if(!done[hw]){let li=document.createElement('li');li.textContent=hw;list.appendChild(li);done[hw]=1;}
});
}
loadHW();

async function askAI(){
let q=document.getElementById('q').value.trim();if(!q)return;
let mode=document.getElementById('mode').value;
let api=mode=="school"?keySchool:keyFree;
let chat=document.getElementById('chat');
let user=document.createElement('div');user.className="msg user";user.textContent=q;chat.appendChild(user);
document.getElementById('q').value="";
chat.scrollTop=chat.scrollHeight;
let res=document.createElement('div');res.className="msg ai";res.textContent="Thinking...";chat.appendChild(res);
chat.scrollTop=chat.scrollHeight;
try{
let r=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key="+api,
{method:"POST",headers:{"Content-Type":"application/json"},
body:JSON.stringify({contents:[{parts:[{text:q}]}]})});
let d=await r.json();
let text=d.candidates?.[0]?.content?.parts?.[0]?.text||"No response";
res.textContent=text;
}catch(e){res.textContent="Error: "+e;}
chat.scrollTop=chat.scrollHeight;
}

function toggleDark(){document.body.classList.toggle('dark');}
function printPage(){window.print();}
function sharePage(){if(navigator.share){navigator.share({title:"AI Assistant",url:location.href});}else{alert("Not supported");}}
function downloadPDF(){let blob=new Blob([document.documentElement.outerHTML],{type:'text/html'});let a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download="ai.html";a.click();}
function backup(){let data={name,cls,done,chat:document.getElementById('chat').innerHTML};let a=document.createElement('a');a.href="data:text/json,"+encodeURIComponent(JSON.stringify(data));a.download="backup.json";a.click();}
function restore(){let inp=document.createElement('input');inp.type="file";inp.onchange=e=>{let f=e.target.files[0];let r=new FileReader();r.onload=x=>{let d=JSON.parse(x.target.result);localStorage.setItem('name',d.name);localStorage.setItem('cls',d.cls);done=d.done||{};document.getElementById('chat').innerHTML=d.chat||"";loadHW();location.reload();};r.readAsText(f);};inp.click();}
function adminHook(){let p=prompt("Enter Password");if(p==="Abutalha"){location.href="admin.html";}else{alert("Wrong Password");}}
window.addEventListener('online',()=>document.getElementById('offline').style.display="none");
window.addEventListener('offline',()=>document.getElementById('offline').style.display="block");
</script>
</body>
</html>
